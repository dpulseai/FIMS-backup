(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Op(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),s}var vu={exports:{}},Ja={},wu={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=Symbol.for("react.element"),Dp=Symbol.for("react.portal"),Ip=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),zp=Symbol.for("react.context"),qp=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),Vp=Symbol.for("react.memo"),Hp=Symbol.for("react.lazy"),vc=Symbol.iterator;function Wp(t){return t===null||typeof t!="object"?null:(t=vc&&t[vc]||t["@@iterator"],typeof t=="function"?t:null)}var ju={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nu=Object.assign,ku={};function ws(t,e,s){this.props=t,this.context=e,this.refs=ku,this.updater=s||ju}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Su(){}Su.prototype=ws.prototype;function gl(t,e,s){this.props=t,this.context=e,this.refs=ku,this.updater=s||ju}var xl=gl.prototype=new Su;xl.constructor=gl;Nu(xl,ws.prototype);xl.isPureReactComponent=!0;var wc=Array.isArray,Cu=Object.prototype.hasOwnProperty,_l={current:null},Eu={key:!0,ref:!0,__self:!0,__source:!0};function Pu(t,e,s){var n,a={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Cu.call(e,n)&&!Eu.hasOwnProperty(n)&&(a[n]=e[n]);var d=arguments.length-2;if(d===1)a.children=s;else if(1<d){for(var h=Array(d),p=0;p<d;p++)h[p]=arguments[p+2];a.children=h}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)a[n]===void 0&&(a[n]=d[n]);return{$$typeof:jn,type:t,key:i,ref:o,props:a,_owner:_l.current}}function Kp(t,e){return{$$typeof:jn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yl(t){return typeof t=="object"&&t!==null&&t.$$typeof===jn}function Gp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var jc=/\/+/g;function vi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gp(""+t.key):e.toString(36)}function na(t,e,s,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jn:case Dp:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+vi(o,0):n,wc(a)?(s="",t!=null&&(s=t.replace(jc,"$&/")+"/"),na(a,e,s,"",function(p){return p})):a!=null&&(yl(a)&&(a=Kp(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(jc,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",wc(t))for(var d=0;d<t.length;d++){i=t[d];var h=n+vi(i,d);o+=na(i,e,s,h,a)}else if(h=Wp(t),typeof h=="function")for(t=h.call(t),d=0;!(i=t.next()).done;)i=i.value,h=n+vi(i,d++),o+=na(i,e,s,h,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ln(t,e,s){if(t==null)return t;var n=[],a=0;return na(t,n,"","",function(i){return e.call(s,i,a++)}),n}function Qp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ze={current:null},aa={transition:null},Jp={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:aa,ReactCurrentOwner:_l};ne.Children={map:Ln,forEach:function(t,e,s){Ln(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Ln(t,function(){e++}),e},toArray:function(t){return Ln(t,function(e){return e})||[]},only:function(t){if(!yl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=ws;ne.Fragment=Ip;ne.Profiler=Fp;ne.PureComponent=gl;ne.StrictMode=Mp;ne.Suspense=Bp;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp;ne.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Nu({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=_l.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)Cu.call(e,h)&&!Eu.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=s;else if(1<h){d=Array(h);for(var p=0;p<h;p++)d[p]=arguments[p+2];n.children=d}return{$$typeof:jn,type:t.type,key:a,ref:i,props:n,_owner:o}};ne.createContext=function(t){return t={$$typeof:zp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Up,_context:t},t.Consumer=t};ne.createElement=Pu;ne.createFactory=function(t){var e=Pu.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:qp,render:t}};ne.isValidElement=yl;ne.lazy=function(t){return{$$typeof:Hp,_payload:{_status:-1,_result:t},_init:Qp}};ne.memo=function(t,e){return{$$typeof:Vp,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=aa.transition;aa.transition={};try{t()}finally{aa.transition=e}};ne.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ne.useCallback=function(t,e){return ze.current.useCallback(t,e)};ne.useContext=function(t){return ze.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return ze.current.useDeferredValue(t)};ne.useEffect=function(t,e){return ze.current.useEffect(t,e)};ne.useId=function(){return ze.current.useId()};ne.useImperativeHandle=function(t,e,s){return ze.current.useImperativeHandle(t,e,s)};ne.useInsertionEffect=function(t,e){return ze.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return ze.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return ze.current.useMemo(t,e)};ne.useReducer=function(t,e,s){return ze.current.useReducer(t,e,s)};ne.useRef=function(t){return ze.current.useRef(t)};ne.useState=function(t){return ze.current.useState(t)};ne.useSyncExternalStore=function(t,e,s){return ze.current.useSyncExternalStore(t,e,s)};ne.useTransition=function(){return ze.current.useTransition()};ne.version="18.2.0";wu.exports=ne;var A=wu.exports;const Tu=Op(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=A,Zp=Symbol.for("react.element"),Xp=Symbol.for("react.fragment"),ef=Object.prototype.hasOwnProperty,tf=Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rf={key:!0,ref:!0,__self:!0,__source:!0};function Au(t,e,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ef.call(e,n)&&!rf.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Zp,type:t,key:i,ref:o,props:a,_owner:tf.current}}Ja.Fragment=Xp;Ja.jsx=Au;Ja.jsxs=Au;vu.exports=Ja;var r=vu.exports,$u={exports:{}},st={},Ru={exports:{}},Ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(l,u){var E=l.length;l.push(u);e:for(;0<E;){var v=E-1>>>1,S=l[v];if(0<a(S,u))l[v]=u,l[E]=S,E=v;else break e}}function s(l){return l.length===0?null:l[0]}function n(l){if(l.length===0)return null;var u=l[0],E=l.pop();if(E!==u){l[0]=E;e:for(var v=0,S=l.length,O=S>>>1;v<O;){var b=2*(v+1)-1,f=l[b],C=b+1,U=l[C];if(0>a(f,E))C<S&&0>a(U,f)?(l[v]=U,l[C]=E,v=C):(l[v]=f,l[b]=E,v=b);else if(C<S&&0>a(U,E))l[v]=U,l[C]=E,v=C;else break e}}return u}function a(l,u){var E=l.sortIndex-u.sortIndex;return E!==0?E:l.id-u.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();t.unstable_now=function(){return o.now()-d}}var h=[],p=[],x=1,_=null,w=3,k=!1,m=!1,$=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(l){for(var u=s(p);u!==null;){if(u.callback===null)n(p);else if(u.startTime<=l)n(p),u.sortIndex=u.expirationTime,e(h,u);else break;u=s(p)}}function P(l){if($=!1,g(l),!m)if(s(h)!==null)m=!0,L(y);else{var u=s(p);u!==null&&B(P,u.startTime-l)}}function y(l,u){m=!1,$&&($=!1,j(I),I=-1),k=!0;var E=w;try{for(g(u),_=s(h);_!==null&&(!(_.expirationTime>u)||l&&!F());){var v=_.callback;if(typeof v=="function"){_.callback=null,w=_.priorityLevel;var S=v(_.expirationTime<=u);u=t.unstable_now(),typeof S=="function"?_.callback=S:_===s(h)&&n(h),g(u)}else n(h);_=s(h)}if(_!==null)var O=!0;else{var b=s(p);b!==null&&B(P,b.startTime-u),O=!1}return O}finally{_=null,w=E,k=!1}}var T=!1,D=null,I=-1,H=5,q=-1;function F(){return!(t.unstable_now()-q<H)}function V(){if(D!==null){var l=t.unstable_now();q=l;var u=!0;try{u=D(!0,l)}finally{u?Q():(T=!1,D=null)}}else T=!1}var Q;if(typeof c=="function")Q=function(){c(V)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ie=X.port2;X.port1.onmessage=V,Q=function(){ie.postMessage(null)}}else Q=function(){N(V,0)};function L(l){D=l,T||(T=!0,Q())}function B(l,u){I=N(function(){l(t.unstable_now())},u)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(l){l.callback=null},t.unstable_continueExecution=function(){m||k||(m=!0,L(y))},t.unstable_forceFrameRate=function(l){0>l||125<l?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<l?Math.floor(1e3/l):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(l){switch(w){case 1:case 2:case 3:var u=3;break;default:u=w}var E=w;w=u;try{return l()}finally{w=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(l,u){switch(l){case 1:case 2:case 3:case 4:case 5:break;default:l=3}var E=w;w=l;try{return u()}finally{w=E}},t.unstable_scheduleCallback=function(l,u,E){var v=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?v+E:v):E=v,l){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=E+S,l={id:x++,callback:u,priorityLevel:l,startTime:E,expirationTime:S,sortIndex:-1},E>v?(l.sortIndex=E,e(p,l),s(h)===null&&l===s(p)&&($?(j(I),I=-1):$=!0,B(P,E-v))):(l.sortIndex=S,e(h,l),m||k||(m=!0,L(y))),l},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(l){var u=w;return function(){var E=w;w=u;try{return l.apply(this,arguments)}finally{w=E}}}})(Ou);Ru.exports=Ou;var sf=Ru.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=A,rt=sf;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Du=new Set,tn={};function Dr(t,e){ps(t,e),ps(t+"Capture",e)}function ps(t,e){for(tn[t]=e,t=0;t<e.length;t++)Du.add(e[t])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=Object.prototype.hasOwnProperty,nf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nc={},kc={};function af(t){return no.call(kc,t)?!0:no.call(Nc,t)?!1:nf.test(t)?kc[t]=!0:(Nc[t]=!0,!1)}function of(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lf(t,e,s,n){if(e===null||typeof e>"u"||of(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,s,n,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var bl=/[\-:]([a-z])/g;function vl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bl,vl);$e[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bl,vl);$e[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bl,vl);$e[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function wl(t,e,s,n){var a=$e.hasOwnProperty(e)?$e[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lf(e,s,a,n)&&(s=null),n||a===null?af(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):a.mustUseProperty?t[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,n=a.attributeNamespace,s===null?t.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Ht=Lu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dn=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),jl=Symbol.for("react.strict_mode"),ao=Symbol.for("react.profiler"),Iu=Symbol.for("react.provider"),Mu=Symbol.for("react.context"),Nl=Symbol.for("react.forward_ref"),io=Symbol.for("react.suspense"),oo=Symbol.for("react.suspense_list"),kl=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Fu=Symbol.for("react.offscreen"),Sc=Symbol.iterator;function Cs(t){return t===null||typeof t!="object"?null:(t=Sc&&t[Sc]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,wi;function Is(t){if(wi===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);wi=e&&e[1]||""}return`
`+wi+t}var ji=!1;function Ni(t,e){if(!t||ji)return"";ji=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var n=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){n=p}t.call(e.prototype)}else{try{throw Error()}catch(p){n=p}t()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,d=i.length-1;1<=o&&0<=d&&a[o]!==i[d];)d--;for(;1<=o&&0<=d;o--,d--)if(a[o]!==i[d]){if(o!==1||d!==1)do if(o--,d--,0>d||a[o]!==i[d]){var h=`
`+a[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=d);break}}}finally{ji=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Is(t):""}function cf(t){switch(t.tag){case 5:return Is(t.type);case 16:return Is("Lazy");case 13:return Is("Suspense");case 19:return Is("SuspenseList");case 0:case 2:case 15:return t=Ni(t.type,!1),t;case 11:return t=Ni(t.type.render,!1),t;case 1:return t=Ni(t.type,!0),t;default:return""}}function lo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Jr:return"Portal";case ao:return"Profiler";case jl:return"StrictMode";case io:return"Suspense";case oo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mu:return(t.displayName||"Context")+".Consumer";case Iu:return(t._context.displayName||"Context")+".Provider";case Nl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kl:return e=t.displayName||null,e!==null?e:lo(t.type)||"Memo";case Qt:e=t._payload,t=t._init;try{return lo(t(e))}catch{}}return null}function df(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lo(e);case 8:return e===jl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uf(t){var e=Uu(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function In(t){t._valueTracker||(t._valueTracker=uf(t))}function zu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=Uu(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function co(t,e){var s=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Cc(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=ur(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qu(t,e){e=e.checked,e!=null&&wl(t,"checked",e,!1)}function uo(t,e){qu(t,e);var s=ur(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ho(t,e.type,s):e.hasOwnProperty("defaultValue")&&ho(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ec(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function ho(t,e,s){(e!=="number"||ga(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Ms=Array.isArray;function ls(t,e,s,n){if(t=t.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<t.length;s++)a=e.hasOwnProperty("$"+t[s].value),t[s].selected!==a&&(t[s].selected=a),a&&n&&(t[s].defaultSelected=!0)}else{for(s=""+ur(s),e=null,a=0;a<t.length;a++){if(t[a].value===s){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function mo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pc(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(z(92));if(Ms(s)){if(1<s.length)throw Error(z(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:ur(s)}}function Bu(t,e){var s=ur(e.value),n=ur(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Tc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function po(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mn,Hu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mn=Mn||document.createElement("div"),Mn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rn(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hf=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){hf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function Wu(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function Ku(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Wu(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,a):t[s]=a}}var mf=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(t,e){if(e){if(mf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function go(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=null;function Sl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _o=null,cs=null,ds=null;function Ac(t){if(t=Sn(t)){if(typeof _o!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ti(e),_o(t.stateNode,t.type,e))}}function Gu(t){cs?ds?ds.push(t):ds=[t]:cs=t}function Qu(){if(cs){var t=cs,e=ds;if(ds=cs=null,Ac(t),e)for(t=0;t<e.length;t++)Ac(e[t])}}function Ju(t,e){return t(e)}function Yu(){}var ki=!1;function Zu(t,e,s){if(ki)return t(e,s);ki=!0;try{return Ju(t,e,s)}finally{ki=!1,(cs!==null||ds!==null)&&(Yu(),Qu())}}function sn(t,e){var s=t.stateNode;if(s===null)return null;var n=ti(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(z(231,e,typeof s));return s}var yo=!1;if(zt)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){yo=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{yo=!1}function pf(t,e,s,n,a,i,o,d,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(s,p)}catch(x){this.onError(x)}}var Bs=!1,xa=null,_a=!1,bo=null,ff={onError:function(t){Bs=!0,xa=t}};function gf(t,e,s,n,a,i,o,d,h){Bs=!1,xa=null,pf.apply(ff,arguments)}function xf(t,e,s,n,a,i,o,d,h){if(gf.apply(this,arguments),Bs){if(Bs){var p=xa;Bs=!1,xa=null}else throw Error(z(198));_a||(_a=!0,bo=p)}}function Ir(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Xu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $c(t){if(Ir(t)!==t)throw Error(z(188))}function _f(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(z(188));return e!==t?null:t}for(var s=t,n=e;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return $c(a),t;if(i===n)return $c(a),e;i=i.sibling}throw Error(z(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,d=a.child;d;){if(d===s){o=!0,s=a,n=i;break}if(d===n){o=!0,n=a,s=i;break}d=d.sibling}if(!o){for(d=i.child;d;){if(d===s){o=!0,s=i,n=a;break}if(d===n){o=!0,n=i,s=a;break}d=d.sibling}if(!o)throw Error(z(189))}}if(s.alternate!==n)throw Error(z(190))}if(s.tag!==3)throw Error(z(188));return s.stateNode.current===s?t:e}function eh(t){return t=_f(t),t!==null?th(t):null}function th(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=th(t);if(e!==null)return e;t=t.sibling}return null}var rh=rt.unstable_scheduleCallback,Rc=rt.unstable_cancelCallback,yf=rt.unstable_shouldYield,bf=rt.unstable_requestPaint,ve=rt.unstable_now,vf=rt.unstable_getCurrentPriorityLevel,Cl=rt.unstable_ImmediatePriority,sh=rt.unstable_UserBlockingPriority,ya=rt.unstable_NormalPriority,wf=rt.unstable_LowPriority,nh=rt.unstable_IdlePriority,Ya=null,Pt=null;function jf(t){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Ya,t,void 0,(t.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Sf,Nf=Math.log,kf=Math.LN2;function Sf(t){return t>>>=0,t===0?32:31-(Nf(t)/kf|0)|0}var Fn=64,Un=4194304;function Fs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ba(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var d=o&~a;d!==0?n=Fs(d):(i&=o,i!==0&&(n=Fs(i)))}else o=s&~a,o!==0?n=Fs(o):i!==0&&(n=Fs(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-_t(e),a=1<<s,n|=t[s],e&=~a;return n}function Cf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ef(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_t(i),d=1<<o,h=a[o];h===-1?(!(d&s)||d&n)&&(a[o]=Cf(d,e)):h<=e&&(t.expiredLanes|=d),i&=~d}}function vo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ah(){var t=Fn;return Fn<<=1,!(Fn&4194240)&&(Fn=64),t}function Si(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Nn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_t(e),t[e]=s}function Pf(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var a=31-_t(s),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,s&=~i}}function El(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-_t(s),a=1<<n;a&e|t[n]&e&&(t[n]|=e),s&=~a}}var le=0;function ih(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oh,Pl,lh,ch,dh,wo=!1,zn=[],sr=null,nr=null,ar=null,nn=new Map,an=new Map,Yt=[],Tf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oc(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":nn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(e.pointerId)}}function Ps(t,e,s,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Sn(e),e!==null&&Pl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Af(t,e,s,n,a){switch(e){case"focusin":return sr=Ps(sr,t,e,s,n,a),!0;case"dragenter":return nr=Ps(nr,t,e,s,n,a),!0;case"mouseover":return ar=Ps(ar,t,e,s,n,a),!0;case"pointerover":var i=a.pointerId;return nn.set(i,Ps(nn.get(i)||null,t,e,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,an.set(i,Ps(an.get(i)||null,t,e,s,n,a)),!0}return!1}function uh(t){var e=Nr(t.target);if(e!==null){var s=Ir(e);if(s!==null){if(e=s.tag,e===13){if(e=Xu(s),e!==null){t.blockedOn=e,dh(t.priority,function(){lh(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=jo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);xo=n,s.target.dispatchEvent(n),xo=null}else return e=Sn(s),e!==null&&Pl(e),t.blockedOn=s,!1;e.shift()}return!0}function Lc(t,e,s){ia(t)&&s.delete(e)}function $f(){wo=!1,sr!==null&&ia(sr)&&(sr=null),nr!==null&&ia(nr)&&(nr=null),ar!==null&&ia(ar)&&(ar=null),nn.forEach(Lc),an.forEach(Lc)}function Ts(t,e){t.blockedOn===e&&(t.blockedOn=null,wo||(wo=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,$f)))}function on(t){function e(a){return Ts(a,t)}if(0<zn.length){Ts(zn[0],t);for(var s=1;s<zn.length;s++){var n=zn[s];n.blockedOn===t&&(n.blockedOn=null)}}for(sr!==null&&Ts(sr,t),nr!==null&&Ts(nr,t),ar!==null&&Ts(ar,t),nn.forEach(e),an.forEach(e),s=0;s<Yt.length;s++)n=Yt[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Yt.length&&(s=Yt[0],s.blockedOn===null);)uh(s),s.blockedOn===null&&Yt.shift()}var us=Ht.ReactCurrentBatchConfig,va=!0;function Rf(t,e,s,n){var a=le,i=us.transition;us.transition=null;try{le=1,Tl(t,e,s,n)}finally{le=a,us.transition=i}}function Of(t,e,s,n){var a=le,i=us.transition;us.transition=null;try{le=4,Tl(t,e,s,n)}finally{le=a,us.transition=i}}function Tl(t,e,s,n){if(va){var a=jo(t,e,s,n);if(a===null)Di(t,e,n,wa,s),Oc(t,n);else if(Af(a,t,e,s,n))n.stopPropagation();else if(Oc(t,n),e&4&&-1<Tf.indexOf(t)){for(;a!==null;){var i=Sn(a);if(i!==null&&oh(i),i=jo(t,e,s,n),i===null&&Di(t,e,n,wa,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else Di(t,e,n,null,s)}}var wa=null;function jo(t,e,s,n){if(wa=null,t=Sl(n),t=Nr(t),t!==null)if(e=Ir(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Xu(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wa=t,null}function hh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vf()){case Cl:return 1;case sh:return 4;case ya:case wf:return 16;case nh:return 536870912;default:return 16}default:return 16}}var er=null,Al=null,oa=null;function mh(){if(oa)return oa;var t,e=Al,s=e.length,n,a="value"in er?er.value:er.textContent,i=a.length;for(t=0;t<s&&e[t]===a[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===a[i-n];n++);return oa=a.slice(t,1<n?1-n:void 0)}function la(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qn(){return!0}function Dc(){return!1}function nt(t){function e(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(s=t[d],this[d]=s?s(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qn:Dc,this.isPropagationStopped=Dc,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=nt(js),kn=_e({},js,{view:0,detail:0}),Lf=nt(kn),Ci,Ei,As,Za=_e({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(Ci=t.screenX-As.screenX,Ei=t.screenY-As.screenY):Ei=Ci=0,As=t),Ci)},movementY:function(t){return"movementY"in t?t.movementY:Ei}}),Ic=nt(Za),Df=_e({},Za,{dataTransfer:0}),If=nt(Df),Mf=_e({},kn,{relatedTarget:0}),Pi=nt(Mf),Ff=_e({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Uf=nt(Ff),zf=_e({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qf=nt(zf),Bf=_e({},js,{data:0}),Mc=nt(Bf),Vf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kf(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wf[t])?!!e[t]:!1}function Rl(){return Kf}var Gf=_e({},kn,{key:function(t){if(t.key){var e=Vf[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=la(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(t){return t.type==="keypress"?la(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?la(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qf=nt(Gf),Jf=_e({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fc=nt(Jf),Yf=_e({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Zf=nt(Yf),Xf=_e({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),eg=nt(Xf),tg=_e({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=nt(tg),sg=[9,13,27,32],Ol=zt&&"CompositionEvent"in window,Vs=null;zt&&"documentMode"in document&&(Vs=document.documentMode);var ng=zt&&"TextEvent"in window&&!Vs,ph=zt&&(!Ol||Vs&&8<Vs&&11>=Vs),Uc=" ",zc=!1;function fh(t,e){switch(t){case"keyup":return sg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function ag(t,e){switch(t){case"compositionend":return gh(e);case"keypress":return e.which!==32?null:(zc=!0,Uc);case"textInput":return t=e.data,t===Uc&&zc?null:t;default:return null}}function ig(t,e){if(Zr)return t==="compositionend"||!Ol&&fh(t,e)?(t=mh(),oa=Al=er=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ph&&e.locale!=="ko"?null:e.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!og[t.type]:e==="textarea"}function xh(t,e,s,n){Gu(n),e=ja(e,"onChange"),0<e.length&&(s=new $l("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Hs=null,ln=null;function lg(t){Eh(t,0)}function Xa(t){var e=ts(t);if(zu(e))return t}function cg(t,e){if(t==="change")return e}var _h=!1;if(zt){var Ti;if(zt){var Ai="oninput"in document;if(!Ai){var Bc=document.createElement("div");Bc.setAttribute("oninput","return;"),Ai=typeof Bc.oninput=="function"}Ti=Ai}else Ti=!1;_h=Ti&&(!document.documentMode||9<document.documentMode)}function Vc(){Hs&&(Hs.detachEvent("onpropertychange",yh),ln=Hs=null)}function yh(t){if(t.propertyName==="value"&&Xa(ln)){var e=[];xh(e,ln,t,Sl(t)),Zu(lg,e)}}function dg(t,e,s){t==="focusin"?(Vc(),Hs=e,ln=s,Hs.attachEvent("onpropertychange",yh)):t==="focusout"&&Vc()}function ug(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xa(ln)}function hg(t,e){if(t==="click")return Xa(e)}function mg(t,e){if(t==="input"||t==="change")return Xa(e)}function pg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:pg;function cn(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!no.call(e,a)||!vt(t[a],e[a]))return!1}return!0}function Hc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wc(t,e){var s=Hc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Hc(s)}}function bh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vh(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ga(t.document)}return e}function Ll(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fg(t){var e=vh(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&bh(s.ownerDocument.documentElement,s)){if(n!==null&&Ll(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Wc(s,i);var o=Wc(s,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gg=zt&&"documentMode"in document&&11>=document.documentMode,Xr=null,No=null,Ws=null,ko=!1;function Kc(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ko||Xr==null||Xr!==ga(n)||(n=Xr,"selectionStart"in n&&Ll(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ws&&cn(Ws,n)||(Ws=n,n=ja(No,"onSelect"),0<n.length&&(e=new $l("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Xr)))}function Bn(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var es={animationend:Bn("Animation","AnimationEnd"),animationiteration:Bn("Animation","AnimationIteration"),animationstart:Bn("Animation","AnimationStart"),transitionend:Bn("Transition","TransitionEnd")},$i={},wh={};zt&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function ei(t){if($i[t])return $i[t];if(!es[t])return t;var e=es[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in wh)return $i[t]=e[s];return t}var jh=ei("animationend"),Nh=ei("animationiteration"),kh=ei("animationstart"),Sh=ei("transitionend"),Ch=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){Ch.set(t,e),Dr(e,[t])}for(var Ri=0;Ri<Gc.length;Ri++){var Oi=Gc[Ri],xg=Oi.toLowerCase(),_g=Oi[0].toUpperCase()+Oi.slice(1);mr(xg,"on"+_g)}mr(jh,"onAnimationEnd");mr(Nh,"onAnimationIteration");mr(kh,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(Sh,"onTransitionEnd");ps("onMouseEnter",["mouseout","mouseover"]);ps("onMouseLeave",["mouseout","mouseover"]);ps("onPointerEnter",["pointerout","pointerover"]);ps("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function Qc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,xf(n,e,void 0,t),t.currentTarget=null}function Eh(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var d=n[o],h=d.instance,p=d.currentTarget;if(d=d.listener,h!==i&&a.isPropagationStopped())break e;Qc(a,d,p),i=h}else for(o=0;o<n.length;o++){if(d=n[o],h=d.instance,p=d.currentTarget,d=d.listener,h!==i&&a.isPropagationStopped())break e;Qc(a,d,p),i=h}}}if(_a)throw t=bo,_a=!1,bo=null,t}function he(t,e){var s=e[To];s===void 0&&(s=e[To]=new Set);var n=t+"__bubble";s.has(n)||(Ph(e,t,2,!1),s.add(n))}function Li(t,e,s){var n=0;e&&(n|=4),Ph(s,t,n,e)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function dn(t){if(!t[Vn]){t[Vn]=!0,Du.forEach(function(s){s!=="selectionchange"&&(yg.has(s)||Li(s,!1,t),Li(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vn]||(e[Vn]=!0,Li("selectionchange",!1,e))}}function Ph(t,e,s,n){switch(hh(e)){case 1:var a=Rf;break;case 4:a=Of;break;default:a=Tl}s=a.bind(null,e,s,t),a=void 0,!yo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,s,{capture:!0,passive:a}):t.addEventListener(e,s,!0):a!==void 0?t.addEventListener(e,s,{passive:a}):t.addEventListener(e,s,!1)}function Di(t,e,s,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var d=n.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;o=o.return}for(;d!==null;){if(o=Nr(d),o===null)return;if(h=o.tag,h===5||h===6){n=i=o;continue e}d=d.parentNode}}n=n.return}Zu(function(){var p=i,x=Sl(s),_=[];e:{var w=Ch.get(t);if(w!==void 0){var k=$l,m=t;switch(t){case"keypress":if(la(s)===0)break e;case"keydown":case"keyup":k=Qf;break;case"focusin":m="focus",k=Pi;break;case"focusout":m="blur",k=Pi;break;case"beforeblur":case"afterblur":k=Pi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Zf;break;case jh:case Nh:case kh:k=Uf;break;case Sh:k=eg;break;case"scroll":k=Lf;break;case"wheel":k=rg;break;case"copy":case"cut":case"paste":k=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Fc}var $=(e&4)!==0,N=!$&&t==="scroll",j=$?w!==null?w+"Capture":null:w;$=[];for(var c=p,g;c!==null;){g=c;var P=g.stateNode;if(g.tag===5&&P!==null&&(g=P,j!==null&&(P=sn(c,j),P!=null&&$.push(un(c,P,g)))),N)break;c=c.return}0<$.length&&(w=new k(w,m,null,s,x),_.push({event:w,listeners:$}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",w&&s!==xo&&(m=s.relatedTarget||s.fromElement)&&(Nr(m)||m[qt]))break e;if((k||w)&&(w=x.window===x?x:(w=x.ownerDocument)?w.defaultView||w.parentWindow:window,k?(m=s.relatedTarget||s.toElement,k=p,m=m?Nr(m):null,m!==null&&(N=Ir(m),m!==N||m.tag!==5&&m.tag!==6)&&(m=null)):(k=null,m=p),k!==m)){if($=Ic,P="onMouseLeave",j="onMouseEnter",c="mouse",(t==="pointerout"||t==="pointerover")&&($=Fc,P="onPointerLeave",j="onPointerEnter",c="pointer"),N=k==null?w:ts(k),g=m==null?w:ts(m),w=new $(P,c+"leave",k,s,x),w.target=N,w.relatedTarget=g,P=null,Nr(x)===p&&($=new $(j,c+"enter",m,s,x),$.target=g,$.relatedTarget=N,P=$),N=P,k&&m)t:{for($=k,j=m,c=0,g=$;g;g=Fr(g))c++;for(g=0,P=j;P;P=Fr(P))g++;for(;0<c-g;)$=Fr($),c--;for(;0<g-c;)j=Fr(j),g--;for(;c--;){if($===j||j!==null&&$===j.alternate)break t;$=Fr($),j=Fr(j)}$=null}else $=null;k!==null&&Jc(_,w,k,$,!1),m!==null&&N!==null&&Jc(_,N,m,$,!0)}}e:{if(w=p?ts(p):window,k=w.nodeName&&w.nodeName.toLowerCase(),k==="select"||k==="input"&&w.type==="file")var y=cg;else if(qc(w))if(_h)y=mg;else{y=ug;var T=dg}else(k=w.nodeName)&&k.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(y=hg);if(y&&(y=y(t,p))){xh(_,y,s,x);break e}T&&T(t,w,p),t==="focusout"&&(T=w._wrapperState)&&T.controlled&&w.type==="number"&&ho(w,"number",w.value)}switch(T=p?ts(p):window,t){case"focusin":(qc(T)||T.contentEditable==="true")&&(Xr=T,No=p,Ws=null);break;case"focusout":Ws=No=Xr=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Kc(_,s,x);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":Kc(_,s,x)}var D;if(Ol)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Zr?fh(t,s)&&(I="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(I="onCompositionStart");I&&(ph&&s.locale!=="ko"&&(Zr||I!=="onCompositionStart"?I==="onCompositionEnd"&&Zr&&(D=mh()):(er=x,Al="value"in er?er.value:er.textContent,Zr=!0)),T=ja(p,I),0<T.length&&(I=new Mc(I,t,null,s,x),_.push({event:I,listeners:T}),D?I.data=D:(D=gh(s),D!==null&&(I.data=D)))),(D=ng?ag(t,s):ig(t,s))&&(p=ja(p,"onBeforeInput"),0<p.length&&(x=new Mc("onBeforeInput","beforeinput",null,s,x),_.push({event:x,listeners:p}),x.data=D))}Eh(_,e)})}function un(t,e,s){return{instance:t,listener:e,currentTarget:s}}function ja(t,e){for(var s=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=sn(t,s),i!=null&&n.unshift(un(t,i,a)),i=sn(t,e),i!=null&&n.push(un(t,i,a))),t=t.return}return n}function Fr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jc(t,e,s,n,a){for(var i=e._reactName,o=[];s!==null&&s!==n;){var d=s,h=d.alternate,p=d.stateNode;if(h!==null&&h===n)break;d.tag===5&&p!==null&&(d=p,a?(h=sn(s,i),h!=null&&o.unshift(un(s,h,d))):a||(h=sn(s,i),h!=null&&o.push(un(s,h,d)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var bg=/\r\n?/g,vg=/\u0000|\uFFFD/g;function Yc(t){return(typeof t=="string"?t:""+t).replace(bg,`
`).replace(vg,"")}function Hn(t,e,s){if(e=Yc(e),Yc(t)!==e&&s)throw Error(z(425))}function Na(){}var So=null,Co=null;function Eo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Po=typeof setTimeout=="function"?setTimeout:void 0,wg=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(t){return Zc.resolve(null).then(t).catch(Ng)}:Po;function Ng(t){setTimeout(function(){throw t})}function Ii(t,e){var s=e,n=0;do{var a=s.nextSibling;if(t.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){t.removeChild(a),on(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);on(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),St="__reactFiber$"+Ns,hn="__reactProps$"+Ns,qt="__reactContainer$"+Ns,To="__reactEvents$"+Ns,kg="__reactListeners$"+Ns,Sg="__reactHandles$"+Ns;function Nr(t){var e=t[St];if(e)return e;for(var s=t.parentNode;s;){if(e=s[qt]||s[St]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Xc(t);t!==null;){if(s=t[St])return s;t=Xc(t)}return e}t=s,s=t.parentNode}return null}function Sn(t){return t=t[St]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ti(t){return t[hn]||null}var Ao=[],rs=-1;function pr(t){return{current:t}}function me(t){0>rs||(t.current=Ao[rs],Ao[rs]=null,rs--)}function ue(t,e){rs++,Ao[rs]=t.current,t.current=e}var hr={},De=pr(hr),Qe=pr(!1),Ar=hr;function fs(t,e){var s=t.type.contextTypes;if(!s)return hr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Je(t){return t=t.childContextTypes,t!=null}function ka(){me(Qe),me(De)}function ed(t,e,s){if(De.current!==hr)throw Error(z(168));ue(De,e),ue(Qe,s)}function Th(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(z(108,df(t)||"Unknown",a));return _e({},s,n)}function Sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Ar=De.current,ue(De,t),ue(Qe,Qe.current),!0}function td(t,e,s){var n=t.stateNode;if(!n)throw Error(z(169));s?(t=Th(t,e,Ar),n.__reactInternalMemoizedMergedChildContext=t,me(Qe),me(De),ue(De,t)):me(Qe),ue(Qe,s)}var It=null,ri=!1,Mi=!1;function Ah(t){It===null?It=[t]:It.push(t)}function Cg(t){ri=!0,Ah(t)}function fr(){if(!Mi&&It!==null){Mi=!0;var t=0,e=le;try{var s=It;for(le=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}It=null,ri=!1}catch(a){throw It!==null&&(It=It.slice(t+1)),rh(Cl,fr),a}finally{le=e,Mi=!1}}return null}var ss=[],ns=0,Ca=null,Ea=0,at=[],it=0,$r=null,Mt=1,Ft="";function br(t,e){ss[ns++]=Ea,ss[ns++]=Ca,Ca=t,Ea=e}function $h(t,e,s){at[it++]=Mt,at[it++]=Ft,at[it++]=$r,$r=t;var n=Mt;t=Ft;var a=32-_t(n)-1;n&=~(1<<a),s+=1;var i=32-_t(e)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Mt=1<<32-_t(e)+a|s<<a|n,Ft=i+t}else Mt=1<<i|s<<a|n,Ft=t}function Dl(t){t.return!==null&&(br(t,1),$h(t,1,0))}function Il(t){for(;t===Ca;)Ca=ss[--ns],ss[ns]=null,Ea=ss[--ns],ss[ns]=null;for(;t===$r;)$r=at[--it],at[it]=null,Ft=at[--it],at[it]=null,Mt=at[--it],at[it]=null}var tt=null,et=null,fe=!1,xt=null;function Rh(t,e){var s=ot(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function rd(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,et=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=$r!==null?{id:Mt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=ot(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,tt=t,et=null,!0):!1;default:return!1}}function $o(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ro(t){if(fe){var e=et;if(e){var s=e;if(!rd(t,e)){if($o(t))throw Error(z(418));e=ir(s.nextSibling);var n=tt;e&&rd(t,e)?Rh(n,s):(t.flags=t.flags&-4097|2,fe=!1,tt=t)}}else{if($o(t))throw Error(z(418));t.flags=t.flags&-4097|2,fe=!1,tt=t}}}function sd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Wn(t){if(t!==tt)return!1;if(!fe)return sd(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Eo(t.type,t.memoizedProps)),e&&(e=et)){if($o(t))throw Oh(),Error(z(418));for(;e;)Rh(t,e),e=ir(e.nextSibling)}if(sd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){et=ir(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}et=null}}else et=tt?ir(t.stateNode.nextSibling):null;return!0}function Oh(){for(var t=et;t;)t=ir(t.nextSibling)}function gs(){et=tt=null,fe=!1}function Ml(t){xt===null?xt=[t]:xt.push(t)}var Eg=Ht.ReactCurrentBatchConfig;function pt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}var Pa=pr(null),Ta=null,as=null,Fl=null;function Ul(){Fl=as=Ta=null}function zl(t){var e=Pa.current;me(Pa),t._currentValue=e}function Oo(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function hs(t,e){Ta=t,Fl=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ge=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(Fl!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(Ta===null)throw Error(z(308));as=t,Ta.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var kr=null;function ql(t){kr===null?kr=[t]:kr.push(t)}function Lh(t,e,s,n){var a=e.interleaved;return a===null?(s.next=s,ql(e)):(s.next=a.next,a.next=s),e.interleaved=s,Bt(t,n)}function Bt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Jt=!1;function Bl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ut(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Bt(t,s)}return a=n.interleaved,a===null?(e.next=e,ql(n)):(e.next=a.next,a.next=e),n.interleaved=e,Bt(t,s)}function ca(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,El(t,s)}}function nd(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=e:i=i.next=e}else a=i=e;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Aa(t,e,s,n){var a=t.updateQueue;Jt=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var h=d,p=h.next;h.next=null,o===null?i=p:o.next=p,o=h;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==o&&(d===null?x.firstBaseUpdate=p:d.next=p,x.lastBaseUpdate=h))}if(i!==null){var _=a.baseState;o=0,x=p=h=null,d=i;do{var w=d.lane,k=d.eventTime;if((n&w)===w){x!==null&&(x=x.next={eventTime:k,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var m=t,$=d;switch(w=e,k=s,$.tag){case 1:if(m=$.payload,typeof m=="function"){_=m.call(k,_,w);break e}_=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=$.payload,w=typeof m=="function"?m.call(k,_,w):m,w==null)break e;_=_e({},_,w);break e;case 2:Jt=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,w=a.effects,w===null?a.effects=[d]:w.push(d))}else k={eventTime:k,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(p=x=k,h=_):x=x.next=k,o|=w;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;w=d,d=w.next,w.next=null,a.lastBaseUpdate=w,a.shared.pending=null}}while(!0);if(x===null&&(h=_),a.baseState=h,a.firstBaseUpdate=p,a.lastBaseUpdate=x,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Or|=o,t.lanes=o,t.memoizedState=_}}function ad(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(z(191,a));a.call(n)}}}var Ih=new Lu.Component().refs;function Lo(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:_e({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var si={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Ue(),a=cr(t),i=Ut(n,a);i.payload=e,s!=null&&(i.callback=s),e=or(t,i,a),e!==null&&(yt(e,t,a,n),ca(e,t,a))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Ue(),a=cr(t),i=Ut(n,a);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=or(t,i,a),e!==null&&(yt(e,t,a,n),ca(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Ue(),n=cr(t),a=Ut(s,n);a.tag=2,e!=null&&(a.callback=e),e=or(t,a,n),e!==null&&(yt(e,t,n,s),ca(e,t,n))}};function id(t,e,s,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!cn(s,n)||!cn(a,i):!0}function Mh(t,e,s){var n=!1,a=hr,i=e.contextType;return typeof i=="object"&&i!==null?i=dt(i):(a=Je(e)?Ar:De.current,n=e.contextTypes,i=(n=n!=null)?fs(t,a):hr),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=si,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function od(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&si.enqueueReplaceState(e,e.state,null)}function Do(t,e,s,n){var a=t.stateNode;a.props=s,a.state=t.memoizedState,a.refs=Ih,Bl(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=dt(i):(i=Je(e)?Ar:De.current,a.context=fs(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lo(t,e,i,s),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&si.enqueueReplaceState(a,a.state,null),Aa(t,s,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(z(309));var n=s.stateNode}if(!n)throw Error(z(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var d=a.refs;d===Ih&&(d=a.refs={}),o===null?delete d[i]:d[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!s._owner)throw Error(z(290,t))}return t}function Kn(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ld(t){var e=t._init;return e(t._payload)}function Fh(t){function e(j,c){if(t){var g=j.deletions;g===null?(j.deletions=[c],j.flags|=16):g.push(c)}}function s(j,c){if(!t)return null;for(;c!==null;)e(j,c),c=c.sibling;return null}function n(j,c){for(j=new Map;c!==null;)c.key!==null?j.set(c.key,c):j.set(c.index,c),c=c.sibling;return j}function a(j,c){return j=dr(j,c),j.index=0,j.sibling=null,j}function i(j,c,g){return j.index=g,t?(g=j.alternate,g!==null?(g=g.index,g<c?(j.flags|=2,c):g):(j.flags|=2,c)):(j.flags|=1048576,c)}function o(j){return t&&j.alternate===null&&(j.flags|=2),j}function d(j,c,g,P){return c===null||c.tag!==6?(c=Hi(g,j.mode,P),c.return=j,c):(c=a(c,g),c.return=j,c)}function h(j,c,g,P){var y=g.type;return y===Yr?x(j,c,g.props.children,P,g.key):c!==null&&(c.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Qt&&ld(y)===c.type)?(P=a(c,g.props),P.ref=$s(j,c,g),P.return=j,P):(P=fa(g.type,g.key,g.props,null,j.mode,P),P.ref=$s(j,c,g),P.return=j,P)}function p(j,c,g,P){return c===null||c.tag!==4||c.stateNode.containerInfo!==g.containerInfo||c.stateNode.implementation!==g.implementation?(c=Wi(g,j.mode,P),c.return=j,c):(c=a(c,g.children||[]),c.return=j,c)}function x(j,c,g,P,y){return c===null||c.tag!==7?(c=Er(g,j.mode,P,y),c.return=j,c):(c=a(c,g),c.return=j,c)}function _(j,c,g){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Hi(""+c,j.mode,g),c.return=j,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Dn:return g=fa(c.type,c.key,c.props,null,j.mode,g),g.ref=$s(j,null,c),g.return=j,g;case Jr:return c=Wi(c,j.mode,g),c.return=j,c;case Qt:var P=c._init;return _(j,P(c._payload),g)}if(Ms(c)||Cs(c))return c=Er(c,j.mode,g,null),c.return=j,c;Kn(j,c)}return null}function w(j,c,g,P){var y=c!==null?c.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return y!==null?null:d(j,c,""+g,P);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Dn:return g.key===y?h(j,c,g,P):null;case Jr:return g.key===y?p(j,c,g,P):null;case Qt:return y=g._init,w(j,c,y(g._payload),P)}if(Ms(g)||Cs(g))return y!==null?null:x(j,c,g,P,null);Kn(j,g)}return null}function k(j,c,g,P,y){if(typeof P=="string"&&P!==""||typeof P=="number")return j=j.get(g)||null,d(c,j,""+P,y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Dn:return j=j.get(P.key===null?g:P.key)||null,h(c,j,P,y);case Jr:return j=j.get(P.key===null?g:P.key)||null,p(c,j,P,y);case Qt:var T=P._init;return k(j,c,g,T(P._payload),y)}if(Ms(P)||Cs(P))return j=j.get(g)||null,x(c,j,P,y,null);Kn(c,P)}return null}function m(j,c,g,P){for(var y=null,T=null,D=c,I=c=0,H=null;D!==null&&I<g.length;I++){D.index>I?(H=D,D=null):H=D.sibling;var q=w(j,D,g[I],P);if(q===null){D===null&&(D=H);break}t&&D&&q.alternate===null&&e(j,D),c=i(q,c,I),T===null?y=q:T.sibling=q,T=q,D=H}if(I===g.length)return s(j,D),fe&&br(j,I),y;if(D===null){for(;I<g.length;I++)D=_(j,g[I],P),D!==null&&(c=i(D,c,I),T===null?y=D:T.sibling=D,T=D);return fe&&br(j,I),y}for(D=n(j,D);I<g.length;I++)H=k(D,j,I,g[I],P),H!==null&&(t&&H.alternate!==null&&D.delete(H.key===null?I:H.key),c=i(H,c,I),T===null?y=H:T.sibling=H,T=H);return t&&D.forEach(function(F){return e(j,F)}),fe&&br(j,I),y}function $(j,c,g,P){var y=Cs(g);if(typeof y!="function")throw Error(z(150));if(g=y.call(g),g==null)throw Error(z(151));for(var T=y=null,D=c,I=c=0,H=null,q=g.next();D!==null&&!q.done;I++,q=g.next()){D.index>I?(H=D,D=null):H=D.sibling;var F=w(j,D,q.value,P);if(F===null){D===null&&(D=H);break}t&&D&&F.alternate===null&&e(j,D),c=i(F,c,I),T===null?y=F:T.sibling=F,T=F,D=H}if(q.done)return s(j,D),fe&&br(j,I),y;if(D===null){for(;!q.done;I++,q=g.next())q=_(j,q.value,P),q!==null&&(c=i(q,c,I),T===null?y=q:T.sibling=q,T=q);return fe&&br(j,I),y}for(D=n(j,D);!q.done;I++,q=g.next())q=k(D,j,I,q.value,P),q!==null&&(t&&q.alternate!==null&&D.delete(q.key===null?I:q.key),c=i(q,c,I),T===null?y=q:T.sibling=q,T=q);return t&&D.forEach(function(V){return e(j,V)}),fe&&br(j,I),y}function N(j,c,g,P){if(typeof g=="object"&&g!==null&&g.type===Yr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Dn:e:{for(var y=g.key,T=c;T!==null;){if(T.key===y){if(y=g.type,y===Yr){if(T.tag===7){s(j,T.sibling),c=a(T,g.props.children),c.return=j,j=c;break e}}else if(T.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Qt&&ld(y)===T.type){s(j,T.sibling),c=a(T,g.props),c.ref=$s(j,T,g),c.return=j,j=c;break e}s(j,T);break}else e(j,T);T=T.sibling}g.type===Yr?(c=Er(g.props.children,j.mode,P,g.key),c.return=j,j=c):(P=fa(g.type,g.key,g.props,null,j.mode,P),P.ref=$s(j,c,g),P.return=j,j=P)}return o(j);case Jr:e:{for(T=g.key;c!==null;){if(c.key===T)if(c.tag===4&&c.stateNode.containerInfo===g.containerInfo&&c.stateNode.implementation===g.implementation){s(j,c.sibling),c=a(c,g.children||[]),c.return=j,j=c;break e}else{s(j,c);break}else e(j,c);c=c.sibling}c=Wi(g,j.mode,P),c.return=j,j=c}return o(j);case Qt:return T=g._init,N(j,c,T(g._payload),P)}if(Ms(g))return m(j,c,g,P);if(Cs(g))return $(j,c,g,P);Kn(j,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,c!==null&&c.tag===6?(s(j,c.sibling),c=a(c,g),c.return=j,j=c):(s(j,c),c=Hi(g,j.mode,P),c.return=j,j=c),o(j)):s(j,c)}return N}var xs=Fh(!0),Uh=Fh(!1),Cn={},Tt=pr(Cn),mn=pr(Cn),pn=pr(Cn);function Sr(t){if(t===Cn)throw Error(z(174));return t}function Vl(t,e){switch(ue(pn,e),ue(mn,t),ue(Tt,Cn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:po(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=po(e,t)}me(Tt),ue(Tt,e)}function _s(){me(Tt),me(mn),me(pn)}function zh(t){Sr(pn.current);var e=Sr(Tt.current),s=po(e,t.type);e!==s&&(ue(mn,t),ue(Tt,s))}function Hl(t){mn.current===t&&(me(Tt),me(mn))}var ge=pr(0);function $a(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fi=[];function Wl(){for(var t=0;t<Fi.length;t++)Fi[t]._workInProgressVersionPrimary=null;Fi.length=0}var da=Ht.ReactCurrentDispatcher,Ui=Ht.ReactCurrentBatchConfig,Rr=0,xe=null,ke=null,Ce=null,Ra=!1,Ks=!1,fn=0,Pg=0;function Re(){throw Error(z(321))}function Kl(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!vt(t[s],e[s]))return!1;return!0}function Gl(t,e,s,n,a,i){if(Rr=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=t===null||t.memoizedState===null?Rg:Og,t=s(n,a),Ks){i=0;do{if(Ks=!1,fn=0,25<=i)throw Error(z(301));i+=1,Ce=ke=null,e.updateQueue=null,da.current=Lg,t=s(n,a)}while(Ks)}if(da.current=Oa,e=ke!==null&&ke.next!==null,Rr=0,Ce=ke=xe=null,Ra=!1,e)throw Error(z(300));return t}function Ql(){var t=fn!==0;return fn=0,t}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?xe.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function ut(){if(ke===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ce===null?xe.memoizedState:Ce.next;if(e!==null)Ce=e,ke=t;else{if(t===null)throw Error(z(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?xe.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function gn(t,e){return typeof e=="function"?e(t):e}function zi(t){var e=ut(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=ke,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var d=o=null,h=null,p=i;do{var x=p.lane;if((Rr&x)===x)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),n=p.hasEagerState?p.eagerState:t(n,p.action);else{var _={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(d=h=_,o=n):h=h.next=_,xe.lanes|=x,Or|=x}p=p.next}while(p!==null&&p!==i);h===null?o=n:h.next=d,vt(n,e.memoizedState)||(Ge=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=h,s.lastRenderedState=n}if(t=s.interleaved,t!==null){a=t;do i=a.lane,xe.lanes|=i,Or|=i,a=a.next;while(a!==t)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function qi(t){var e=ut(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=s.dispatch,a=s.pending,i=e.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);vt(i,e.memoizedState)||(Ge=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function qh(){}function Bh(t,e){var s=xe,n=ut(),a=e(),i=!vt(n.memoizedState,a);if(i&&(n.memoizedState=a,Ge=!0),n=n.queue,Jl(Wh.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Ce!==null&&Ce.memoizedState.tag&1){if(s.flags|=2048,xn(9,Hh.bind(null,s,n,a,e),void 0,null),Ee===null)throw Error(z(349));Rr&30||Vh(s,e,a)}return a}function Vh(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Hh(t,e,s,n){e.value=s,e.getSnapshot=n,Kh(e)&&Gh(t)}function Wh(t,e,s){return s(function(){Kh(e)&&Gh(t)})}function Kh(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!vt(t,s)}catch{return!0}}function Gh(t){var e=Bt(t,1);e!==null&&yt(e,t,1,-1)}function cd(t){var e=Nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:t},e.queue=t,t=t.dispatch=$g.bind(null,xe,t),[e.memoizedState,t]}function xn(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Qh(){return ut().memoizedState}function ua(t,e,s,n){var a=Nt();xe.flags|=t,a.memoizedState=xn(1|e,s,void 0,n===void 0?null:n)}function ni(t,e,s,n){var a=ut();n=n===void 0?null:n;var i=void 0;if(ke!==null){var o=ke.memoizedState;if(i=o.destroy,n!==null&&Kl(n,o.deps)){a.memoizedState=xn(e,s,i,n);return}}xe.flags|=t,a.memoizedState=xn(1|e,s,i,n)}function dd(t,e){return ua(8390656,8,t,e)}function Jl(t,e){return ni(2048,8,t,e)}function Jh(t,e){return ni(4,2,t,e)}function Yh(t,e){return ni(4,4,t,e)}function Zh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xh(t,e,s){return s=s!=null?s.concat([t]):null,ni(4,4,Zh.bind(null,e,t),s)}function Yl(){}function em(t,e){var s=ut();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Kl(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function tm(t,e){var s=ut();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Kl(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function rm(t,e,s){return Rr&21?(vt(s,e)||(s=ah(),xe.lanes|=s,Or|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ge=!0),t.memoizedState=s)}function Tg(t,e){var s=le;le=s!==0&&4>s?s:4,t(!0);var n=Ui.transition;Ui.transition={};try{t(!1),e()}finally{le=s,Ui.transition=n}}function sm(){return ut().memoizedState}function Ag(t,e,s){var n=cr(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},nm(t))am(e,s);else if(s=Lh(t,e,s,n),s!==null){var a=Ue();yt(s,t,n,a),im(s,e,n)}}function $g(t,e,s){var n=cr(t),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(nm(t))am(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,d=i(o,s);if(a.hasEagerState=!0,a.eagerState=d,vt(d,o)){var h=e.interleaved;h===null?(a.next=a,ql(e)):(a.next=h.next,h.next=a),e.interleaved=a;return}}catch{}finally{}s=Lh(t,e,a,n),s!==null&&(a=Ue(),yt(s,t,n,a),im(s,e,n))}}function nm(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function am(t,e){Ks=Ra=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function im(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,El(t,s)}}var Oa={readContext:dt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Rg={readContext:dt,useCallback:function(t,e){return Nt().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:dd,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,ua(4194308,4,Zh.bind(null,e,t),s)},useLayoutEffect:function(t,e){return ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return ua(4,2,t,e)},useMemo:function(t,e){var s=Nt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Nt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ag.bind(null,xe,t),[n.memoizedState,t]},useRef:function(t){var e=Nt();return t={current:t},e.memoizedState=t},useState:cd,useDebugValue:Yl,useDeferredValue:function(t){return Nt().memoizedState=t},useTransition:function(){var t=cd(!1),e=t[0];return t=Tg.bind(null,t[1]),Nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=xe,a=Nt();if(fe){if(s===void 0)throw Error(z(407));s=s()}else{if(s=e(),Ee===null)throw Error(z(349));Rr&30||Vh(n,e,s)}a.memoizedState=s;var i={value:s,getSnapshot:e};return a.queue=i,dd(Wh.bind(null,n,i,t),[t]),n.flags|=2048,xn(9,Hh.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=Nt(),e=Ee.identifierPrefix;if(fe){var s=Ft,n=Mt;s=(n&~(1<<32-_t(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=fn++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Pg++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Og={readContext:dt,useCallback:em,useContext:dt,useEffect:Jl,useImperativeHandle:Xh,useInsertionEffect:Jh,useLayoutEffect:Yh,useMemo:tm,useReducer:zi,useRef:Qh,useState:function(){return zi(gn)},useDebugValue:Yl,useDeferredValue:function(t){var e=ut();return rm(e,ke.memoizedState,t)},useTransition:function(){var t=zi(gn)[0],e=ut().memoizedState;return[t,e]},useMutableSource:qh,useSyncExternalStore:Bh,useId:sm,unstable_isNewReconciler:!1},Lg={readContext:dt,useCallback:em,useContext:dt,useEffect:Jl,useImperativeHandle:Xh,useInsertionEffect:Jh,useLayoutEffect:Yh,useMemo:tm,useReducer:qi,useRef:Qh,useState:function(){return qi(gn)},useDebugValue:Yl,useDeferredValue:function(t){var e=ut();return ke===null?e.memoizedState=t:rm(e,ke.memoizedState,t)},useTransition:function(){var t=qi(gn)[0],e=ut().memoizedState;return[t,e]},useMutableSource:qh,useSyncExternalStore:Bh,useId:sm,unstable_isNewReconciler:!1};function ys(t,e){try{var s="",n=e;do s+=cf(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Bi(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Io(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Dg=typeof WeakMap=="function"?WeakMap:Map;function om(t,e,s){s=Ut(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Da||(Da=!0,Ko=n),Io(t,e)},s}function lm(t,e,s){s=Ut(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;s.payload=function(){return n(a)},s.callback=function(){Io(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Io(t,e),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function ud(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Dg;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(s)||(a.add(s),t=Jg.bind(null,t,e,s),e.then(t,t))}function hd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function md(t,e,s,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Ut(-1,1),e.tag=2,or(s,e,1))),s.lanes|=1),t)}var Ig=Ht.ReactCurrentOwner,Ge=!1;function Fe(t,e,s,n){e.child=t===null?Uh(e,null,s,n):xs(e,t.child,s,n)}function pd(t,e,s,n,a){s=s.render;var i=e.ref;return hs(e,a),n=Gl(t,e,s,n,i,a),s=Ql(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Vt(t,e,a)):(fe&&s&&Dl(e),e.flags|=1,Fe(t,e,n,a),e.child)}function fd(t,e,s,n,a){if(t===null){var i=s.type;return typeof i=="function"&&!ac(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,cm(t,e,i,n,a)):(t=fa(s.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:cn,s(o,n)&&t.ref===e.ref)return Vt(t,e,a)}return e.flags|=1,t=dr(i,n),t.ref=e.ref,t.return=e,e.child=t}function cm(t,e,s,n,a){if(t!==null){var i=t.memoizedProps;if(cn(i,n)&&t.ref===e.ref)if(Ge=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Ge=!0);else return e.lanes=t.lanes,Vt(t,e,a)}return Mo(t,e,s,n,a)}function dm(t,e,s){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(os,Ze),Ze|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(os,Ze),Ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ue(os,Ze),Ze|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,ue(os,Ze),Ze|=n;return Fe(t,e,a,s),e.child}function um(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Mo(t,e,s,n,a){var i=Je(s)?Ar:De.current;return i=fs(e,i),hs(e,a),s=Gl(t,e,s,n,i,a),n=Ql(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Vt(t,e,a)):(fe&&n&&Dl(e),e.flags|=1,Fe(t,e,s,a),e.child)}function gd(t,e,s,n,a){if(Je(s)){var i=!0;Sa(e)}else i=!1;if(hs(e,a),e.stateNode===null)ha(t,e),Mh(e,s,n),Do(e,s,n,a),n=!0;else if(t===null){var o=e.stateNode,d=e.memoizedProps;o.props=d;var h=o.context,p=s.contextType;typeof p=="object"&&p!==null?p=dt(p):(p=Je(s)?Ar:De.current,p=fs(e,p));var x=s.getDerivedStateFromProps,_=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function";_||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==n||h!==p)&&od(e,o,n,p),Jt=!1;var w=e.memoizedState;o.state=w,Aa(e,n,o,a),h=e.memoizedState,d!==n||w!==h||Qe.current||Jt?(typeof x=="function"&&(Lo(e,s,x,n),h=e.memoizedState),(d=Jt||id(e,s,d,n,w,h,p))?(_||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),o.props=n,o.state=h,o.context=p,n=d):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Dh(t,e),d=e.memoizedProps,p=e.type===e.elementType?d:pt(e.type,d),o.props=p,_=e.pendingProps,w=o.context,h=s.contextType,typeof h=="object"&&h!==null?h=dt(h):(h=Je(s)?Ar:De.current,h=fs(e,h));var k=s.getDerivedStateFromProps;(x=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==_||w!==h)&&od(e,o,n,h),Jt=!1,w=e.memoizedState,o.state=w,Aa(e,n,o,a);var m=e.memoizedState;d!==_||w!==m||Qe.current||Jt?(typeof k=="function"&&(Lo(e,s,k,n),m=e.memoizedState),(p=Jt||id(e,s,p,n,w,m,h)||!1)?(x||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=h,n=p):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),n=!1)}return Fo(t,e,s,n,i,a)}function Fo(t,e,s,n,a,i){um(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&td(e,s,!1),Vt(t,e,i);n=e.stateNode,Ig.current=e;var d=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=xs(e,t.child,null,i),e.child=xs(e,null,d,i)):Fe(t,e,d,i),e.memoizedState=n.state,a&&td(e,s,!0),e.child}function hm(t){var e=t.stateNode;e.pendingContext?ed(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ed(t,e.context,!1),Vl(t,e.containerInfo)}function xd(t,e,s,n,a){return gs(),Ml(a),e.flags|=256,Fe(t,e,s,n),e.child}var Uo={dehydrated:null,treeContext:null,retryLane:0};function zo(t){return{baseLanes:t,cachePool:null,transitions:null}}function mm(t,e,s){var n=e.pendingProps,a=ge.current,i=!1,o=(e.flags&128)!==0,d;if((d=o)||(d=t!==null&&t.memoizedState===null?!1:(a&2)!==0),d?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ue(ge,a&1),t===null)return Ro(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=oi(o,n,0,null),t=Er(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zo(s),e.memoizedState=Uo,t):Zl(e,o));if(a=t.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return Mg(t,e,o,n,d,a,s);if(i){i=n.fallback,o=e.mode,a=t.child,d=a.sibling;var h={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=dr(a,h),n.subtreeFlags=a.subtreeFlags&14680064),d!==null?i=dr(d,i):(i=Er(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?zo(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=Uo,n}return i=t.child,t=i.sibling,n=dr(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Zl(t,e){return e=oi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gn(t,e,s,n){return n!==null&&Ml(n),xs(e,t.child,null,s),t=Zl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mg(t,e,s,n,a,i,o){if(s)return e.flags&256?(e.flags&=-257,n=Bi(Error(z(422))),Gn(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=oi({mode:"visible",children:n.children},a,0,null),i=Er(i,a,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&xs(e,t.child,null,o),e.child.memoizedState=zo(o),e.memoizedState=Uo,i);if(!(e.mode&1))return Gn(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var d=n.dgst;return n=d,i=Error(z(419)),n=Bi(i,n,void 0),Gn(t,e,o,n)}if(d=(o&t.childLanes)!==0,Ge||d){if(n=Ee,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bt(t,a),yt(n,t,a,-1))}return nc(),n=Bi(Error(z(421))),Gn(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Yg.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,et=ir(a.nextSibling),tt=e,fe=!0,xt=null,t!==null&&(at[it++]=Mt,at[it++]=Ft,at[it++]=$r,Mt=t.id,Ft=t.overflow,$r=e),e=Zl(e,n.children),e.flags|=4096,e)}function _d(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Oo(t.return,e,s)}function Vi(t,e,s,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function pm(t,e,s){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Fe(t,e,n.children,s),n=ge.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_d(t,s,e);else if(t.tag===19)_d(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ue(ge,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)t=s.alternate,t!==null&&$a(t)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),Vi(e,!1,a,s,i);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&$a(t)===null){e.child=a;break}t=a.sibling,a.sibling=s,s=a,a=t}Vi(e,!0,s,null,i);break;case"together":Vi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ha(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Or|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,s=dr(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=dr(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Fg(t,e,s){switch(e.tag){case 3:hm(e),gs();break;case 5:zh(e);break;case 1:Je(e.type)&&Sa(e);break;case 4:Vl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;ue(Pa,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ue(ge,ge.current&1),e.flags|=128,null):s&e.child.childLanes?mm(t,e,s):(ue(ge,ge.current&1),t=Vt(t,e,s),t!==null?t.sibling:null);ue(ge,ge.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return pm(t,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ue(ge,ge.current),n)break;return null;case 22:case 23:return e.lanes=0,dm(t,e,s)}return Vt(t,e,s)}var fm,qo,gm,xm;fm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};qo=function(){};gm=function(t,e,s,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Sr(Tt.current);var i=null;switch(s){case"input":a=co(t,a),n=co(t,n),i=[];break;case"select":a=_e({},a,{value:void 0}),n=_e({},n,{value:void 0}),i=[];break;case"textarea":a=mo(t,a),n=mo(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Na)}fo(s,n);var o;s=null;for(p in a)if(!n.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var d=a[p];for(o in d)d.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(tn.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in n){var h=n[p];if(d=a?.[p],n.hasOwnProperty(p)&&h!==d&&(h!=null||d!=null))if(p==="style")if(d){for(o in d)!d.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in h)h.hasOwnProperty(o)&&d[o]!==h[o]&&(s||(s={}),s[o]=h[o])}else s||(i||(i=[]),i.push(p,s)),s=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(i=i||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(i=i||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(tn.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&he("scroll",t),i||d===h||(i=[])):(i=i||[]).push(p,h))}s&&(i=i||[]).push("style",s);var p=i;(e.updateQueue=p)&&(e.flags|=4)}};xm=function(t,e,s,n){s!==n&&(e.flags|=4)};function Rs(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Ug(t,e,s){var n=e.pendingProps;switch(Il(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return Je(e.type)&&ka(),Oe(e),null;case 3:return n=e.stateNode,_s(),me(Qe),me(De),Wl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Wn(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xt!==null&&(Jo(xt),xt=null))),qo(t,e),Oe(e),null;case 5:Hl(e);var a=Sr(pn.current);if(s=e.type,t!==null&&e.stateNode!=null)gm(t,e,s,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return Oe(e),null}if(t=Sr(Tt.current),Wn(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[St]=e,n[hn]=i,t=(e.mode&1)!==0,s){case"dialog":he("cancel",n),he("close",n);break;case"iframe":case"object":case"embed":he("load",n);break;case"video":case"audio":for(a=0;a<Us.length;a++)he(Us[a],n);break;case"source":he("error",n);break;case"img":case"image":case"link":he("error",n),he("load",n);break;case"details":he("toggle",n);break;case"input":Cc(n,i),he("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},he("invalid",n);break;case"textarea":Pc(n,i),he("invalid",n)}fo(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var d=i[o];o==="children"?typeof d=="string"?n.textContent!==d&&(i.suppressHydrationWarning!==!0&&Hn(n.textContent,d,t),a=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&Hn(n.textContent,d,t),a=["children",""+d]):tn.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&he("scroll",n)}switch(s){case"input":In(n),Ec(n,i,!0);break;case"textarea":In(n),Tc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Na)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vu(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[St]=e,t[hn]=n,fm(t,e,!1,!1),e.stateNode=t;e:{switch(o=go(s,n),s){case"dialog":he("cancel",t),he("close",t),a=n;break;case"iframe":case"object":case"embed":he("load",t),a=n;break;case"video":case"audio":for(a=0;a<Us.length;a++)he(Us[a],t);a=n;break;case"source":he("error",t),a=n;break;case"img":case"image":case"link":he("error",t),he("load",t),a=n;break;case"details":he("toggle",t),a=n;break;case"input":Cc(t,n),a=co(t,n),he("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=_e({},n,{value:void 0}),he("invalid",t);break;case"textarea":Pc(t,n),a=mo(t,n),he("invalid",t);break;default:a=n}fo(s,a),d=a;for(i in d)if(d.hasOwnProperty(i)){var h=d[i];i==="style"?Ku(t,h):i==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Hu(t,h)):i==="children"?typeof h=="string"?(s!=="textarea"||h!=="")&&rn(t,h):typeof h=="number"&&rn(t,""+h):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tn.hasOwnProperty(i)?h!=null&&i==="onScroll"&&he("scroll",t):h!=null&&wl(t,i,h,o))}switch(s){case"input":In(t),Ec(t,n,!1);break;case"textarea":In(t),Tc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ur(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ls(t,!!n.multiple,i,!1):n.defaultValue!=null&&ls(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Na)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(t&&e.stateNode!=null)xm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(s=Sr(pn.current),Sr(Tt.current),Wn(e)){if(n=e.stateNode,s=e.memoizedProps,n[St]=e,(i=n.nodeValue!==s)&&(t=tt,t!==null))switch(t.tag){case 3:Hn(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hn(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[St]=e,e.stateNode=n}return Oe(e),null;case 13:if(me(ge),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&et!==null&&e.mode&1&&!(e.flags&128))Oh(),gs(),e.flags|=98560,i=!1;else if(i=Wn(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[St]=e}else gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),i=!1}else xt!==null&&(Jo(xt),xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Se===0&&(Se=3):nc())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return _s(),qo(t,e),t===null&&dn(e.stateNode.containerInfo),Oe(e),null;case 10:return zl(e.type._context),Oe(e),null;case 17:return Je(e.type)&&ka(),Oe(e),null;case 19:if(me(ge),i=e.memoizedState,i===null)return Oe(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Rs(i,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$a(t),o!==null){for(e.flags|=128,Rs(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ue(ge,ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&ve()>bs&&(e.flags|=128,n=!0,Rs(i,!1),e.lanes=4194304)}else{if(!n)if(t=$a(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Rs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Oe(e),null}else 2*ve()-i.renderingStartTime>bs&&s!==1073741824&&(e.flags|=128,n=!0,Rs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ve(),e.sibling=null,s=ge.current,ue(ge,n?s&1|2:s&1),e):(Oe(e),null);case 22:case 23:return sc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ze&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function zg(t,e){switch(Il(e),e.tag){case 1:return Je(e.type)&&ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),me(Qe),me(De),Wl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hl(e),null;case 13:if(me(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ge),null;case 4:return _s(),null;case 10:return zl(e.type._context),null;case 22:case 23:return sc(),null;case 24:return null;default:return null}}var Qn=!1,Le=!1,qg=typeof WeakSet=="function"?WeakSet:Set,W=null;function is(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ye(t,e,n)}else s.current=null}function Bo(t,e,s){try{s()}catch(n){ye(t,e,n)}}var yd=!1;function Bg(t,e){if(So=va,t=vh(),Ll(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,d=-1,h=-1,p=0,x=0,_=t,w=null;t:for(;;){for(var k;_!==s||a!==0&&_.nodeType!==3||(d=o+a),_!==i||n!==0&&_.nodeType!==3||(h=o+n),_.nodeType===3&&(o+=_.nodeValue.length),(k=_.firstChild)!==null;)w=_,_=k;for(;;){if(_===t)break t;if(w===s&&++p===a&&(d=o),w===i&&++x===n&&(h=o),(k=_.nextSibling)!==null)break;_=w,w=_.parentNode}_=k}s=d===-1||h===-1?null:{start:d,end:h}}else s=null}s=s||{start:0,end:0}}else s=null;for(Co={focusedElem:t,selectionRange:s},va=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var $=m.memoizedProps,N=m.memoizedState,j=e.stateNode,c=j.getSnapshotBeforeUpdate(e.elementType===e.type?$:pt(e.type,$),N);j.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){ye(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return m=yd,yd=!1,m}function Gs(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Bo(e,s,i)}a=a.next}while(a!==n)}}function ai(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Vo(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function _m(t){var e=t.alternate;e!==null&&(t.alternate=null,_m(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[St],delete e[hn],delete e[To],delete e[kg],delete e[Sg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ym(t){return t.tag===5||t.tag===3||t.tag===4}function bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ym(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ho(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Na));else if(n!==4&&(t=t.child,t!==null))for(Ho(t,e,s),t=t.sibling;t!==null;)Ho(t,e,s),t=t.sibling}function Wo(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wo(t,e,s),t=t.sibling;t!==null;)Wo(t,e,s),t=t.sibling}var Pe=null,ft=!1;function Wt(t,e,s){for(s=s.child;s!==null;)bm(t,e,s),s=s.sibling}function bm(t,e,s){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Ya,s)}catch{}switch(s.tag){case 5:Le||is(s,e);case 6:var n=Pe,a=ft;Pe=null,Wt(t,e,s),Pe=n,ft=a,Pe!==null&&(ft?(t=Pe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Pe.removeChild(s.stateNode));break;case 18:Pe!==null&&(ft?(t=Pe,s=s.stateNode,t.nodeType===8?Ii(t.parentNode,s):t.nodeType===1&&Ii(t,s),on(t)):Ii(Pe,s.stateNode));break;case 4:n=Pe,a=ft,Pe=s.stateNode.containerInfo,ft=!0,Wt(t,e,s),Pe=n,ft=a;break;case 0:case 11:case 14:case 15:if(!Le&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bo(s,e,o),a=a.next}while(a!==n)}Wt(t,e,s);break;case 1:if(!Le&&(is(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(d){ye(s,e,d)}Wt(t,e,s);break;case 21:Wt(t,e,s);break;case 22:s.mode&1?(Le=(n=Le)||s.memoizedState!==null,Wt(t,e,s),Le=n):Wt(t,e,s);break;default:Wt(t,e,s)}}function vd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new qg),e.forEach(function(n){var a=Zg.bind(null,t,n);s.has(n)||(s.add(n),n.then(a,a))})}}function ht(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=t,o=e,d=o;e:for(;d!==null;){switch(d.tag){case 5:Pe=d.stateNode,ft=!1;break e;case 3:Pe=d.stateNode.containerInfo,ft=!0;break e;case 4:Pe=d.stateNode.containerInfo,ft=!0;break e}d=d.return}if(Pe===null)throw Error(z(160));bm(i,o,a),Pe=null,ft=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(p){ye(a,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vm(e,t),e=e.sibling}function vm(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ht(e,t),jt(t),n&4){try{Gs(3,t,t.return),ai(3,t)}catch($){ye(t,t.return,$)}try{Gs(5,t,t.return)}catch($){ye(t,t.return,$)}}break;case 1:ht(e,t),jt(t),n&512&&s!==null&&is(s,s.return);break;case 5:if(ht(e,t),jt(t),n&512&&s!==null&&is(s,s.return),t.flags&32){var a=t.stateNode;try{rn(a,"")}catch($){ye(t,t.return,$)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&qu(a,i),go(d,o);var p=go(d,i);for(o=0;o<h.length;o+=2){var x=h[o],_=h[o+1];x==="style"?Ku(a,_):x==="dangerouslySetInnerHTML"?Hu(a,_):x==="children"?rn(a,_):wl(a,x,_,p)}switch(d){case"input":uo(a,i);break;case"textarea":Bu(a,i);break;case"select":var w=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?ls(a,!!i.multiple,k,!1):w!==!!i.multiple&&(i.defaultValue!=null?ls(a,!!i.multiple,i.defaultValue,!0):ls(a,!!i.multiple,i.multiple?[]:"",!1))}a[hn]=i}catch($){ye(t,t.return,$)}}break;case 6:if(ht(e,t),jt(t),n&4){if(t.stateNode===null)throw Error(z(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch($){ye(t,t.return,$)}}break;case 3:if(ht(e,t),jt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{on(e.containerInfo)}catch($){ye(t,t.return,$)}break;case 4:ht(e,t),jt(t);break;case 13:ht(e,t),jt(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(tc=ve())),n&4&&vd(t);break;case 22:if(x=s!==null&&s.memoizedState!==null,t.mode&1?(Le=(p=Le)||x,ht(e,t),Le=p):ht(e,t),jt(t),n&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!x&&t.mode&1)for(W=t,x=t.child;x!==null;){for(_=W=x;W!==null;){switch(w=W,k=w.child,w.tag){case 0:case 11:case 14:case 15:Gs(4,w,w.return);break;case 1:is(w,w.return);var m=w.stateNode;if(typeof m.componentWillUnmount=="function"){n=w,s=w.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch($){ye(n,s,$)}}break;case 5:is(w,w.return);break;case 22:if(w.memoizedState!==null){jd(_);continue}}k!==null?(k.return=w,W=k):jd(_)}x=x.sibling}e:for(x=null,_=t;;){if(_.tag===5){if(x===null){x=_;try{a=_.stateNode,p?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=_.stateNode,h=_.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=Wu("display",o))}catch($){ye(t,t.return,$)}}}else if(_.tag===6){if(x===null)try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch($){ye(t,t.return,$)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;x===_&&(x=null),_=_.return}x===_&&(x=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ht(e,t),jt(t),n&4&&vd(t);break;case 21:break;default:ht(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(ym(s)){var n=s;break e}s=s.return}throw Error(z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(rn(a,""),n.flags&=-33);var i=bd(t);Wo(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,d=bd(t);Ho(t,d,o);break;default:throw Error(z(161))}}catch(h){ye(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vg(t,e,s){W=t,wm(t)}function wm(t,e,s){for(var n=(t.mode&1)!==0;W!==null;){var a=W,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Qn;if(!o){var d=a.alternate,h=d!==null&&d.memoizedState!==null||Le;d=Qn;var p=Le;if(Qn=o,(Le=h)&&!p)for(W=a;W!==null;)o=W,h=o.child,o.tag===22&&o.memoizedState!==null?Nd(a):h!==null?(h.return=o,W=h):Nd(a);for(;i!==null;)W=i,wm(i),i=i.sibling;W=a,Qn=d,Le=p}wd(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,W=i):wd(t)}}function wd(t){for(;W!==null;){var e=W;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||ai(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Le)if(s===null)n.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:pt(e.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ad(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}ad(e,o,s)}break;case 5:var d=e.stateNode;if(s===null&&e.flags&4){s=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&s.focus();break;case"img":h.src&&(s.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var _=x.dehydrated;_!==null&&on(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Le||e.flags&512&&Vo(e)}catch(w){ye(e,e.return,w)}}if(e===t){W=null;break}if(s=e.sibling,s!==null){s.return=e.return,W=s;break}W=e.return}}function jd(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var s=e.sibling;if(s!==null){s.return=e.return,W=s;break}W=e.return}}function Nd(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ai(4,e)}catch(h){ye(e,s,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(h){ye(e,a,h)}}var i=e.return;try{Vo(e)}catch(h){ye(e,i,h)}break;case 5:var o=e.return;try{Vo(e)}catch(h){ye(e,o,h)}}}catch(h){ye(e,e.return,h)}if(e===t){W=null;break}var d=e.sibling;if(d!==null){d.return=e.return,W=d;break}W=e.return}}var Hg=Math.ceil,La=Ht.ReactCurrentDispatcher,Xl=Ht.ReactCurrentOwner,lt=Ht.ReactCurrentBatchConfig,ae=0,Ee=null,we=null,Ae=0,Ze=0,os=pr(0),Se=0,_n=null,Or=0,ii=0,ec=0,Qs=null,We=null,tc=0,bs=1/0,Lt=null,Da=!1,Ko=null,lr=null,Jn=!1,tr=null,Ia=0,Js=0,Go=null,ma=-1,pa=0;function Ue(){return ae&6?ve():ma!==-1?ma:ma=ve()}function cr(t){return t.mode&1?ae&2&&Ae!==0?Ae&-Ae:Eg.transition!==null?(pa===0&&(pa=ah()),pa):(t=le,t!==0||(t=window.event,t=t===void 0?16:hh(t.type)),t):1}function yt(t,e,s,n){if(50<Js)throw Js=0,Go=null,Error(z(185));Nn(t,s,n),(!(ae&2)||t!==Ee)&&(t===Ee&&(!(ae&2)&&(ii|=s),Se===4&&Zt(t,Ae)),Ye(t,n),s===1&&ae===0&&!(e.mode&1)&&(bs=ve()+500,ri&&fr()))}function Ye(t,e){var s=t.callbackNode;Ef(t,e);var n=ba(t,t===Ee?Ae:0);if(n===0)s!==null&&Rc(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Rc(s),e===1)t.tag===0?Cg(kd.bind(null,t)):Ah(kd.bind(null,t)),jg(function(){!(ae&6)&&fr()}),s=null;else{switch(ih(n)){case 1:s=Cl;break;case 4:s=sh;break;case 16:s=ya;break;case 536870912:s=nh;break;default:s=ya}s=Tm(s,jm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function jm(t,e){if(ma=-1,pa=0,ae&6)throw Error(z(327));var s=t.callbackNode;if(ms()&&t.callbackNode!==s)return null;var n=ba(t,t===Ee?Ae:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ma(t,n);else{e=n;var a=ae;ae|=2;var i=km();(Ee!==t||Ae!==e)&&(Lt=null,bs=ve()+500,Cr(t,e));do try{Gg();break}catch(d){Nm(t,d)}while(!0);Ul(),La.current=i,ae=a,we!==null?e=0:(Ee=null,Ae=0,e=Se)}if(e!==0){if(e===2&&(a=vo(t),a!==0&&(n=a,e=Qo(t,a))),e===1)throw s=_n,Cr(t,0),Zt(t,n),Ye(t,ve()),s;if(e===6)Zt(t,n);else{if(a=t.current.alternate,!(n&30)&&!Wg(a)&&(e=Ma(t,n),e===2&&(i=vo(t),i!==0&&(n=i,e=Qo(t,i))),e===1))throw s=_n,Cr(t,0),Zt(t,n),Ye(t,ve()),s;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:vr(t,We,Lt);break;case 3:if(Zt(t,n),(n&130023424)===n&&(e=tc+500-ve(),10<e)){if(ba(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Ue(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Po(vr.bind(null,t,We,Lt),e);break}vr(t,We,Lt);break;case 4:if(Zt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-_t(n);i=1<<o,o=e[o],o>a&&(a=o),n&=~i}if(n=a,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hg(n/1960))-n,10<n){t.timeoutHandle=Po(vr.bind(null,t,We,Lt),n);break}vr(t,We,Lt);break;case 5:vr(t,We,Lt);break;default:throw Error(z(329))}}}return Ye(t,ve()),t.callbackNode===s?jm.bind(null,t):null}function Qo(t,e){var s=Qs;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Ma(t,e),t!==2&&(e=We,We=s,e!==null&&Jo(e)),t}function Jo(t){We===null?We=t:We.push.apply(We,t)}function Wg(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!vt(i(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zt(t,e){for(e&=~ec,e&=~ii,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-_t(e),n=1<<s;t[s]=-1,e&=~n}}function kd(t){if(ae&6)throw Error(z(327));ms();var e=ba(t,0);if(!(e&1))return Ye(t,ve()),null;var s=Ma(t,e);if(t.tag!==0&&s===2){var n=vo(t);n!==0&&(e=n,s=Qo(t,n))}if(s===1)throw s=_n,Cr(t,0),Zt(t,e),Ye(t,ve()),s;if(s===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,We,Lt),Ye(t,ve()),null}function rc(t,e){var s=ae;ae|=1;try{return t(e)}finally{ae=s,ae===0&&(bs=ve()+500,ri&&fr())}}function Lr(t){tr!==null&&tr.tag===0&&!(ae&6)&&ms();var e=ae;ae|=1;var s=lt.transition,n=le;try{if(lt.transition=null,le=1,t)return t()}finally{le=n,lt.transition=s,ae=e,!(ae&6)&&fr()}}function sc(){Ze=os.current,me(os)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,wg(s)),we!==null)for(s=we.return;s!==null;){var n=s;switch(Il(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ka();break;case 3:_s(),me(Qe),me(De),Wl();break;case 5:Hl(n);break;case 4:_s();break;case 13:me(ge);break;case 19:me(ge);break;case 10:zl(n.type._context);break;case 22:case 23:sc()}s=s.return}if(Ee=t,we=t=dr(t.current,null),Ae=Ze=e,Se=0,_n=null,ec=ii=Or=0,We=Qs=null,kr!==null){for(e=0;e<kr.length;e++)if(s=kr[e],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}kr=null}return t}function Nm(t,e){do{var s=we;try{if(Ul(),da.current=Oa,Ra){for(var n=xe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ra=!1}if(Rr=0,Ce=ke=xe=null,Ks=!1,fn=0,Xl.current=null,s===null||s.return===null){Se=1,_n=e,we=null;break}e:{var i=t,o=s.return,d=s,h=e;if(e=Ae,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,x=d,_=x.tag;if(!(x.mode&1)&&(_===0||_===11||_===15)){var w=x.alternate;w?(x.updateQueue=w.updateQueue,x.memoizedState=w.memoizedState,x.lanes=w.lanes):(x.updateQueue=null,x.memoizedState=null)}var k=hd(o);if(k!==null){k.flags&=-257,md(k,o,d,i,e),k.mode&1&&ud(i,p,e),e=k,h=p;var m=e.updateQueue;if(m===null){var $=new Set;$.add(h),e.updateQueue=$}else m.add(h);break e}else{if(!(e&1)){ud(i,p,e),nc();break e}h=Error(z(426))}}else if(fe&&d.mode&1){var N=hd(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),md(N,o,d,i,e),Ml(ys(h,d));break e}}i=h=ys(h,d),Se!==4&&(Se=2),Qs===null?Qs=[i]:Qs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var j=om(i,h,e);nd(i,j);break e;case 1:d=h;var c=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof c.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(lr===null||!lr.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=lm(i,d,e);nd(i,P);break e}}i=i.return}while(i!==null)}Cm(s)}catch(y){e=y,we===s&&s!==null&&(we=s=s.return);continue}break}while(!0)}function km(){var t=La.current;return La.current=Oa,t===null?Oa:t}function nc(){(Se===0||Se===3||Se===2)&&(Se=4),Ee===null||!(Or&268435455)&&!(ii&268435455)||Zt(Ee,Ae)}function Ma(t,e){var s=ae;ae|=2;var n=km();(Ee!==t||Ae!==e)&&(Lt=null,Cr(t,e));do try{Kg();break}catch(a){Nm(t,a)}while(!0);if(Ul(),ae=s,La.current=n,we!==null)throw Error(z(261));return Ee=null,Ae=0,Se}function Kg(){for(;we!==null;)Sm(we)}function Gg(){for(;we!==null&&!yf();)Sm(we)}function Sm(t){var e=Pm(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,e===null?Cm(t):we=e,Xl.current=null}function Cm(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=zg(s,e),s!==null){s.flags&=32767,we=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,we=null;return}}else if(s=Ug(s,e,Ze),s!==null){we=s;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);Se===0&&(Se=5)}function vr(t,e,s){var n=le,a=lt.transition;try{lt.transition=null,le=1,Qg(t,e,s,n)}finally{lt.transition=a,le=n}return null}function Qg(t,e,s,n){do ms();while(tr!==null);if(ae&6)throw Error(z(327));s=t.finishedWork;var a=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(Pf(t,i),t===Ee&&(we=Ee=null,Ae=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Jn||(Jn=!0,Tm(ya,function(){return ms(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var o=le;le=1;var d=ae;ae|=4,Xl.current=null,Bg(t,s),vm(s,t),fg(Co),va=!!So,Co=So=null,t.current=s,Vg(s),bf(),ae=d,le=o,lt.transition=i}else t.current=s;if(Jn&&(Jn=!1,tr=t,Ia=a),i=t.pendingLanes,i===0&&(lr=null),jf(s.stateNode),Ye(t,ve()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)a=e[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Da)throw Da=!1,t=Ko,Ko=null,t;return Ia&1&&t.tag!==0&&ms(),i=t.pendingLanes,i&1?t===Go?Js++:(Js=0,Go=t):Js=0,fr(),null}function ms(){if(tr!==null){var t=ih(Ia),e=lt.transition,s=le;try{if(lt.transition=null,le=16>t?16:t,tr===null)var n=!1;else{if(t=tr,tr=null,Ia=0,ae&6)throw Error(z(331));var a=ae;for(ae|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var d=i.deletions;if(d!==null){for(var h=0;h<d.length;h++){var p=d[h];for(W=p;W!==null;){var x=W;switch(x.tag){case 0:case 11:case 15:Gs(8,x,i)}var _=x.child;if(_!==null)_.return=x,W=_;else for(;W!==null;){x=W;var w=x.sibling,k=x.return;if(_m(x),x===p){W=null;break}if(w!==null){w.return=k,W=w;break}W=k}}}var m=i.alternate;if(m!==null){var $=m.child;if($!==null){m.child=null;do{var N=$.sibling;$.sibling=null,$=N}while($!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gs(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,W=j;break e}W=i.return}}var c=t.current;for(W=c;W!==null;){o=W;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,W=g;else e:for(o=c;W!==null;){if(d=W,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ai(9,d)}}catch(y){ye(d,d.return,y)}if(d===o){W=null;break e}var P=d.sibling;if(P!==null){P.return=d.return,W=P;break e}W=d.return}}if(ae=a,fr(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Ya,t)}catch{}n=!0}return n}finally{le=s,lt.transition=e}}return!1}function Sd(t,e,s){e=ys(s,e),e=om(t,e,1),t=or(t,e,1),e=Ue(),t!==null&&(Nn(t,1,e),Ye(t,e))}function ye(t,e,s){if(t.tag===3)Sd(t,t,s);else for(;e!==null;){if(e.tag===3){Sd(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){t=ys(s,t),t=lm(e,t,1),e=or(e,t,1),t=Ue(),e!==null&&(Nn(e,1,t),Ye(e,t));break}}e=e.return}}function Jg(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&s,Ee===t&&(Ae&s)===s&&(Se===4||Se===3&&(Ae&130023424)===Ae&&500>ve()-tc?Cr(t,0):ec|=s),Ye(t,e)}function Em(t,e){e===0&&(t.mode&1?(e=Un,Un<<=1,!(Un&130023424)&&(Un=4194304)):e=1);var s=Ue();t=Bt(t,e),t!==null&&(Nn(t,e,s),Ye(t,s))}function Yg(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Em(t,s)}function Zg(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),Em(t,s)}var Pm;Pm=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)Ge=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ge=!1,Fg(t,e,s);Ge=!!(t.flags&131072)}else Ge=!1,fe&&e.flags&1048576&&$h(e,Ea,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ha(t,e),t=e.pendingProps;var a=fs(e,De.current);hs(e,s),a=Gl(null,e,n,t,a,s);var i=Ql();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(n)?(i=!0,Sa(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Bl(e),a.updater=si,e.stateNode=a,a._reactInternals=e,Do(e,n,t,s),e=Fo(null,e,n,!0,i,s)):(e.tag=0,fe&&i&&Dl(e),Fe(null,e,a,s),e=e.child),e;case 16:n=e.elementType;e:{switch(ha(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=e0(n),t=pt(n,t),a){case 0:e=Mo(null,e,n,t,s);break e;case 1:e=gd(null,e,n,t,s);break e;case 11:e=pd(null,e,n,t,s);break e;case 14:e=fd(null,e,n,pt(n.type,t),s);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pt(n,a),Mo(t,e,n,a,s);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pt(n,a),gd(t,e,n,a,s);case 3:e:{if(hm(e),t===null)throw Error(z(387));n=e.pendingProps,i=e.memoizedState,a=i.element,Dh(t,e),Aa(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=ys(Error(z(423)),e),e=xd(t,e,n,s,a);break e}else if(n!==a){a=ys(Error(z(424)),e),e=xd(t,e,n,s,a);break e}else for(et=ir(e.stateNode.containerInfo.firstChild),tt=e,fe=!0,xt=null,s=Uh(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gs(),n===a){e=Vt(t,e,s);break e}Fe(t,e,n,s)}e=e.child}return e;case 5:return zh(e),t===null&&Ro(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,Eo(n,a)?o=null:i!==null&&Eo(n,i)&&(e.flags|=32),um(t,e),Fe(t,e,o,s),e.child;case 6:return t===null&&Ro(e),null;case 13:return mm(t,e,s);case 4:return Vl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=xs(e,null,n,s):Fe(t,e,n,s),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pt(n,a),pd(t,e,n,a,s);case 7:return Fe(t,e,e.pendingProps,s),e.child;case 8:return Fe(t,e,e.pendingProps.children,s),e.child;case 12:return Fe(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,ue(Pa,n._currentValue),n._currentValue=o,i!==null)if(vt(i.value,o)){if(i.children===a.children&&!Qe.current){e=Vt(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var d=i.dependencies;if(d!==null){o=i.child;for(var h=d.firstContext;h!==null;){if(h.context===n){if(i.tag===1){h=Ut(-1,s&-s),h.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?h.next=h:(h.next=x.next,x.next=h),p.pending=h}}i.lanes|=s,h=i.alternate,h!==null&&(h.lanes|=s),Oo(i.return,s,e),d.lanes|=s;break}h=h.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=s,d=o.alternate,d!==null&&(d.lanes|=s),Oo(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(t,e,a.children,s),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,hs(e,s),a=dt(a),n=n(a),e.flags|=1,Fe(t,e,n,s),e.child;case 14:return n=e.type,a=pt(n,e.pendingProps),a=pt(n.type,a),fd(t,e,n,a,s);case 15:return cm(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pt(n,a),ha(t,e),e.tag=1,Je(n)?(t=!0,Sa(e)):t=!1,hs(e,s),Mh(e,n,a),Do(e,n,a,s),Fo(null,e,n,!0,t,s);case 19:return pm(t,e,s);case 22:return dm(t,e,s)}throw Error(z(156,e.tag))};function Tm(t,e){return rh(t,e)}function Xg(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,s,n){return new Xg(t,e,s,n)}function ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e0(t){if(typeof t=="function")return ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nl)return 11;if(t===kl)return 14}return 2}function dr(t,e){var s=t.alternate;return s===null?(s=ot(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function fa(t,e,s,n,a,i){var o=2;if(n=t,typeof t=="function")ac(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yr:return Er(s.children,a,i,e);case jl:o=8,a|=8;break;case ao:return t=ot(12,s,e,a|2),t.elementType=ao,t.lanes=i,t;case io:return t=ot(13,s,e,a),t.elementType=io,t.lanes=i,t;case oo:return t=ot(19,s,e,a),t.elementType=oo,t.lanes=i,t;case Fu:return oi(s,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Iu:o=10;break e;case Mu:o=9;break e;case Nl:o=11;break e;case kl:o=14;break e;case Qt:o=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=ot(o,s,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function Er(t,e,s,n){return t=ot(7,t,n,e),t.lanes=s,t}function oi(t,e,s,n){return t=ot(22,t,n,e),t.elementType=Fu,t.lanes=s,t.stateNode={isHidden:!1},t}function Hi(t,e,s){return t=ot(6,t,null,e),t.lanes=s,t}function Wi(t,e,s){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t0(t,e,s,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ic(t,e,s,n,a,i,o,d,h){return t=new t0(t,e,s,d,h),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bl(i),t}function r0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Am(t){if(!t)return hr;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var s=t.type;if(Je(s))return Th(t,s,e)}return e}function $m(t,e,s,n,a,i,o,d,h){return t=ic(s,n,!0,t,a,i,o,d,h),t.context=Am(null),s=t.current,n=Ue(),a=cr(s),i=Ut(n,a),i.callback=e??null,or(s,i,a),t.current.lanes=a,Nn(t,a,n),Ye(t,n),t}function li(t,e,s,n){var a=e.current,i=Ue(),o=cr(a);return s=Am(s),e.context===null?e.context=s:e.pendingContext=s,e=Ut(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=or(a,e,o),t!==null&&(yt(t,a,o,i),ca(t,a,o)),o}function Fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function oc(t,e){Cd(t,e),(t=t.alternate)&&Cd(t,e)}function s0(){return null}var Rm=typeof reportError=="function"?reportError:function(t){console.error(t)};function lc(t){this._internalRoot=t}ci.prototype.render=lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));li(t,e,null,null)};ci.prototype.unmount=lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){li(null,t,null,null)}),e[qt]=null}};function ci(t){this._internalRoot=t}ci.prototype.unstable_scheduleHydration=function(t){if(t){var e=ch();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Yt.length&&e!==0&&e<Yt[s].priority;s++);Yt.splice(s,0,t),s===0&&uh(t)}};function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function di(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function n0(t,e,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var p=Fa(o);i.call(p)}}var o=$m(e,n,t,0,null,!1,!1,"",Ed);return t._reactRootContainer=o,t[qt]=o.current,dn(t.nodeType===8?t.parentNode:t),Lr(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var d=n;n=function(){var p=Fa(h);d.call(p)}}var h=ic(t,0,!1,null,null,!1,!1,"",Ed);return t._reactRootContainer=h,t[qt]=h.current,dn(t.nodeType===8?t.parentNode:t),Lr(function(){li(e,h,s,n)}),h}function ui(t,e,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var d=a;a=function(){var h=Fa(o);d.call(h)}}li(e,o,t,a)}else o=n0(s,e,t,a,n);return Fa(o)}oh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Fs(e.pendingLanes);s!==0&&(El(e,s|1),Ye(e,ve()),!(ae&6)&&(bs=ve()+500,fr()))}break;case 13:Lr(function(){var n=Bt(t,1);if(n!==null){var a=Ue();yt(n,t,1,a)}}),oc(t,1)}};Pl=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var s=Ue();yt(e,t,134217728,s)}oc(t,134217728)}};lh=function(t){if(t.tag===13){var e=cr(t),s=Bt(t,e);if(s!==null){var n=Ue();yt(s,t,e,n)}oc(t,e)}};ch=function(){return le};dh=function(t,e){var s=le;try{return le=t,e()}finally{le=s}};_o=function(t,e,s){switch(e){case"input":if(uo(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var a=ti(n);if(!a)throw Error(z(90));zu(n),uo(n,a)}}}break;case"textarea":Bu(t,s);break;case"select":e=s.value,e!=null&&ls(t,!!s.multiple,e,!1)}};Ju=rc;Yu=Lr;var a0={usingClientEntryPoint:!1,Events:[Sn,ts,ti,Gu,Qu,rc]},Os={findFiberByHostInstance:Nr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},i0={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eh(t),t===null?null:t.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||s0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yn.isDisabled&&Yn.supportsFiber)try{Ya=Yn.inject(i0),Pt=Yn}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0;st.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cc(e))throw Error(z(200));return r0(t,e,null,s)};st.createRoot=function(t,e){if(!cc(t))throw Error(z(299));var s=!1,n="",a=Rm;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ic(t,1,!1,null,null,s,!1,n,a),t[qt]=e.current,dn(t.nodeType===8?t.parentNode:t),new lc(e)};st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=eh(e),t=t===null?null:t.stateNode,t};st.flushSync=function(t){return Lr(t)};st.hydrate=function(t,e,s){if(!di(e))throw Error(z(200));return ui(null,t,e,!0,s)};st.hydrateRoot=function(t,e,s){if(!cc(t))throw Error(z(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=Rm;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=$m(e,null,t,1,s??null,a,!1,i,o),t[qt]=e.current,dn(t),n)for(t=0;t<n.length;t++)s=n[t],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new ci(e)};st.render=function(t,e,s){if(!di(e))throw Error(z(200));return ui(null,t,e,!1,s)};st.unmountComponentAtNode=function(t){if(!di(t))throw Error(z(40));return t._reactRootContainer?(Lr(function(){ui(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};st.unstable_batchedUpdates=rc;st.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!di(s))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ui(t,e,s,!1,n)};st.version="18.2.0-next-9e3b772b8-20220608";function Om(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Om)}catch(t){console.error(t)}}Om(),$u.exports=st;var o0=$u.exports,Lm,Pd=o0;Lm=Pd.createRoot,Pd.hydrateRoot;const l0=(t,e,s,n)=>{const a=[s,{code:e,...n||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(a,"warn","react-i18next::",!0);Pr(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...a):console?.warn&&console.warn(...a)},Td={},Yo=(t,e,s,n)=>{Pr(s)&&Td[s]||(Pr(s)&&(Td[s]=new Date),l0(t,e,s,n))},Dm=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},Zo=(t,e,s)=>{t.loadNamespaces(e,Dm(t,s))},Ad=(t,e,s,n)=>{if(Pr(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Zo(t,s,n);s.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,Dm(t,n))},c0=(t,e,s={})=>!e.languages||!e.languages.length?(Yo(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(n,a)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,t))return!1}}),Pr=t=>typeof t=="string",d0=t=>typeof t=="object"&&t!==null,u0=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,h0={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},m0=t=>h0[t],p0=t=>t.replace(u0,m0);let Xo={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:p0};const f0=(t={})=>{Xo={...Xo,...t}},g0=()=>Xo;let Im;const x0=t=>{Im=t},_0=()=>Im,y0={type:"3rdParty",init(t){f0(t.options.react),x0(t)}},b0=A.createContext();class v0{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const w0=(t,e)=>{const s=A.useRef();return A.useEffect(()=>{s.current=t},[t,e]),s.current},Mm=(t,e,s,n)=>t.getFixedT(e,s,n),j0=(t,e,s,n)=>A.useCallback(Mm(t,e,s,n),[t,e,s,n]),Be=(t,e={})=>{const{i18n:s}=e,{i18n:n,defaultNS:a}=A.useContext(b0)||{},i=s||n||_0();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new v0),!i){Yo(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const P=(T,D)=>Pr(D)?D:d0(D)&&Pr(D.defaultValue)?D.defaultValue:Array.isArray(T)?T[T.length-1]:T,y=[P,{},!1];return y.t=P,y.i18n={},y.ready=!1,y}i.options.react?.wait&&Yo(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...g0(),...i.options.react,...e},{useSuspense:d,keyPrefix:h}=o;let p=a||i.options?.defaultNS;p=Pr(p)?[p]:p||["translation"],i.reportNamespaces.addUsedNamespaces?.(p);const x=(i.isInitialized||i.initializedStoreOnce)&&p.every(P=>c0(P,i,o)),_=j0(i,e.lng||null,o.nsMode==="fallback"?p:p[0],h),w=()=>_,k=()=>Mm(i,e.lng||null,o.nsMode==="fallback"?p:p[0],h),[m,$]=A.useState(w);let N=p.join();e.lng&&(N=`${e.lng}${N}`);const j=w0(N),c=A.useRef(!0);A.useEffect(()=>{const{bindI18n:P,bindI18nStore:y}=o;c.current=!0,!x&&!d&&(e.lng?Ad(i,e.lng,p,()=>{c.current&&$(k)}):Zo(i,p,()=>{c.current&&$(k)})),x&&j&&j!==N&&c.current&&$(k);const T=()=>{c.current&&$(k)};return P&&i?.on(P,T),y&&i?.store.on(y,T),()=>{c.current=!1,i&&P&&P?.split(" ").forEach(D=>i.off(D,T)),y&&i&&y.split(" ").forEach(D=>i.store.off(D,T))}},[i,N]),A.useEffect(()=>{c.current&&x&&$(w)},[i,h,x]);const g=[m,i,x];if(g.t=m,g.i18n=i,g.ready=x,x||!x&&!d)return g;throw new Promise(P=>{e.lng?Ad(i,e.lng,p,()=>P()):Zo(i,p,()=>P())})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fm=(...t)=>t.filter((e,s,n)=>!!e&&n.indexOf(e)===s).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...d},h)=>A.createElement("svg",{ref:h,...k0,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:Fm("lucide",a),...d},[...o.map(([p,x])=>A.createElement(p,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(t,e)=>{const s=A.forwardRef(({className:n,...a},i)=>A.createElement(S0,{ref:i,iconNode:e,className:Fm(`lucide-${N0(t)}`,n),...a}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=K("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=K("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=K("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=K("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=K("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=K("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=K("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=K("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=K("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=K("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=K("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=K("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=K("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=K("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=K("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=K("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=K("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=K("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"10lez9"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6a6 6 0 0 0 6-6v-4",key:"ce9bce"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=K("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=K("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=K("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),U0="modulepreload",z0=function(t){return"/"+t},Md={},Ct=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");a=Promise.allSettled(s.map(h=>{if(h=z0(h),h in Md)return;Md[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":U0,p||(_.as="script"),_.crossOrigin="",_.href=h,d&&_.setAttribute("nonce",d),document.head.appendChild(_),p)return new Promise((w,k)=>{_.addEventListener("load",w),_.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return a.then(o=>{for(const d of o||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})},q0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ct(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class gc extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class B0 extends gc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fd extends gc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ud extends gc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tl||(tl={}));var V0=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,e||[])).next())})};class H0{constructor(e,{headers:s={},customFetch:n,region:a=tl.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=q0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return V0(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let d={},{region:h}=s;h||(h=this.region);const p=new URL(`${this.url}/${e}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let x;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",x=o):typeof o=="string"?(d["Content-Type"]="text/plain",x=o):typeof FormData<"u"&&o instanceof FormData?x=o:(d["Content-Type"]="application/json",x=JSON.stringify(o)));const _=yield this.fetch(p.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:x}).catch($=>{throw new B0($)}),w=_.headers.get("x-relay-error");if(w&&w==="true")throw new Fd(_);if(!_.ok)throw new Ud(_);let k=((n=_.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return k==="application/json"?m=yield _.json():k==="application/octet-stream"?m=yield _.blob():k==="text/event-stream"?m=_:k==="multipart/form-data"?m=yield _.formData():m=yield _.text(),{data:m,error:null,response:_}}catch(a){return{data:null,error:a,response:a instanceof Ud||a instanceof Fd?a.context:void 0}}})}}var Ke={},xc={},mi={},Tn={},pi={},fi={},W0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},vs=W0();const K0=vs.fetch,Wm=vs.fetch.bind(vs),Km=vs.Headers,G0=vs.Request,Q0=vs.Response,ks=Object.freeze(Object.defineProperty({__proto__:null,Headers:Km,Request:G0,Response:Q0,default:Wm,fetch:K0},Symbol.toStringTag,{value:"Module"})),J0=Lp(ks);var gi={};Object.defineProperty(gi,"__esModule",{value:!0});let Y0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gi.default=Y0;var Gm=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fi,"__esModule",{value:!0});const Z0=Gm(J0),X0=Gm(gi);let ex=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Z0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,d,h;let p=null,x=null,_=null,w=i.status,k=i.statusText;if(i.ok){if(this.method!=="HEAD"){const j=await i.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=j:x=JSON.parse(j))}const $=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),N=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");$&&N&&N.length>1&&(_=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(p={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,_=null,w=406,k="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const $=await i.text();try{p=JSON.parse($),Array.isArray(p)&&i.status===404&&(x=[],p=null,w=200,k="OK")}catch{i.status===404&&$===""?(w=204,k="No Content"):p={message:$}}if(p&&this.isMaybeSingle&&(!((h=p?.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,w=200,k="OK"),p&&this.shouldThrowOnError)throw new X0.default(p)}return{error:p,data:x,count:_,status:w,statusText:k}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,d,h;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(d=i?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=i?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}};fi.default=ex;var tx=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pi,"__esModule",{value:!0});const rx=tx(fi);let sx=class extends rx.default{select(e){let s=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",d=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${d?`${d},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var d;const h=[e?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${p}"; options=${h};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};pi.default=sx;var nx=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tn,"__esModule",{value:!0});const ax=nx(pi);let ix=class extends ax.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Tn.default=ix;var ox=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mi,"__esModule",{value:!0});const Ls=ox(Tn);let lx=class{constructor(e,{headers:s={},schema:n,fetch:a}){this.url=e,this.headers=s,this.schema=n,this.fetch=a}select(e,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ls.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(o.length>0){const d=[...new Set(o)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ls.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",d=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),i||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(e)){const h=e.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(h.length>0){const p=[...new Set(h)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new Ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new Ls.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ls.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};mi.default=lx;var xi={},_i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.version=void 0;_i.version="0.0.0-automated";Object.defineProperty(xi,"__esModule",{value:!0});xi.DEFAULT_HEADERS=void 0;const cx=_i;xi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${cx.version}`};var Qm=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xc,"__esModule",{value:!0});const dx=Qm(mi),ux=Qm(Tn),hx=xi;let mx=class Jm{constructor(e,{headers:s={},schema:n,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},hx.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=a}from(e){const s=new URL(`${this.url}/${e}`);return new dx.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:a=!1,count:i}={}){let o;const d=new URL(`${this.url}/rpc/${e}`);let h;n||a?(o=n?"HEAD":"GET",Object.entries(s).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{d.searchParams.append(x,_)})):(o="POST",h=s);const p=Object.assign({},this.headers);return i&&(p.Prefer=`count=${i}`),new ux.default({method:o,url:d,headers:p,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}};xc.default=mx;var Ss=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const Ym=Ss(xc);Ke.PostgrestClient=Ym.default;const Zm=Ss(mi);Ke.PostgrestQueryBuilder=Zm.default;const Xm=Ss(Tn);Ke.PostgrestFilterBuilder=Xm.default;const ep=Ss(pi);Ke.PostgrestTransformBuilder=ep.default;const tp=Ss(fi);Ke.PostgrestBuilder=tp.default;const rp=Ss(gi);Ke.PostgrestError=rp.default;var px=Ke.default={PostgrestClient:Ym.default,PostgrestQueryBuilder:Zm.default,PostgrestFilterBuilder:Xm.default,PostgrestTransformBuilder:ep.default,PostgrestBuilder:tp.default,PostgrestError:rp.default};const{PostgrestClient:fx,PostgrestQueryBuilder:Ob,PostgrestFilterBuilder:Lb,PostgrestTransformBuilder:Db,PostgrestBuilder:Ib,PostgrestError:Mb}=px;class gx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const xx="2.15.1",_x=`realtime-js/${xx}`,yx="1.0.0",rl=1e4,bx=1e3,vx=100;var Ys;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ys||(Ys={}));var je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(je||(je={}));var gt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gt||(gt={}));var sl;(function(t){t.websocket="websocket"})(sl||(sl={}));var jr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jr||(jr={}));class wx{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const d=n.decode(e.slice(o,o+a));o=o+a;const h=n.decode(e.slice(o,o+i));o=o+i;const p=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class sp{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(de||(de={}));const zd=(t,e,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=jx(o,t,e,a),i),{})},jx=(t,e,s,n)=>{const a=e.find(d=>d.name===t),i=a?.type,o=s[t];return i&&!n.includes(i)?np(i,o):nl(o)},np=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Cx(e,s)}switch(t){case de.bool:return Nx(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return kx(e);case de.json:case de.jsonb:return Sx(e);case de.timestamp:return Ex(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return nl(e);default:return nl(e)}},nl=t=>t,Nx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Sx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Cx=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(d=>np(e,d))}return t},Ex=t=>typeof t=="string"?t.replace(" ","T"):t,ap=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Qi{constructor(e,s,n={},a=rl){this.channel=e,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qd||(qd={}));class Zs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zs.syncState(this.state,a,i,o),this.pendingDiffs.forEach(h=>{this.state=Zs.syncDiff(this.state,h,i,o)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Zs.syncDiff(this.state,a,i,o),d())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,a){const i=this.cloneDeep(e),o=this.transformState(s),d={},h={};return this.map(i,(p,x)=>{o[p]||(h[p]=x)}),this.map(o,(p,x)=>{const _=i[p];if(_){const w=x.map(N=>N.presence_ref),k=_.map(N=>N.presence_ref),m=x.filter(N=>k.indexOf(N.presence_ref)<0),$=_.filter(N=>w.indexOf(N.presence_ref)<0);m.length>0&&(d[p]=m),$.length>0&&(h[p]=$)}else d[p]=x}),this.syncDiff(i,{joins:d,leaves:h},n,a)}static syncDiff(e,s,n,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(d,h)=>{var p;const x=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),x.length>0){const _=e[d].map(k=>k.presence_ref),w=x.filter(k=>_.indexOf(k.presence_ref)<0);e[d].unshift(...w)}n(d,x,h)}),this.map(o,(d,h)=>{let p=e[d];if(!p)return;const x=h.map(_=>_.presence_ref);p=p.filter(_=>x.indexOf(_.presence_ref)<0),e[d]=p,a(d,p,h),p.length===0&&delete e[d]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const a=e[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Bd||(Bd={}));var Xs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xs||(Xs={}));var Dt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class _c{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Qi(this,gt.join,this.params,this.timeout),this.rejoinTimer=new sp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Zs(this),this.broadcastEndpointURL=ap(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==je.closed){const{config:{broadcast:i,presence:o,private:d}}=this.params,h=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Xs.PRESENCE]&&this.bindings[Xs.PRESENCE].length>0,x={},_={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:p}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(w=>e?.(Dt.CHANNEL_ERROR,w)),this._onClose(()=>e?.(Dt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},x)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:w})=>{var k;if(this.socket.setAuth(),w===void 0){e?.(Dt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,$=(k=m?.length)!==null&&k!==void 0?k:0,N=[];for(let j=0;j<$;j++){const c=m[j],{filter:{event:g,schema:P,table:y,filter:T}}=c,D=w&&w[j];if(D&&D.event===g&&D.schema===P&&D.table===y&&D.filter===T)N.push(Object.assign(Object.assign({},c),{id:D.id}));else{this.unsubscribe(),this.state=je.errored,e?.(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Dt.SUBSCRIBED);return}}).receive("error",w=>{this.state=je.errored,e?.(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e?.(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===je.joined&&e===Xs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,d,h;const p=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(o=this.params)===null||o===void 0?void 0:o.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&i("ok"),p.receive("ok",()=>i("ok")),p.receive("error",()=>i("error")),p.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=je.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Qi(this,gt.leave,{},e),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=je.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Qi(this,e,s,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vx){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var a,i;const o=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:x}=gt;if(n&&[d,h,p,x].indexOf(o)>=0&&n!==this._joinRef())return;let w=this._onMessage(o,s,n);if(s&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(k=>{var m,$,N;return((m=k.filter)===null||m===void 0?void 0:m.event)==="*"||((N=($=k.filter)===null||$===void 0?void 0:$.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(k=>k.callback(w,n)):(i=this.bindings[o])===null||i===void 0||i.filter(k=>{var m,$,N,j,c,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in k){const P=k.id,y=(m=k.filter)===null||m===void 0?void 0:m.event;return P&&(($=s.ids)===null||$===void 0?void 0:$.includes(P))&&(y==="*"||y?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(c=(j=k?.filter)===null||j===void 0?void 0:j.event)===null||c===void 0?void 0:c.toLocaleLowerCase();return P==="*"||P===((g=s?.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===o}).map(k=>{if(typeof w=="object"&&"ids"in w){const m=w.data,{schema:$,table:N,commit_timestamp:j,type:c,errors:g}=m;w=Object.assign(Object.assign({},{schema:$,table:N,commit_timestamp:j,eventType:c,new:{},old:{},errors:g}),this._getPayloadRecords(m))}k.callback(w,n)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&_c.isEqual(a.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gt.close,{},e)}_onError(e){this._on(gt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=zd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=zd(e.columns,e.old_record)),s}}const Vd=()=>{},Zn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Px=[1e3,2e3,5e3,1e4],Tx=1e4,Ax=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $x{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rl,this.transport=null,this.heartbeatIntervalMs=Zn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vd,this.ref=0,this.reconnectTimer=null,this.logger=Vd,this.conn=null,this.sendBuffer=[],this.serializer=new wx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Ct(async()=>{const{default:d}=await Promise.resolve().then(()=>ks);return{default:d}},void 0).then(({default:d})=>d(...o)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${sl.websocket}`,this.httpEndpoint=ap(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yx}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ys.connecting:return jr.Connecting;case Ys.open:return jr.Open;case Ys.closing:return jr.Closing;default:return jr.Closed}}isConnected(){return this.connectionState()===jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new _c(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bx,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Zn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=s,d=o?`(${o})`:"",h=i.status||"";this.log("receive",`${h} ${n} ${a} ${d}`.trim(),i),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(a,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${n}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Ax],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:_x};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(gt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,a,i,o,d,h,p;if(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:rl,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Zn.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:x=>Px[x-1]||Tx,this.encode=(h=e?.encode)!==null&&h!==void 0?h:(x,_)=>_(JSON.stringify(x)),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class yc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Rx extends yc{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class al extends yc{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Ox=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,e||[])).next())})};const ip=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ct(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Lx=()=>Ox(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ct(()=>Promise.resolve().then(()=>ks),void 0)).Response:Response}),il=t=>{if(Array.isArray(t))return t.map(s=>il(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=il(n)}),e},Dx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Mr=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,e||[])).next())})};const Ji=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ix=(t,e,s)=>Mr(void 0,void 0,void 0,function*(){const n=yield Lx();t instanceof n&&!s?.noResolveJson?t.json().then(a=>{const i=t.status||500,o=a?.statusCode||i+"";e(new Rx(Ji(a),i,o))}).catch(a=>{e(new al(Ji(a),a))}):e(new al(Ji(t),t))}),Mx=(t,e,s,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!n?a:(Dx(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),s))};function An(t,e,s,n,a,i){return Mr(this,void 0,void 0,function*(){return new Promise((o,d)=>{t(s,Mx(e,n,a,i)).then(h=>{if(!h.ok)throw h;return n?.noResolveJson?h:h.json()}).then(h=>o(h)).catch(h=>Ix(h,d,n))})})}function Ha(t,e,s,n){return Mr(this,void 0,void 0,function*(){return An(t,"GET",e,s,n)})}function kt(t,e,s,n,a){return Mr(this,void 0,void 0,function*(){return An(t,"POST",e,n,a,s)})}function ol(t,e,s,n,a){return Mr(this,void 0,void 0,function*(){return An(t,"PUT",e,n,a,s)})}function Fx(t,e,s,n){return Mr(this,void 0,void 0,function*(){return An(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function op(t,e,s,n,a){return Mr(this,void 0,void 0,function*(){return An(t,"DELETE",e,n,a,s)})}var Me=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,e||[])).next())})};const Ux={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zx{constructor(e,s={},n,a){this.url=e,this.headers=s,this.bucketId=n,this.fetch=ip(a)}uploadOrUpdate(e,s,n,a){return Me(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Hd),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const h=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),h&&i.append("metadata",this.encodeMetadata(h)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),h&&i.append("metadata",this.encodeMetadata(h))):(i=n,d["cache-control"]=`max-age=${o.cacheControl}`,d["content-type"]=o.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const p=this._removeEmptyFolders(s),x=this._getFinalPath(p),_=yield(e=="PUT"?ol:kt)(this.fetch,`${this.url}/object/${x}`,i,Object.assign({headers:d},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}upload(e,s,n){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,a){return Me(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${o}`);d.searchParams.set("token",s);try{let h;const p=Object.assign({upsert:Hd.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",p.cacheControl)):(h=n,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const _=yield ol(this.fetch,d.toString(),h,{headers:x});return{data:{path:i,fullPath:_.Key},error:null}}catch(h){if(Ne(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,s){return Me(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);s?.upsert&&(a["x-upsert"]="true");const i=yield kt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),d=o.searchParams.get("token");if(!d)throw new yc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:d},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}update(e,s,n){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Me(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}copy(e,s,n){return Me(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,n){return Me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield kt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,n){return Me(this,void 0,void 0,function*(){try{const a=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}download(e,s){return Me(this,void 0,void 0,function*(){const a=typeof s?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(s?.transform||{}),o=i?`?${i}`:"";try{const d=this._getFinalPath(e);return{data:yield(yield Ha(this.fetch,`${this.url}/${a}/${d}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(Ne(d))return{data:null,error:d};throw d}})}info(e){return Me(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ha(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:il(n),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}exists(e){return Me(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Fx(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ne(n)&&n instanceof al){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),a=[],i=s?.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const d=typeof s?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(s?.transform||{});h!==""&&a.push(h);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${p}`)}}}remove(e){return Me(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}list(e,s,n){return Me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Ux),s),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}listV2(e,s){return Me(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const qx="2.11.0",Bx={"X-Client-Info":`storage-js/${qx}`};var Ur=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,[])).next())})};class Vx{constructor(e,s={},n,a){const i=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Bx),s),this.fetch=ip(n)}listBuckets(){return Ur(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ur(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ur(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Ur(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ur(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ur(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}}class Hx extends Vx{constructor(e,s={},n,a){super(e,s,n,a)}from(e){return new zx(this.url,this.headers,e,this.fetch)}}const Wx="2.55.0";let zs="";typeof Deno<"u"?zs="deno":typeof document<"u"?zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zs="react-native":zs="node";const Kx={"X-Client-Info":`supabase-js-${zs}/${Wx}`},Gx={headers:Kx},Qx={schema:"public"},Jx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yx={};var Zx=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,e||[])).next())})};const Xx=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wm:e=fetch,(...s)=>e(...s)},e_=()=>typeof Headers>"u"?Km:Headers,t_=(t,e,s)=>{const n=Xx(s),a=e_();return(i,o)=>Zx(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:t;let p=new a(o?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),n(i,Object.assign(Object.assign({},o),{headers:p}))})};var r_=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,[])).next())})};function s_(t){return t.endsWith("/")?t:t+"/"}function n_(t,e){var s,n;const{db:a,auth:i,realtime:o,global:d}=t,{db:h,auth:p,realtime:x,global:_}=e,w={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},p),i),realtime:Object.assign(Object.assign({},x),o),storage:{},global:Object.assign(Object.assign(Object.assign({},_),d),{headers:Object.assign(Object.assign({},(s=_?.headers)!==null&&s!==void 0?s:{}),(n=d?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>r_(this,void 0,void 0,function*(){return""})};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}const lp="2.71.1",Gr=30*1e3,ll=3,Yi=ll*Gr,a_="http://localhost:9999",i_="supabase.auth.token",o_={"X-Client-Info":`gotrue-js/${lp}`},cl="X-Supabase-Api-Version",cp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,c_=10*60*1e3;class bc extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function Z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class d_ extends bc{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function u_(t){return Z(t)&&t.name==="AuthApiError"}class dp extends bc{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class gr extends bc{constructor(e,s,n,a){super(e,n,a),this.name=s,this.status=n}}class Gt extends gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h_(t){return Z(t)&&t.name==="AuthSessionMissingError"}class Xn extends gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ea extends gr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ta extends gr{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m_(t){return Z(t)&&t.name==="AuthImplicitGrantRedirectError"}class Wd extends gr{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dl extends gr{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Zi(t){return Z(t)&&t.name==="AuthRetryableFetchError"}class Kd extends gr{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class ul extends gr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gd=` 	
\r=`.split(""),p_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Gd.length;e+=1)t[Gd[e].charCodeAt(0)]=-2;for(let e=0;e<Wa.length;e+=1)t[Wa[e].charCodeAt(0)]=e;return t})();function Qd(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Wa[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Wa[n]),e.queuedBits-=6}}function up(t,e,s){const n=p_[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Jd(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{x_(o,n,s)};for(let o=0;o<t.length;o+=1)up(t.charCodeAt(o),a,i);return e.join("")}function f_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function g_(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}f_(n,e)}}function x_(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function __(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)up(t.charCodeAt(a),s,n);return new Uint8Array(e)}function y_(t){const e=[];return g_(t,s=>e.push(s)),new Uint8Array(e)}function b_(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>Qd(a,s,n)),Qd(null,s,n),e.join("")}function v_(t){return Math.round(Date.now()/1e3)+t}function w_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const mt=()=>typeof window<"u"&&typeof document<"u",_r={tested:!1,writable:!1},hp=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_r.tested)return _r.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_r.tested=!0,_r.writable=!0}catch{_r.tested=!0,_r.writable=!1}return _r.writable};function j_(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{e[a]=n}),e}const mp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ct(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},N_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qr=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},yr=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Kt=async(t,e)=>{await t.removeItem(e)};class yi{constructor(){this.promise=new yi.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}yi.promiseConstructor=Promise;function Xi(t){const e=t.split(".");if(e.length!==3)throw new ul("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!l_.test(e[n]))throw new ul("JWT not in base64url format");return{header:JSON.parse(Jd(e[0])),payload:JSON.parse(Jd(e[1])),signature:__(e[2]),raw:{header:e[0],payload:e[1]}}}async function k_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function S_(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function C_(t){return("0"+t.toString(16)).substr(-2)}function E_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,C_).join("")}async function P_(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function T_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await P_(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zr(t,e,s=!1){const n=E_();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await Qr(t,`${e}-code-verifier`,a);const i=await T_(n);return[i,n===i?"plain":"s256"]}const A_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $_(t){const e=t.headers.get(cl);if(!e||!e.match(A_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function R_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function O_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(t){if(!L_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eo(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yd(t){return JSON.parse(JSON.stringify(t))}var D_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};const wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),I_=[502,503,504];async function Zd(t){var e;if(!N_(t))throw new dl(wr(t),0);if(I_.includes(t.status))throw new dl(wr(t),t.status);let s;try{s=await t.json()}catch(i){throw new dp(wr(i),i)}let n;const a=$_(t);if(a&&a.getTime()>=cp["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Kd(wr(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Gt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Kd(wr(s),t.status,s.weak_password.reasons);throw new d_(wr(s),t.status||500,n)}const M_=(t,e,s,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function re(t,e,s,n){var a;const i=Object.assign({},n?.headers);i[cl]||(i[cl]=cp["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const d=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",h=await F_(t,e,s+d,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(h):{data:Object.assign({},h),error:null}}async function F_(t,e,s,n,a,i){const o=M_(e,n,a,i);let d;try{d=await t(s,Object.assign({},o))}catch(h){throw console.error(h),new dl(wr(h),0)}if(d.ok||await Zd(d),n?.noResolveJson)return d;try{return await d.json()}catch(h){await Zd(h)}}function Ot(t){var e;let s=null;B_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=v_(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Xd(t){const e=Ot(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function U_(t){return{data:t,error:null}}function z_(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=t,o=D_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},h=Object.assign({},o);return{data:{properties:d,user:h},error:null}}function q_(t){return t}function B_(t){return t.access_token&&t.refresh_token&&t.expires_in}const to=["global","local","others"];var V_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};class H_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=mp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=to[0]){if(to.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${to.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Xt})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=V_(e,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:z_,redirectTo:s?.redirectTo})}catch(s){if(Z(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xt})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,a,i,o,d,h;try{const p={nextPage:null,lastPage:0,total:0},x=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:q_});if(x.error)throw x.error;const _=await x.json(),w=(o=x.headers.get("x-total-count"))!==null&&o!==void 0?o:0,k=(h=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return k.length>0&&(k.forEach(m=>{const $=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(m.split(";")[1].split("=")[1]);p[`${N}Page`]=$}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(Z(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){qr(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xt})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){qr(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Xt})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){qr(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Xt})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){qr(e.userId);try{const{data:s,error:n}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _deleteFactor(e){qr(e.userId),qr(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}}function eu(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function W_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Br={debug:!!(globalThis&&hp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class K_ extends pp{}async function G_(t,e,s){Br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{Br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new K_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Br.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}W_();const Q_={url:a_,storageKey:i_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tu(t,e,s){return await s()}const Vr={};class yn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yn.nextInstanceID,yn.nextInstanceID+=1,this.instanceID>0&&mt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Q_),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new H_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=mp(a.fetch),this.lock=a.lock||tu,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:mt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=G_:this.lock=tu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:hp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eu(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=eu(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Vr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Vr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=j_(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),mt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),m_(i)){const h=(e=i.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",d),await this._saveSession(o),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Z(s)?{error:s}:{error:new dp("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,a;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ot}),{data:o,error:d}=i;if(d||!o)return{data:{user:null,session:null},error:d};const h=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,a;try{let i;if("email"in e){const{email:x,password:_,options:w}=e;let k=null,m=null;this.flowType==="pkce"&&([k,m]=await zr(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:x,password:_,data:(s=w?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:k,code_challenge_method:m},xform:Ot})}else if("phone"in e){const{phone:x,password:_,options:w}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(n=w?.data)!==null&&n!==void 0?n:{},channel:(a=w?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Ot})}else throw new ea("You must provide either an email or phone number and a password");const{data:o,error:d}=i;if(d||!o)return{data:{user:null,session:null},error:d};const h=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:d}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Xd})}else if("phone"in e){const{phone:i,password:o,options:d}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Xd})}else throw new ea("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Xn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,a,i,o,d,h,p,x,_,w,k;let m,$;if("message"in e)m=e.message,$=e.signature;else{const{chain:N,wallet:j,statement:c,options:g}=e;let P;if(mt())if(typeof j=="object")P=j;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))P=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!g?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=j}const y=new URL((s=g?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in P&&P.signIn){const T=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g?.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),c?{statement:c}:null));let D;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")D=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)D=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)m=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),$=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${y.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...c?["",c,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${(a=(n=g?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=g?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((d=g?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((h=g?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((p=g?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((_=(x=g?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...g.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const T=await P.signMessage(new TextEncoder().encode(m),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");$=T}}try{const{data:N,error:j}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:b_($)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Ot});if(j)throw j;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Xn}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:j})}catch(N){if(Z(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await yr(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ot});if(await Kt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:a,access_token:i,nonce:o}=e,d=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ot}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Xn}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,a,i,o;try{if("email"in e){const{email:d,options:h}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await zr(this.storage,this.storageKey));const{error:_}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(s=h?.data)!==null&&s!==void 0?s:{},create_user:(n=h?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:x}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h?.data)!==null&&a!==void 0?a:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(o=h?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new ea("You must provide either an email or phone number.")}catch(d){if(Z(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var s,n;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:d}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ot});if(d)throw d;if(!o)throw new Error("An error occurred on token verification.");const h=o.session,p=o.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zr(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:U_})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Gt;const{error:a}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:d}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:d}}throw new ea("You must provide either an email or phone number and a type")}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Yi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await yr(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=eo()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,p,x)=>(!o&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,x))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xt}):await this._useSession(async s=>{var n,a,i;const{data:o,error:d}=s;if(d)throw d;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Xt})})}catch(s){if(Z(s))return h_(s)&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Gt;const o=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await zr(this.storage,this.storageKey));const{data:p,error:x}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:o.access_token,xform:Xt});if(x)throw x;return o.user=p.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gt;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:o}=Xi(e.access_token);if(o.exp&&(n=o.exp,a=n<=s),a){const{session:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;i={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(Z(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:d}=s;if(d)throw d;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Gt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!mt())throw new ta("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ta(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Wd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ta("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Wd("No code detected.");const{data:c,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:c.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:d,expires_at:h,token_type:p}=e;if(!i||!d||!o||!p)throw new ta("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(d);let w=x+_;h&&(w=parseInt(h));const k=w-x;k*1e3<=Gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${_}s`);const m=w-_;x-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,w,x):x-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,w,x);const{data:$,error:N}=await this._getUser(i);if(N)throw N;const j={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:_,expires_at:w,refresh_token:o,token_type:p,user:$.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(n){if(Z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await yr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:d}=await this.admin.signOut(o,e);if(d&&!(u_(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=w_(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await zr(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var o,d,h,p,x;const{data:_,error:w}=i;if(w)throw w;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",k,{headers:this.headers,jwt:(x=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return mt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(Z(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:o}=s;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await S_(async a=>(a>0&&await k_(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ot})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Zi(i)&&Date.now()+o-n<Gr})}catch(n){if(this._debug(s,"error",n),Z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),mt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await yr(this.storage,this.storageKey);if(a&&this.userStorage){let o=await yr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Qr(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:eo()}else if(a&&!a.user&&!a.user){const o=await yr(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await Kt(this.storage,this.storageKey+"-user"),await Qr(this.storage,this.storageKey,a)):a.user=eo()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Yi;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Yi}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Zi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:d}=await this._getUser(a.access_token);!d&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new yi;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Gt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={session:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(a,"error",i),Z(i)){const o={session:null,error:i};return Zi(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,s)}catch(h){i.push(h)}});if(await Promise.all(o),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Qr(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=Yd(a);await Qr(this.storage,this.storageKey,i)}else{const a=Yd(s);await Qr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Kt(this.storage,this.storageKey),await Kt(this.storage,this.storageKey+"-code-verifier"),await Kt(this.storage,this.storageKey+"-user"),this.userStorage&&await Kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&mt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gr}ms, refresh threshold is ${ll} ticks`),a<=ll&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(d.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:p}=await re(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((a=h?.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:d}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:d})})}catch(s){if(Z(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Z(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=e?.factors||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Xi(a.access_token);let d=null;o.aal&&(d=o.aal);let h=d;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(h="aal2");const x=o.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(d=>d.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+c_>a)return n;const{data:i,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:k,error:m}=await this.getSession();if(m||!k.session)return{data:null,error:m};n=k.session.access_token}const{header:a,payload:i,signature:o,raw:{header:d,payload:h}}=Xi(n);s?.allowExpired||R_(i.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!p){const{error:k}=await this.getUser(n);if(k)throw k;return{data:{claims:i,header:a,signature:o},error:null}}const x=O_(a.alg),_=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,_,o,y_(`${d}.${h}`)))throw new ul("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}}yn.nextInstanceID=0;const J_=yn;class Y_ extends J_{constructor(e){super(e)}}var Z_=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function d(x){try{p(n.next(x))}catch(_){o(_)}}function h(x){try{p(n.throw(x))}catch(_){o(_)}}function p(x){x.done?i(x.value):a(x.value).then(d,h)}p((n=n.apply(t,[])).next())})};class X_{constructor(e,s,n){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const d=s_(e),h=new URL(d);this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const p=`sb-${h.hostname.split(".")[0]}-auth-token`,x={db:Qx,realtime:Yx,auth:Object.assign(Object.assign({},Jx),{storageKey:p}),global:Gx},_=n_(n??{},x);this.storageKey=(a=_.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=_.global.headers)!==null&&i!==void 0?i:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(w,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=_.auth)!==null&&o!==void 0?o:{},this.headers,_.global.fetch),this.fetch=t_(s,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new fx(new URL("rest/v1",h).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new Hx(this.storageUrl.href,this.headers,this.fetch,n?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new H0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Z_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:d,debug:h},p,x){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y_({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),p),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,flowType:o,lock:d,debug:h,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $x(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ey=(t,e,s)=>new X_(t,e,s);function ty(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ty()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fp={},ry=()=>typeof import.meta<"u"&&fp?"https://0ec90b57d6e95fcbda19832f.supabase.co":null,sy=()=>typeof import.meta<"u"&&fp?"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJib2x0IiwicmVmIjoiMGVjOTBiNTdkNmU5NWZjYmRhMTk4MzJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODE1NzQsImV4cCI6MTc1ODg4MTU3NH0.9I8-U0x86Ak8t2DGaIk0HfvTSLsAyzdnz-Nw00mMkKw":null,hl=ry(),ml=sy(),ny=t=>{try{return new URL(t),!0}catch{return!1}},ay=()=>{const t=[];return hl?ny(hl)||t.push("VITE_SUPABASE_URL must be a valid URL format (e.g., https://your-project-id.supabase.co)"):t.push("VITE_SUPABASE_URL is missing from environment variables"),ml?ml.length<100&&t.push("VITE_SUPABASE_ANON_KEY appears to be invalid (too short)"):t.push("VITE_SUPABASE_ANON_KEY is missing from environment variables"),t},bn=ay();bn.length>0&&(console.error("Missing Supabase environment variables. Please check your .env file."),console.error("Configuration errors:"),bn.forEach(t=>console.error(`- ${t}`)),console.error(`
To fix this:`),console.error("1. Create a .env file in your project root"),console.error("2. Add the following variables:"),console.error("   VITE_SUPABASE_URL=https://your-project-id.supabase.co"),console.error("   VITE_SUPABASE_ANON_KEY=your-anon-key"),console.error("3. Get these values from your Supabase project dashboard"),console.error("4. Restart the development server"));const M=bn.length===0?ey(hl,ml,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"fims-app"}}}):null,At=bn.length===0,pl=bn,ra=Object.freeze(Object.defineProperty({__proto__:null,isSupabaseConfigured:At,supabase:M,supabaseConfigErrors:pl},Symbol.toStringTag,{value:"Module"})),iy=({onSignInSuccess:t,forceResetMode:e=!1,accessToken:s=null,refreshToken:n=null})=>{const{t:a}=Be(),[i,o]=A.useState(""),[d,h]=A.useState(""),[p,x]=A.useState(!1),[_,w]=A.useState(!1),[k,m]=A.useState(""),[$,N]=A.useState(!1),[j,c]=A.useState(!1),[g,P]=A.useState(""),[y,T]=A.useState(""),[D,I]=A.useState(!1),[H,q]=A.useState(!1),F=L=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L);A.useEffect(()=>{e&&s&&n&&V(s,n);const{data:{subscription:L}}=M.auth.onAuthStateChange(B=>{console.log("Auth event:",B),B==="PASSWORD_RECOVERY"&&c(!0)});return()=>L.unsubscribe()},[e,s,n]);const V=async(L,B)=>{w(!0);try{const{data:l,error:u}=await M.auth.setSession({access_token:L,refresh_token:B});if(u)throw u;console.log("Recovery session established:",l),c(!0)}catch(l){m("Invalid or expired reset link. Please request a new one."),console.error("Recovery session error:",l)}finally{w(!1)}},Q=async L=>{if(L.preventDefault(),m(""),!i||!d){m(a("auth.fillAllFields"));return}if(!F(i)){m(a("auth.invalidEmail"));return}if(d.length<6){m(a("auth.passwordTooShort"));return}if(w(!0),!M){m("Application not properly configured. Please contact administrator."),w(!1);return}try{const{data:B,error:l}=await M.auth.signInWithPassword({email:i,password:d});l?m(l.message):B.user&&t()}catch{m("An unexpected error occurred. Please try again.")}finally{w(!1)}},X=async()=>{if(!i){m(a("auth.enterEmail"));return}if(!F(i)){m(a("auth.invalidEmail"));return}m(""),w(!0);const L="https://your-app-domain.com/";try{const{error:B}=await M.auth.resetPasswordForEmail(i,{redirectTo:L});B?m(B.message):N(!0)}catch{m("An unexpected error occurred. Please try again.")}finally{w(!1)}},ie=async L=>{if(L.preventDefault(),m(""),!g||!y){m(a("auth.fillAllFields"));return}if(g.length<6){m(a("auth.passwordTooShort"));return}if(g!==y){m(a("auth.passwordsDontMatch"));return}w(!0);try{const{error:B}=await M.auth.updateUser({password:g});B?m(B.message):(await M.auth.signOut(),t(),window.location.href="/sign-in")}catch{m("An unexpected error occurred. Please try again.")}finally{w(!1)}};return $?r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(Od,{className:"h-16 w-16 text-teal-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a("auth.checkEmail")}),r.jsxs("p",{className:"text-gray-600 mb-4",children:[a("auth.resetEmailMessage")," ",r.jsx("strong",{children:i})]}),r.jsx("p",{className:"text-sm text-gray-500",children:a("auth.didntReceiveEmail","Didn't receive the email? Check your spam folder or try again.")})]}),r.jsx("button",{onClick:()=>N(!1),className:"text-blue-600 hover:text-blue-700 font-medium",children:a("auth.backToSignIn")})]}):j?r.jsx("div",{children:r.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[k&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-2",children:a("auth.newPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"new-password",type:D?"text":"password",value:g,onChange:L=>P(L.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.enterNewPassword"),disabled:_}),r.jsx("button",{type:"button",onClick:()=>I(!D),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:_,children:D?r.jsx(Ki,{className:"h-5 w-5"}):r.jsx(Tr,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-2",children:a("auth.confirmPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"confirm-password",type:H?"text":"password",value:y,onChange:L=>T(L.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.confirmNewPassword"),disabled:_}),r.jsx("button",{type:"button",onClick:()=>q(!H),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:_,children:H?r.jsx(Ki,{className:"h-5 w-5"}):r.jsx(Tr,{className:"h-5 w-5"})})]})]}),r.jsx("button",{type:"submit",disabled:_,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2",children:_?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"h-5 w-5"}),r.jsx("span",{children:a("auth.resetPassword")})]})})]})}):r.jsx("div",{children:r.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[k&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:a("auth.email")}),r.jsxs("div",{className:"relative",children:[r.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"email",type:"email",value:i,onChange:L=>o(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.enterEmail"),disabled:_})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:a("auth.password")}),r.jsxs("div",{className:"relative",children:[r.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"password",type:p?"text":"password",value:d,onChange:L=>h(L.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.enterPassword"),disabled:_}),r.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:_,children:p?r.jsx(Ki,{className:"h-5 w-5"}):r.jsx(Tr,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("button",{type:"button",onClick:X,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",disabled:_,children:a("auth.forgotPassword")})}),r.jsx("button",{type:"submit",disabled:_,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2",children:_?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"h-5 w-5"}),r.jsx("span",{children:a("auth.signIn")})]})})]})})},ro=[{code:"mr",name:"Marathi",nativeName:""},{code:"en",name:"English",nativeName:"English"}],oy=()=>{const{i18n:t}=Be(),[e,s]=A.useState(!1),n=ro.find(i=>i.code===t.language)||ro[0],a=i=>{console.log("Changing language to:",i),t.changeLanguage(i),localStorage.setItem("i18nextLng",i),s(!1)};return Tu.useEffect(()=>{const i=o=>{o.target.closest(".language-switcher")||s(!1)};if(e)return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[e]),r.jsxs("div",{className:"relative language-switcher",children:[r.jsxs("button",{onClick:()=>s(!e),className:"flex items-center space-x-2 bg-white/20 hover:bg-white/30 text-black px-3 py-2 rounded-lg transition-colors duration-200 min-w-[100px] justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Va,{className:"h-4 w-4 flex-shrink-0 text-black"}),r.jsx("span",{className:"text-sm font-medium",children:n.nativeName})]}),r.jsx(uc,{className:`h-4 w-4 text-black transition-transform duration-200 ${e?"rotate-180":""}`})]}),e&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-[70]",children:[r.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:t.language==="mr"?" ":"Select Language"}),ro.map(i=>r.jsxs("button",{onClick:()=>a(i.code),className:`w-full text-left px-3 py-3 text-sm hover:bg-gray-50 transition-colors duration-150 flex items-center justify-between ${t.language===i.code?"text-blue-600 bg-blue-50 font-medium":"text-gray-700 hover:text-gray-900"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Va,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:i.nativeName}),r.jsx("div",{className:"text-xs text-gray-500",children:i.name})]})]}),t.language===i.code&&r.jsx(qm,{className:"h-4 w-4 text-blue-600"})]},i.code))]})]})},gp=async t=>{if(!At||!M)return console.warn("Supabase not configured, returning empty inspections list"),[];try{let e=M.from("fims_inspections").select(`
        *,
        fims_categories (
          id,
          name,
          name_marathi,
          form_type
        ),
        fims_inspection_photos (
          id,
          photo_url,
          photo_name,
          description,
          photo_order
        ),
        fims_anganwadi_forms (*),
        fims_office_inspection_forms (*)
      `).order("created_at",{ascending:!1});t&&(e=e.eq("inspector_id",t));const{data:s,error:n}=await e;if(n)throw n;return s||[]}catch(e){return console.error("Error fetching inspections:",e),[]}},xp=async t=>{if(!At||!M)throw new Error("Supabase client not initialized");try{const{error:e}=await M.from("fims_anganwadi_forms").delete().eq("inspection_id",t);e&&console.error("Error deleting anganwadi forms:",e);const{error:s}=await M.from("fims_office_inspection_forms").delete().eq("inspection_id",t);s&&console.error("Error deleting office forms:",s);const{error:n}=await M.from("fims_school_inspection_forms").delete().eq("inspection_id",t);n&&console.error("Error deleting school forms:",n);const{error:a}=await M.from("fims_inspection_photos").delete().eq("inspection_id",t);a&&console.error("Error deleting photos:",a);const{error:i}=await M.from("fims_inspections").delete().eq("id",t);if(i)throw i}catch(e){throw console.error("Error deleting inspection:",e),e}},_p=async()=>{if(!At||!M)return console.warn("Supabase not configured, returning empty categories list"),[];try{const{data:t,error:e}=await M.from("fims_categories").select("*").eq("is_active",!0).order("name");if(e)throw e;return t||[]}catch(t){return console.error("Error fetching categories:",t),[]}},yp=async(t,e)=>{if(!At||!M)throw new Error("Supabase client not initialized");try{const{data:s,error:n}=await M.from("fims_inspections").update({inspector_id:e,status:"in_progress",updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        fims_categories (
          id,
          name,
          name_marathi,
          form_type
        ),
        fims_inspection_photos (
          id,
          photo_url,
          photo_name,
          description,
          photo_order
        ),
        fims_anganwadi_forms (*),
        fims_office_inspection_forms (*),
        fims_school_inspection_forms (*)
      `).single();if(n)throw n;return s}catch(s){throw console.error("Error reassigning inspection:",s),s}},ly=async t=>{if(!At||!M)throw new Error("Supabase client not initialized");try{const{data:e,error:s}=await M.from("adarsha_shala").select("*").eq("inspection_id",t).single();if(s&&s.code!=="PGRST116")throw s;return e}catch(e){throw console.error("Error fetching adarsh shala form:",e),e}},bp=async()=>{if(!At||!M)return console.warn("Supabase not configured, returning empty inspectors list"),[];try{const{data:t,error:e}=await M.from("user_roles").select(`
        user_id,
        name,
        phone_number,
        roles (
          id,
          name
        )
      `).eq("roles.name","inspector").order("name");if(e)throw e;return t||[]}catch(t){return console.error("Error fetching inspectors:",t),[]}},cy=Object.freeze(Object.defineProperty({__proto__:null,deleteInspection:xp,fetchCategories:_p,fetchInspectors:bp,getAdarshShalaForm:ly,getInspections:gp,reassignInspection:yp},Symbol.toStringTag,{value:"Module"})),ru=[{code:"mr",name:"",nativeName:""},{code:"en",name:"English",nativeName:"English"}],dy={mr:{title:"FIMS  ",subtitle:"      ",back:"",refresh:"",export:"",personAnalytics:" ",formAnalytics:" ",kpiDashboard:"KPI ",searchUsers:" ",selectPerson:" ",allUsers:" ",dateRange:" ",userName:" ",role:"",totalInspections:" ",completed:"",pending:"",completionRate:" ",avgTime:"  ()",overallCompletionRate:"  ",systemWidePerformance:"-  ",avgInspectionTime:"  ",averageTimePerInspection:"   ",activeUsers:" ",currentlyActiveInspectors:"  ",productivityScore:" ",basedOnMonthlyTargets:"  ",monthlyProgressTracking:"  ",monthlyTarget:" ",performanceRating:" ",performanceInsights:" ",highPerformers:" ",users:"",needsAttention:" ",averagePerformance:" ",completion:"",formPerformanceComparison:"  ",totalForms:" ",avgTimeMin:" ",loadingAnalyticsData:"    ...",noDataAvailable:"   ",selectLanguage:" "},en:{title:"FIMS Analytics Dashboard",subtitle:"Comprehensive analytics and insights for field inspection management",back:"Back",refresh:"Refresh",export:"Export",personAnalytics:"Person-wise Analytics",formAnalytics:"Form-wise Analytics",kpiDashboard:"KPI Dashboard",searchUsers:"Search Users",selectPerson:"Select Person",allUsers:"All Users",dateRange:"Date Range",userName:"User Name",role:"Role",totalInspections:"Total Inspections",completed:"Completed",pending:"Pending",completionRate:"Completion Rate",avgTime:"Avg Time (min)",overallCompletionRate:"Overall Completion Rate",systemWidePerformance:"System-wide completion performance",avgInspectionTime:"Avg Inspection Time",averageTimePerInspection:"Average time per inspection",activeUsers:"Active Users",currentlyActiveInspectors:"Currently active inspectors",productivityScore:"Productivity Score",basedOnMonthlyTargets:"Based on monthly targets",monthlyProgressTracking:"Monthly Progress Tracking",monthlyTarget:"Monthly Target",performanceRating:"Performance Rating",performanceInsights:"Performance Insights",highPerformers:"High Performers",users:"users",needsAttention:"Needs Attention",averagePerformance:"Average Performance",completion:"completion",formPerformanceComparison:"Form Performance Comparison",totalForms:"Total Forms",avgTimeMin:"Avg Time",loadingAnalyticsData:"Loading analytics data...",noDataAvailable:"No data available",selectLanguage:"Select Language"}},uy=({user:t,onBack:e})=>{const[s,n]=A.useState("mr"),[a,i]=A.useState(!1),[o,d]=A.useState("person"),[h,p]=A.useState(!0),[x,_]=A.useState({start:"",end:""}),[w,k]=A.useState("all"),[m,$]=A.useState(""),N=dy[s],[j,c]=A.useState([]),[g,P]=A.useState([]),[y,T]=A.useState({overall_completion_rate:0,avg_inspection_time:0,total_active_users:0,monthly_target:100,monthly_completed:0,productivity_score:0});A.useEffect(()=>{D()},[x,w]);const D=async()=>{p(!0);try{await Promise.all([I(),H(),q()])}catch(L){console.error("Error fetching analytics data:",L)}finally{p(!1)}},I=async()=>{if(M)try{let L=M.from("fims_inspections").select(`
          inspector_id,
          status,
          created_at,
          inspection_date
        `);x.start&&x.end&&(L=L.gte("created_at",x.start).lte("created_at",x.end));const{data:B,error:l}=await L;if(l)throw l;const{data:u,error:E}=await M.from("user_roles").select(`
          user_id,
          name,
          phone_number,
          roles(
            id,
            name,
            description
          )
        `);if(E)throw E;const v={};B?.forEach(S=>{const O=S.inspector_id,b=u?.find(U=>U.user_id===O),f=b?.name||"Unknown User",C=b?.roles?.name||"Unknown Role";v[O]||(v[O]={user_id:O,user_name:f,phone_number:b?.phone_number||null,total_inspections:0,completed_inspections:0,pending_inspections:0,completion_rate:0,avg_completion_time:0,role:C}),v[O].total_inspections++,S.status==="approved"||S.status==="completed"?v[O].completed_inspections++:v[O].pending_inspections++}),Object.values(v).forEach(S=>{S.completion_rate=S.total_inspections>0?Math.round(S.completed_inspections/S.total_inspections*100):0,S.avg_completion_time=Math.floor(Math.random()*120)+30}),c(Object.values(v))}catch(L){console.error("Error fetching user analytics:",L)}},H=async()=>{if(M)try{let L=M.from("fims_inspections").select(`
          category_id,
          status,
          created_at,
          fims_categories(name, name_marathi, form_type)
        `);x.start&&x.end&&(L=L.gte("created_at",x.start).lte("created_at",x.end));const{data:B,error:l}=await L;if(l)throw l;const u={};B?.forEach(E=>{const v=E.fims_categories?.form_type||"unknown",S=E.fims_categories?.name||"Unknown Form";u[v]||(u[v]={form_type:v,form_name:S,total_forms:0,completed_forms:0,avg_completion_time:0,completion_rate:0,most_recent:E.created_at}),u[v].total_forms++,(E.status==="approved"||E.status==="completed")&&u[v].completed_forms++,new Date(E.created_at)>new Date(u[v].most_recent)&&(u[v].most_recent=E.created_at)}),Object.values(u).forEach(E=>{E.completion_rate=E.total_forms>0?Math.round(E.completed_forms/E.total_forms*100):0,E.avg_completion_time=Math.floor(Math.random()*90)+45}),P(Object.values(u))}catch(L){console.error("Error fetching form analytics:",L)}},q=async()=>{if(M)try{const{data:L,error:B}=await M.from("fims_inspections").select("status, created_at, inspector_id");if(B)throw B;const l=L?.length||0,u=L?.filter(C=>C.status==="approved"||C.status==="completed").length||0,E=new Set(L?.map(C=>C.inspector_id)).size,v=new Date().getMonth(),S=new Date().getFullYear(),O=L?.filter(C=>{const U=new Date(C.created_at);return U.getMonth()===v&&U.getFullYear()===S&&(C.status==="approved"||C.status==="completed")}).length||0,b=l>0?Math.round(u/l*100):0,f=Math.min(100,Math.round(O/100*100));T({overall_completion_rate:b,avg_inspection_time:75,total_active_users:E,monthly_target:100,monthly_completed:O,productivity_score:f})}catch(L){console.error("Error fetching KPI data:",L)}},F=L=>{n(L),i(!1)};Tu.useEffect(()=>{const L=B=>{B.target.closest(".language-switcher")||i(!1)};if(a)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[a]);const V=j.filter(L=>!(w!=="all"&&L.user_id!==w||m&&!L.user_name.toLowerCase().includes(m.toLowerCase()))),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:[r.jsx(Hm,{className:"h-4 w-4 inline mr-1"}),N.searchUsers]}),r.jsx("input",{type:"text",value:m,onChange:L=>$(L.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:s==="mr"?" ...":"Search by name..."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:[r.jsx(T0,{className:"h-4 w-4 inline mr-1"}),N.selectPerson]}),r.jsxs("select",{value:w,onChange:L=>k(L.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:N.allUsers}),j.map(L=>r.jsx("option",{value:L.user_id,children:L.user_name},L.user_id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:[r.jsx(En,{className:"h-4 w-4 inline mr-1"}),N.dateRange]}),r.jsx("input",{type:"date",value:x.start,onChange:L=>_(B=>({...B,start:L.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-50 rounded-xl shadow-lg border-2 border-blue-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-200 via-blue-100 to-cyan-100 px-6 py-4 border-b border-blue-200",children:r.jsxs("h3",{className:"text-lg font-bold text-blue-800 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2"}),N.personAnalytics]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gradient-to-r from-blue-200 via-blue-100 to-cyan-100",children:r.jsxs("tr",{className:"divide-x divide-blue-200",children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-blue-800",children:N.userName}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-blue-800",children:N.role}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-blue-800",children:N.totalInspections}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-blue-800",children:N.completed}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-blue-800",children:N.pending}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-blue-800",children:N.completionRate}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-blue-800",children:N.avgTime})]})}),r.jsx("tbody",{className:"divide-y divide-blue-100",children:V.map((L,B)=>r.jsxs("tr",{className:`${B%2===0?"bg-gradient-to-r from-blue-25 to-cyan-25":"bg-gradient-to-r from-cyan-25 to-blue-25"} hover:bg-gradient-to-r hover:from-blue-100 hover:to-cyan-100 hover:scale-[1.01] transition-all duration-200 cursor-pointer group hover:shadow-md`,children:[r.jsx("td",{className:"px-6 py-4 text-blue-900 font-medium group-hover:text-blue-700",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Xe,{className:"h-4 w-4 mr-2 text-blue-600"}),L.user_name]})}),r.jsx("td",{className:"px-6 py-4 text-blue-700",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:L.role})}),r.jsx("td",{className:"px-6 py-4 text-center text-blue-900 font-semibold",children:L.total_inspections}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:L.completed_inspections})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:L.pending_inspections})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${L.completion_rate}%`}})}),r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[L.completion_rate,"%"]})]})}),r.jsx("td",{className:"px-6 py-4 text-center text-blue-700 font-medium",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ba,{className:"h-4 w-4 mr-1 text-blue-500"}),L.avg_completion_time]})})]},L.user_id))})]})})]})]}),X=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((L,B)=>r.jsxs("div",{className:`${B%3===0?"bg-gradient-to-br from-purple-100 to-pink-100 border-purple-200":B%3===1?"bg-gradient-to-br from-blue-100 to-cyan-100 border-blue-200":"bg-gradient-to-br from-green-100 to-emerald-100 border-green-200"} p-6 rounded-xl shadow-lg border-2 hover:shadow-xl hover:scale-105 transition-all duration-300`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Te,{className:`h-8 w-8 ${B%3===0?"text-purple-600":B%3===1?"text-blue-600":"text-green-600"}`}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B%3===0?"bg-purple-200 text-purple-800":B%3===1?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"}`,children:L.form_type})]}),r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:L.form_name}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Forms:"}),r.jsx("span",{className:"font-semibold text-gray-800",children:L.total_forms})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Completed:"}),r.jsx("span",{className:"font-semibold text-green-600",children:L.completed_forms})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate:"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[L.completion_rate,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Avg Time:"}),r.jsxs("span",{className:"font-semibold text-purple-600",children:[L.avg_completion_time,"min"]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${B%3===0?"bg-gradient-to-r from-purple-400 to-pink-500":B%3===1?"bg-gradient-to-r from-blue-400 to-cyan-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${L.completion_rate}%`}})})})]},L.form_type))}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-6 rounded-xl shadow-lg border border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[r.jsx(za,{className:"h-5 w-5 mr-2 text-blue-600"}),N.formPerformanceComparison]}),r.jsx("div",{className:"space-y-4",children:g.map((L,B)=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-32 text-sm font-medium text-gray-700 truncate",children:L.form_name}),r.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-4 relative",children:[r.jsx("div",{className:`h-4 rounded-full transition-all duration-700 ${B%2===0?"bg-gradient-to-r from-blue-400 to-blue-600":"bg-gradient-to-r from-green-400 to-green-600"}`,style:{width:`${L.completion_rate}%`}}),r.jsxs("span",{className:"absolute right-2 top-0 text-xs font-medium text-white leading-4",children:[L.completion_rate,"%"]})]}),r.jsxs("div",{className:"w-20 text-sm text-gray-600 text-right",children:[L.completed_forms,"/",L.total_forms]})]},L.form_type))})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg text-white hover:shadow-xl hover:scale-105 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(pc,{className:"h-8 w-8 text-blue-100"}),r.jsxs("span",{className:"text-2xl font-bold",children:[y.overall_completion_rate,"%"]})]}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:N.overallCompletionRate}),r.jsx("p",{className:"text-blue-100 text-sm",children:N.systemWidePerformance})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl shadow-lg text-white hover:shadow-xl hover:scale-105 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Ba,{className:"h-8 w-8 text-green-100"}),r.jsxs("span",{className:"text-2xl font-bold",children:[y.avg_inspection_time,s==="mr"?"":"min"]})]}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:N.avgInspectionTime}),r.jsx("p",{className:"text-green-100 text-sm",children:N.averageTimePerInspection})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-xl shadow-lg text-white hover:shadow-xl hover:scale-105 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(bt,{className:"h-8 w-8 text-purple-100"}),r.jsx("span",{className:"text-2xl font-bold",children:y.total_active_users})]}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:N.activeUsers}),r.jsx("p",{className:"text-purple-100 text-sm",children:N.currentlyActiveInspectors})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-6 rounded-xl shadow-lg text-white hover:shadow-xl hover:scale-105 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(fc,{className:"h-8 w-8 text-orange-100"}),r.jsx("span",{className:"text-2xl font-bold",children:y.productivity_score})]}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:N.productivityScore}),r.jsx("p",{className:"text-orange-100 text-sm",children:N.basedOnMonthlyTargets})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-6 rounded-xl shadow-lg border border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[r.jsx(Ua,{className:"h-5 w-5 mr-2 text-blue-600"}),N.monthlyProgressTracking]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:N.monthlyTarget}),r.jsx("span",{className:"text-sm font-bold text-gray-800",children:y.monthly_target})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-4 rounded-full transition-all duration-700",style:{width:`${Math.min(100,y.monthly_completed/y.monthly_target*100)}%`}})}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[s==="mr"?"":"Completed",": ",y.monthly_completed]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(y.monthly_completed/y.monthly_target*100),"%"]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:N.productivityScore}),r.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[y.productivity_score,"/100"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:r.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-700",style:{width:`${y.productivity_score}%`}})}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N.performanceRating}),r.jsxs("span",{className:"text-xs text-gray-500",children:[y.productivity_score,"%"]})]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-lg border border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[r.jsx(Vm,{className:"h-5 w-5 mr-2 text-purple-600"}),N.performanceInsights]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center",children:r.jsx(Pn,{className:"h-10 w-10 text-white"})}),r.jsx("h4",{className:"font-semibold text-gray-800",children:N.highPerformers}),r.jsxs("p",{className:"text-sm text-gray-600",children:[j.filter(L=>L.completion_rate>=80).length," ",N.users]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center",children:r.jsx(hi,{className:"h-10 w-10 text-white"})}),r.jsx("h4",{className:"font-semibold text-gray-800",children:N.needsAttention}),r.jsxs("p",{className:"text-sm text-gray-600",children:[j.filter(L=>L.completion_rate<60).length," ",N.users]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:r.jsx(Ua,{className:"h-10 w-10 text-white"})}),r.jsx("h4",{className:"font-semibold text-gray-800",children:N.averagePerformance}),r.jsxs("p",{className:"text-sm text-gray-600",children:[Math.round(j.reduce((L,B)=>L+B.completion_rate,0)/j.length||0),"% ",N.completion]})]})]})]})]});return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-400 rounded-lg shadow-sm p-4 md:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-white hover:text-blue-100 transition-colors duration-200",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r.jsx("span",{children:N.back})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:D,disabled:h,className:"flex items-center space-x-2 bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[r.jsx(R0,{className:`h-4 w-4 ${h?"animate-spin":""}`}),r.jsx("span",{children:N.refresh})]}),r.jsxs("button",{className:"flex items-center space-x-2 bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[r.jsx(E0,{className:"h-4 w-4"}),r.jsx("span",{children:N.export})]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:"relative language-switcher",children:[r.jsxs("button",{onClick:()=>i(!a),className:"flex items-center space-x-2 bg-white/20 hover:bg-white/30 text-white px-3 py-2 rounded-lg transition-colors duration-200 min-w-[100px] justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Va,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:ru.find(L=>L.code===s)?.nativeName})]}),r.jsx(uc,{className:`h-4 w-4 transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-[70]",children:[r.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:N.selectLanguage}),ru.map(L=>r.jsxs("button",{onClick:()=>F(L.code),className:`w-full text-left px-3 py-3 text-sm hover:bg-gray-50 transition-colors duration-150 flex items-center justify-between ${s===L.code?"text-blue-600 bg-blue-50 font-medium":"text-gray-700 hover:text-gray-900"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Va,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:L.nativeName}),r.jsx("div",{className:"text-xs text-gray-500",children:L.name})]})]}),s===L.code&&r.jsx(qm,{className:"h-4 w-4 text-blue-600"})]},L.code))]})]})}),r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:N.title}),r.jsx("p",{className:"text-blue-100",children:N.subtitle})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsxs("button",{onClick:()=>d("person"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors duration-200 ${o==="person"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(bt,{className:"h-4 w-4 inline mr-2"}),N.personAnalytics]}),r.jsxs("button",{onClick:()=>d("form"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors duration-200 ${o==="form"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Te,{className:"h-4 w-4 inline mr-2"}),N.formAnalytics]}),r.jsxs("button",{onClick:()=>d("kpi"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors duration-200 ${o==="kpi"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(za,{className:"h-4 w-4 inline mr-2"}),N.kpiDashboard]})]})}),h?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600",children:N.loadingAnalyticsData})]}):r.jsxs("div",{children:[o==="person"&&Q(),o==="form"&&X(),o==="kpi"&&ie()]})]})})},hy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),[m,$]=A.useState(!1),[N,j]=A.useState([]),[c,g]=A.useState([]),[P,y]=A.useState(!1),[T,D]=A.useState(0),I=a?.mode==="view";a?.mode;const[H,q]=A.useState({category_id:"",location_name:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null,location_detected:""}),[F,V]=A.useState({anganwadi_name:"",anganwadi_number:"",supervisor_name:"",helper_name:"",village_name:"",building_type:"",room_availability:!1,toilet_facility:!1,drinking_water:!1,electricity:!1,kitchen_garden:!1,independent_kitchen:!1,women_health_checkup_space:!1,weighing_machine:!1,baby_weighing_scale:!1,hammock_weighing_scale:!1,adult_weighing_scale:!1,height_measuring_scale:!1,first_aid_kit:!1,teaching_materials:!1,toys_available:!1,cooking_utensils:!1,water_storage_containers:!1,medicine_kits:!1,pre_school_kit:!1,attendance_register:!1,growth_chart_updated:!1,vaccination_records:!1,nutrition_records:!1,all_registers:!1,monthly_progress_reports:!1,timetable_available:!1,timetable_followed:!1,supervisor_regular_attendance:!1,total_registered_children:0,children_present_today:0,children_0_3_years:0,children_3_6_years:0,preschool_education_registered:0,preschool_education_present:0,hot_meal_served:!1,take_home_ration:!1,monthly_25_days_meals:!1,thr_provided_regularly:!1,food_provider:"",supervisor_participation:"",food_distribution_decentralized:!1,children_food_taste_preference:"",prescribed_protein_calories:!1,prescribed_weight_food:!1,lab_sample_date:"",health_checkup_conducted:!1,immunization_updated:!1,vitamin_a_given:!1,iron_tablets_given:!1,regular_weighing:!1,growth_chart_accuracy:!1,vaccination_health_checkup_regular:!1,vaccination_schedule_awareness:!1,village_health_nutrition_planning:"",children_attendance_comparison:"",preschool_programs_conducted:"",community_participation:"",committee_member_participation:"",home_visits_guidance:"",public_opinion_improvement:"",general_observations:"",recommendations:"",action_required:"",suggestions:"",visit_date:"",inspector_designation:"",inspector_name:""}),Q=s.find(f=>f.form_type==="anganwadi");A.useEffect(()=>{Q&&q(f=>({...f,category_id:Q.id}))},[Q]),A.useEffect(()=>{if(a&&a.id){console.log("Loading existing inspection data:",a),q({category_id:a.category_id||"",location_name:a.location_name||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy,location_detected:a.location_detected||""});let f=null;a.fims_anganwadi_forms&&a.fims_anganwadi_forms.length>0?(f=a.fims_anganwadi_forms[0],console.log("Loading from fims_anganwadi_forms:",f)):(f=a.form_data,console.log("Loading from form_data JSON:",f)),f&&V({anganwadi_name:f.anganwadi_name||"",anganwadi_number:f.anganwadi_number||"",supervisor_name:f.supervisor_name||"",helper_name:f.helper_name||"",village_name:f.village_name||"",building_type:f.building_type||"",room_availability:f.room_availability||!1,toilet_facility:f.toilet_facility||!1,drinking_water:f.drinking_water||!1,electricity:f.electricity||!1,kitchen_garden:f.kitchen_garden||!1,independent_kitchen:f.independent_kitchen||!1,women_health_checkup_space:f.women_health_checkup_space||!1,weighing_machine:f.weighing_machine||!1,baby_weighing_scale:f.baby_weighing_scale||!1,hammock_weighing_scale:f.hammock_weighing_scale||!1,adult_weighing_scale:f.adult_weighing_scale||!1,height_measuring_scale:f.height_measuring_scale||!1,first_aid_kit:f.first_aid_kit||!1,teaching_materials:f.teaching_materials||!1,toys_available:f.toys_available||!1,cooking_utensils:f.cooking_utensils||!1,water_storage_containers:f.water_storage_containers||!1,medicine_kits:f.medicine_kits||!1,pre_school_kit:f.pre_school_kit||!1,attendance_register:f.attendance_register||!1,growth_chart_updated:f.growth_chart_updated||!1,vaccination_records:f.vaccination_records||!1,nutrition_records:f.nutrition_records||!1,all_registers:f.all_registers||!1,monthly_progress_reports:f.monthly_progress_reports||!1,timetable_available:f.timetable_available||!1,timetable_followed:f.timetable_followed||!1,supervisor_regular_attendance:f.supervisor_regular_attendance||!1,total_registered_children:f.total_registered_children||0,children_present_today:f.children_present_today||0,children_0_3_years:f.children_0_3_years||0,children_3_6_years:f.children_3_6_years||0,preschool_education_registered:f.preschool_education_registered||0,preschool_education_present:f.preschool_education_present||0,hot_meal_served:f.hot_meal_served||!1,take_home_ration:f.take_home_ration||!1,monthly_25_days_meals:f.monthly_25_days_meals||!1,thr_provided_regularly:f.thr_provided_regularly||!1,food_provider:f.food_provider||"",supervisor_participation:f.supervisor_participation||"",food_distribution_decentralized:f.food_distribution_decentralized||!1,children_food_taste_preference:f.children_food_taste_preference||"",prescribed_protein_calories:f.prescribed_protein_calories||!1,prescribed_weight_food:f.prescribed_weight_food||!1,lab_sample_date:f.lab_sample_date||"",health_checkup_conducted:f.health_checkup_conducted||!1,immunization_updated:f.immunization_updated||!1,vitamin_a_given:f.vitamin_a_given||!1,iron_tablets_given:f.iron_tablets_given||!1,regular_weighing:f.regular_weighing||!1,growth_chart_accuracy:f.growth_chart_accuracy||!1,vaccination_health_checkup_regular:f.vaccination_health_checkup_regular||!1,vaccination_schedule_awareness:f.vaccination_schedule_awareness||!1,village_health_nutrition_planning:f.village_health_nutrition_planning||"",children_attendance_comparison:f.children_attendance_comparison||"",preschool_programs_conducted:f.preschool_programs_conducted||"",community_participation:f.community_participation||"",committee_member_participation:f.committee_member_participation||"",home_visits_guidance:f.home_visits_guidance||"",public_opinion_improvement:f.public_opinion_improvement||"",general_observations:f.general_observations||"",recommendations:f.recommendations||"",action_required:f.action_required||"",suggestions:f.suggestions||"",visit_date:f.visit_date||"",inspector_designation:f.inspector_designation||"",inspector_name:f.inspector_name||""})}},[a]);const X=()=>{if(!navigator.geolocation){alert(i("categories.geolocationNotSupported"));return}$(!0),navigator.geolocation.getCurrentPosition(async f=>{const C=f.coords.latitude,U=f.coords.longitude,G=f.coords.accuracy;try{const se=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${f.coords.latitude},${f.coords.longitude}&key=undefined`)).json();if(se.results&&se.results.length>0){const oe=se.results[0].formatted_address;q(pe=>({...pe,latitude:C,longitude:U,location_accuracy:G,location_detected:oe,location_name:pe.location_name||oe}))}else q(oe=>({...oe,latitude:C,longitude:U,location_accuracy:G,location_detected:"Location detected but address not found"}))}catch(te){console.error("Error getting location name:",te),q(se=>({...se,latitude:C,longitude:U,location_accuracy:G,location_detected:"Unable to get address"}))}$(!1)},f=>{console.error("Error getting location:",f),$(!1),alert(i("categories.geolocationError"))},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},ie=f=>{const C=Array.from(f.target.files||[]);if(x.length+C.length>5){alert("Maximum 5 photos allowed");return}_(U=>[...U,...C])},L=f=>{_(C=>C.filter((U,G)=>G!==f))};A.useEffect(()=>()=>{N.forEach(f=>URL.revokeObjectURL(f))},[]);const B=async f=>{if(x.length!==0){k(!0);try{for(let C=0;C<x.length;C++){const U=x[C],G=U.name.split(".").pop(),te=`anganwadi_${f}_${Date.now()}_${C}.${G}`,{data:se,error:oe}=await M.storage.from("field-visit-images").upload(te,U);if(oe)throw oe;const{data:{publicUrl:pe}}=M.storage.from("field-visit-images").getPublicUrl(te),{error:Ve}=await M.from("fims_inspection_photos").insert({inspection_id:f,photo_url:pe,photo_name:U.name,description:`Anganwadi inspection photo ${C+1}`,photo_order:C+1});if(Ve)throw Ve}}catch(C){throw console.error("Error uploading photos:",C),C}finally{k(!1)}}},l=()=>{const f=new Date,C=f.getFullYear(),U=String(f.getMonth()+1).padStart(2,"0"),G=String(f.getDate()).padStart(2,"0"),te=String(f.getTime()).slice(-6);return`AWC-${C}${U}${G}-${te}`},u=async(f=!1)=>{try{p(!0);const C={...H,planned_date:H.planned_date||null};let U;if(a&&a.id){const{data:se,error:oe}=await M.from("fims_inspections").update({location_name:C.location_name,latitude:C.latitude,longitude:C.longitude,location_accuracy:C.location_accuracy,location_detected:C.location_detected,address:C.address,planned_date:C.planned_date,inspection_date:new Date().toISOString(),status:f?"draft":"submitted",form_data:F}).eq("id",a.id).select().single();if(oe)throw oe;U=se;const{error:pe}=await M.from("fims_anganwadi_forms").upsert({inspection_id:a.id,...F});if(pe)throw pe}else{const se=l(),{data:oe,error:pe}=await M.from("fims_inspections").insert({inspection_number:se,category_id:C.category_id,inspector_id:t.id,location_name:C.location_name,latitude:C.latitude,longitude:C.longitude,location_accuracy:C.location_accuracy,location_detected:C.location_detected,address:C.address,planned_date:C.planned_date,inspection_date:new Date().toISOString(),status:f?"draft":"submitted",form_data:F}).select().single();if(pe)throw pe;U=oe;const{error:Ve}=await M.from("fims_anganwadi_forms").insert({inspection_id:U.id,...F});if(Ve)throw Ve}c.length>0&&await B(U.id);const G=a&&a.id,te=i(f?G?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":G?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(te),n(),e()}catch(C){console.error("Error saving inspection:",C),alert("Error saving inspection: "+C.message)}finally{p(!1)}},E=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(f=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=f?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:f}),f<3&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>f?"bg-purple-600":"bg-gray-200"}`})]},f))}),v=({name:f,value:C,onChange:U,question:G})=>r.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200 hover:shadow-md transition-all duration-300",children:[r.jsx("p",{className:"mb-4 text-gray-800 font-medium leading-relaxed text-lg",children:G}),r.jsxs("div",{className:"flex gap-8 pl-4",children:[r.jsxs("label",{className:"flex items-center cursor-pointer group",children:[r.jsx("input",{type:"radio",name:f,value:"",checked:C==="",onChange:te=>U(te.target.value),disabled:I,className:"mr-3 w-5 h-5 text-green-600 border-2 border-gray-300 focus:ring-green-500 focus:ring-2 group-hover:border-green-400 transition-colors"}),r.jsx("span",{className:"text-green-700 font-semibold group-hover:text-green-800 transition-colors text-lg",children:""})]}),r.jsxs("label",{className:"flex items-center cursor-pointer group",children:[r.jsx("input",{type:"radio",name:f,value:"",checked:C==="",onChange:te=>U(te.target.value),disabled:I,className:"mr-3 w-5 h-5 text-red-600 border-2 border-gray-300 focus:ring-red-500 focus:ring-2 group-hover:border-red-400 transition-colors"}),r.jsx("span",{className:"text-red-700 font-semibold group-hover:text-red-800 transition-colors text-lg",children:""})]})]})]}),S=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(zm,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:"  (Basic Information)"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("fims.anganwadiName")," *"]}),r.jsx("input",{type:"text",value:F.anganwadi_name,onChange:f=>V(C=>({...C,anganwadi_name:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:i("fims.enterAnganwadiName"),required:!0,disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("fims.anganwadiNumber")}),r.jsx("input",{type:"text",value:F.anganwadi_number,onChange:f=>V(C=>({...C,anganwadi_number:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:i("fims.enterAnganwadiNumber"),disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("fims.supervisorName")}),r.jsx("input",{type:"text",value:F.supervisor_name,onChange:f=>V(C=>({...C,supervisor_name:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:i("fims.enterSupervisorName"),disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("fims.helperName")}),r.jsx("input",{type:"text",value:F.helper_name,onChange:f=>V(C=>({...C,helper_name:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:i("fims.enterHelperName"),disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("fims.villageName")}),r.jsx("input",{type:"text",value:F.village_name,onChange:f=>V(C=>({...C,village_name:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:i("fims.enterVillageName"),disabled:I})]})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(be,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:"  (Location Information)"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("fims.locationName")," *"]}),r.jsx("input",{type:"text",value:H.location_name,onChange:f=>q(C=>({...C,location_name:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:i("fims.enterLocationName"),required:!0,disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("fims.plannedDate")}),r.jsx("input",{type:"date",value:H.planned_date,onChange:f=>q(C=>({...C,planned_date:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),!I&&r.jsxs("button",{type:"button",onClick:X,disabled:h,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:i(m?"fims.gettingLocation":"fims.getCurrentLocation")})]}),H.latitude&&H.longitude&&r.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium",children:i("fims.locationCaptured")}),r.jsxs("p",{className:"text-xs text-green-600",children:[i("fims.latitude"),": ",H.latitude.toFixed(6),r.jsx("br",{}),i("fims.longitude"),": ",H.longitude.toFixed(6),r.jsx("br",{}),i("fims.accuracy"),": ",H.location_accuracy?Math.round(H.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"  (Location Detected)"}),r.jsx("input",{type:"text",value:H.location_detected,onChange:f=>q(C=>({...C,location_detected:f.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent text-xs",placeholder:"GPS     ",readOnly:I})]}),!H.location_detected&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Search Location)"}),r.jsx("div",{style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"8px"},children:r.jsx("gmpx-place-picker",{placeholder:"   "})})]})]})})]})]}),O=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 mb-10 overflow-hidden",children:r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-700 to-purple-800 px-8 py-16 text-white relative",children:[r.jsx("div",{className:"absolute inset-0 bg-black/10"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-6 shadow-lg",children:r.jsx(Te,{className:"w-16 h-16 text-white"})})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 leading-tight tracking-wide",children:"    ()"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-8 py-4 inline-block shadow-lg border border-white/30",children:[r.jsx("p",{className:"text-sm font-medium",children:"(   . F.No.-/-ME (P+) .  .)"}),H.location_detected&&r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[r.jsx("strong",{children:":"})," ",H.location_detected]})]})]})]})}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(el,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".    :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"  [/ / /  ]"}),r.jsxs("select",{value:F.building_type,onChange:f=>V(C=>({...C,building_type:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"own",children:""}),r.jsx("option",{value:"rented",children:""}),r.jsx("option",{value:"free",children:""}),r.jsx("option",{value:"no_building",children:" "})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{key:"toilet_facility",label:""},{key:"independent_kitchen",label:"   "},{key:"women_health_checkup_space",label:"   "},{key:"electricity",label:" "},{key:"drinking_water",label:" "}].map(({key:f,label:C})=>r.jsxs("label",{className:"flex items-center p-6 bg-gradient-to-r from-gray-50 to-emerald-50 rounded-2xl hover:from-emerald-50 hover:to-emerald-100 transition-all duration-300 cursor-pointer group border border-gray-200 hover:border-emerald-300 shadow-sm hover:shadow-md",children:[r.jsx("input",{type:"checkbox",checked:F[f],onChange:U=>V(G=>({...G,[f]:U.target.checked})),className:"mr-5 w-6 h-6 text-emerald-600 border-2 border-gray-300 rounded-lg focus:ring-emerald-500 focus:ring-2 group-hover:border-emerald-400 transition-colors",disabled:I}),r.jsx("span",{className:"text-gray-700 group-hover:text-emerald-800 font-semibold text-lg",children:C})]},f))})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(O0,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".  :"})]})}),r.jsx("div",{className:"p-10",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{key:"baby_weighing_scale",label:" "},{key:"hammock_weighing_scale",label:" [] "},{key:"adult_weighing_scale",label:" "}].map(({key:f,label:C})=>r.jsxs("label",{className:"flex items-center p-6 bg-gradient-to-r from-gray-50 to-purple-50 rounded-2xl hover:from-purple-50 hover:to-purple-100 transition-all duration-300 cursor-pointer group border border-gray-200 hover:border-purple-300 shadow-sm hover:shadow-md",children:[r.jsx("input",{type:"checkbox",checked:F[f],onChange:U=>V(G=>({...G,[f]:U.target.checked})),className:"mr-5 w-6 h-6 text-purple-600 border-2 border-gray-300 rounded-lg focus:ring-purple-500 focus:ring-2 group-hover:border-purple-400 transition-colors",disabled:I}),r.jsx("span",{className:"text-gray-700 group-hover:text-purple-800 font-semibold text-lg",children:C})]},f))})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(Um,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".   :"})]})}),r.jsx("div",{className:"p-10",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{key:"cooking_utensils",label:" "},{key:"water_storage_containers",label:"   "},{key:"medicine_kits",label:" "},{key:"pre_school_kit",label:"  "},{key:"all_registers",label:"   ()"},{key:"monthly_progress_reports",label:"   "}].map(({key:f,label:C})=>r.jsxs("label",{className:"flex items-center p-6 bg-gradient-to-r from-gray-50 to-orange-50 rounded-2xl hover:from-orange-50 hover:to-orange-100 transition-all duration-300 cursor-pointer group border border-gray-200 hover:border-orange-300 shadow-sm hover:shadow-md",children:[r.jsx("input",{type:"checkbox",checked:F[f],onChange:U=>V(G=>({...G,[f]:U.target.checked})),className:"mr-5 w-6 h-6 text-orange-600 border-2 border-gray-300 rounded-lg focus:ring-orange-500 focus:ring-2 group-hover:border-orange-400 transition-colors",disabled:I}),r.jsx("span",{className:"text-gray-700 group-hover:text-orange-800 font-semibold text-lg",children:C})]},f))})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-blue-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(En,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".   :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(v,{name:"timetable_available",value:F.timetable_available?"":F.timetable_available===!1?"":"",onChange:f=>V(C=>({...C,timetable_available:f===""})),question:"]     ?"}),r.jsx(v,{name:"timetable_followed",value:F.timetable_followed?"":F.timetable_followed===!1?"":"",onChange:f=>V(C=>({...C,timetable_followed:f===""})),question:"]    ?"}),r.jsx(v,{name:"supervisor_regular_attendance",value:F.supervisor_regular_attendance?"":F.supervisor_regular_attendance===!1?"":"",onChange:f=>V(C=>({...C,supervisor_regular_attendance:f===""})),question:"]     ?"})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(Bm,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:". :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(v,{name:"monthly_25_days_meals",value:F.monthly_25_days_meals?"":F.monthly_25_days_meals===!1?"":"",onChange:f=>V(C=>({...C,monthly_25_days_meals:f===""})),question:"]               ?"}),r.jsx(v,{name:"thr_provided_regularly",value:F.thr_provided_regularly?"":F.thr_provided_regularly===!1?"":"",onChange:f=>V(C=>({...C,thr_provided_regularly:f===""})),question:"]   , - ,      THR    ?"})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(bt,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".   / :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"]     ?"}),r.jsx("input",{type:"text",value:F.food_provider,onChange:f=>V(C=>({...C,food_provider:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-teal-500/20 focus:border-teal-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"]     ."}),r.jsx("input",{type:"text",value:F.supervisor_participation,onChange:f=>V(C=>({...C,supervisor_participation:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-teal-500/20 focus:border-teal-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsx(v,{name:"food_distribution_decentralized",value:F.food_distribution_decentralized?"":F.food_distribution_decentralized===!1?"":"",onChange:f=>V(C=>({...C,food_distribution_decentralized:f===""})),question:"]       ?"})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(be,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".        ?:"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"   ?"}),r.jsx("input",{type:"text",value:F.children_food_taste_preference,onChange:f=>V(C=>({...C,children_food_taste_preference:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",placeholder:"    ",disabled:I})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(Pn,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".  :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(v,{name:"prescribed_protein_calories",value:F.prescribed_protein_calories?"":F.prescribed_protein_calories===!1?"":"",onChange:f=>V(C=>({...C,prescribed_protein_calories:f===""})),question:"]        ?"}),r.jsx(v,{name:"prescribed_weight_food",value:F.prescribed_weight_food?"":F.prescribed_weight_food===!1?"":"",onChange:f=>V(C=>({...C,prescribed_weight_food:f===""})),question:"]     ?"}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"]      ?"}),r.jsx("input",{type:"text",value:F.lab_sample_date,onChange:f=>V(C=>({...C,lab_sample_date:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(L0,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".  :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(v,{name:"regular_weighing",value:F.regular_weighing?"":F.regular_weighing===!1?"":"",onChange:f=>V(C=>({...C,regular_weighing:f===""})),question:"]         ?"}),r.jsx(v,{name:"growth_chart_accuracy",value:F.growth_chart_accuracy?"":F.growth_chart_accuracy===!1?"":"",onChange:f=>V(C=>({...C,growth_chart_accuracy:f===""})),question:"] ( )             ?         .    ."}),r.jsx(v,{name:"vaccination_health_checkup_regular",value:F.vaccination_health_checkup_regular?"":F.vaccination_health_checkup_regular===!1?"":"",onChange:f=>V(C=>({...C,vaccination_health_checkup_regular:f===""})),question:"]       ? (    .)"}),r.jsx(v,{name:"vaccination_schedule_awareness",value:F.vaccination_schedule_awareness?"":F.vaccination_schedule_awareness===!1?"":"",onChange:f=>V(C=>({...C,vaccination_schedule_awareness:f===""})),question:"]       ? (-   )"})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(F0,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:".  :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"]      "}),r.jsx("input",{type:"text",value:F.village_health_nutrition_planning,onChange:f=>V(C=>({...C,village_health_nutrition_planning:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-violet-500/20 focus:border-violet-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"]   "}),r.jsx("input",{type:"text",value:F.children_attendance_comparison,onChange:f=>V(C=>({...C,children_attendance_comparison:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-violet-500/20 focus:border-violet-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(bt,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:" :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{children:r.jsx(v,{name:"village_health_nutrition_micro_planning",value:F.village_health_nutrition_micro_planning,onChange:f=>V(C=>({...C,village_health_nutrition_micro_planning:f})),question:".           ?"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-4 text-lg text-gray-700",children:".               . (       .):"}),r.jsx("input",{type:"text",className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300",disabled:I})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-4 text-lg text-gray-700",children:".   :"}),r.jsxs("div",{className:"space-y-4 pl-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium",children:"]    "}),r.jsx("input",{type:"number",value:F.preschool_education_registered,onChange:f=>V(C=>({...C,preschool_education_registered:parseInt(f.target.value)||0})),className:"w-full p-3 border-2 border-gray-200 rounded-lg",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium",children:"]     "}),r.jsx("input",{type:"number",value:F.preschool_education_present,onChange:f=>V(C=>({...C,preschool_education_present:parseInt(f.target.value)||0})),className:"w-full p-3 border-2 border-gray-200 rounded-lg",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium",children:"]     "}),r.jsx("input",{type:"text",value:F.preschool_programs_conducted,onChange:f=>V(C=>({...C,preschool_programs_conducted:f.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg",disabled:I})]})]})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(bt,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:". :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{children:r.jsx(v,{name:"village_health_nutrition_micro_planning",value:F.village_health_nutrition_micro_planning,onChange:f=>V(C=>({...C,village_health_nutrition_micro_planning:f})),question:"]       ?    ?(         .)"})}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium",children:"]    /   /  /    ?"}),r.jsx("textarea",{value:F.committee_member_participation,onChange:f=>V(C=>({...C,committee_member_participation:f.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg",rows:3,disabled:I})]})]})})]}),r.jsx(v,{name:"home_visits_guidance",value:F.home_visits_guidance,onChange:f=>V(C=>({...C,home_visits_guidance:f})),question:".  ,                   ? (      .)"}),r.jsx(v,{name:"public_opinion_improvement",value:F.public_opinion_improvement,onChange:f=>V(C=>({...C,public_opinion_improvement:f})),question:".         ?          ?"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-4 text-lg text-gray-700",children:".   -"}),r.jsx("textarea",{value:F.suggestions,onChange:f=>V(C=>({...C,suggestions:f.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg",rows:3,disabled:I})]})]})})]}),r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-800 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(Te,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:"  :"})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:" "}),r.jsx("input",{type:"date",value:F.visit_date,onChange:f=>V(C=>({...C,visit_date:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"  "}),r.jsx("input",{type:"text",value:F.inspector_name,onChange:f=>V(C=>({...C,inspector_name:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:"  "}),r.jsx("input",{type:"text",value:F.inspector_designation,onChange:f=>V(C=>({...C,inspector_designation:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",disabled:I})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:" "}),r.jsx("textarea",{value:F.general_observations,onChange:f=>V(C=>({...C,general_observations:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",rows:3,disabled:I})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:""}),r.jsx("textarea",{value:F.recommendations,onChange:f=>V(C=>({...C,recommendations:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",rows:3,disabled:I})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block mb-4 text-lg font-bold text-gray-700",children:""}),r.jsx("textarea",{value:F.suggestions,onChange:f=>V(C=>({...C,suggestions:f.target.value})),className:"w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-gray-500/20 focus:border-gray-500 transition-all duration-300 bg-gray-50 hover:bg-white text-lg shadow-sm",rows:3,disabled:I})]})]})})]})]}),b=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center text-white",children:[r.jsx(ee,{className:"w-8 h-8 mr-4"}),r.jsx("h3",{className:"text-2xl font-bold",children:"  "})]})}),r.jsx("div",{className:"p-10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" "}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-purple-400 transition-colors duration-200",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"   "}),r.jsx("p",{className:"text-gray-600 mb-4",children:x.length>0?`${x.length}/5   `:"  (  5)"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ie,disabled:I||x.length>=5,id:"photo-upload",style:{display:"none"}}),r.jsxs("label",{htmlFor:"photo-upload",className:`inline-flex items-center px-4 py-2 rounded-lg cursor-pointer transition-colors duration-200 ${I||x.length>=5?"bg-gray-400 cursor-not-allowed text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),x.length>=5?"   ":" "]})]}),x.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(ee,{className:"h-5 w-5 mr-2 text-purple-600"}),"  (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map((f,C)=>r.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[r.jsx("img",{src:URL.createObjectURL(f),alt:`Preview ${C+1}`,className:"w-full h-40 object-cover"}),!I&&r.jsx("button",{onClick:()=>L(C),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg transition-colors duration-200",children:r.jsx("span",{className:"text-sm font-bold",children:""})}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 truncate mb-1",children:f.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(f.size/1024/1024).toFixed(2)," MB"]})]})]},C))})]}),w&&r.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-blue-800",children:"   ..."}),r.jsxs("span",{className:"text-sm text-blue-600",children:[T,"%"]})]}),r.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T}%`}})})]}),I&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["  (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((f,C)=>r.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[r.jsx("img",{src:f.photo_url,alt:f.description||`Anganwadi photo ${C+1}`,className:"w-full h-40 object-cover"}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 truncate mb-1",children:f.photo_name||`Photo ${C+1}`}),f.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:f.description})]})]},f.id))})]}),I&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:"   "})]})]})})]}),!I&&r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{type:"button",onClick:()=>u(!0),disabled:h||w,className:"px-8 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx($t,{className:"h-5 w-5"}),r.jsx("span",{children:h?"  ...":"   "})]}),r.jsxs("button",{type:"button",onClick:()=>u(!1),disabled:h||w,className:"px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Rt,{className:"h-5 w-5"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]});return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-8",children:r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:i("common.back")})]})}),E(),o===1&&S(),o===2&&O(),o===3&&b(),r.jsxs("div",{className:"flex justify-between mt-8",children:[r.jsx("button",{onClick:()=>d(Math.max(1,o-1)),disabled:o===1,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-400 transition-colors",children:i("common.previous")}),o<3&&r.jsx("button",{onClick:()=>d(Math.min(3,o+1)),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:i("common.next")})]})]})},my=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({department_name:"",employee_name:"",designation:"",table_number:"",date_of_joining:"",work_nature:"",letter_received_logged:!1,letter_priority_disposed:!1,weekly_report_created:!1,pending_register_maintained:!1,reminders_sent_in_time:!1,letters_bound_with_permission:!1,class_d_letters_destroyed:!1,long_pending_cases:!1,required_registers:!1,updated_registers:!1,registers_submitted_on_time:!1,file_structure_six_bundle:!1,post_disposal_bundling:!1,periodic_statements_submitted:!1,permanent_instruction_available:!1,indexed_instruction_complete:!1,updated_by_gov_circular:!1,files_classified:!1,binding_and_submission:!1,disposal_speed_satisfactory:!1,inspection_issues_json:[],evaluation_score:0,work_quality:"",inspector_name:"",inspector_designation:"",supervisor_remarks:"",supervisor_signature:""}),P=s.find(l=>l.form_type==="office");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{if(a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.fims_office_inspection_forms&&a.fims_office_inspection_forms.length>0)){const l=a.fims_office_inspection_forms[0];g({department_name:l.department_name||"",employee_name:l.employee_name||"",designation:l.designation||"",table_number:l.table_number||"",date_of_joining:l.date_of_joining||"",work_nature:l.work_nature||"",letter_received_logged:l.letter_received_logged||!1,letter_priority_disposed:l.letter_priority_disposed||!1,weekly_report_created:l.weekly_report_created||!1,pending_register_maintained:l.pending_register_maintained||!1,reminders_sent_in_time:l.reminders_sent_in_time||!1,letters_bound_with_permission:l.letters_bound_with_permission||!1,class_d_letters_destroyed:l.class_d_letters_destroyed||!1,long_pending_cases:l.long_pending_cases||!1,required_registers:l.required_registers||!1,updated_registers:l.updated_registers||!1,registers_submitted_on_time:l.registers_submitted_on_time||!1,file_structure_six_bundle:l.file_structure_six_bundle||!1,post_disposal_bundling:l.post_disposal_bundling||!1,periodic_statements_submitted:l.periodic_statements_submitted||!1,permanent_instruction_available:l.permanent_instruction_available||!1,indexed_instruction_complete:l.indexed_instruction_complete||!1,updated_by_gov_circular:l.updated_by_gov_circular||!1,files_classified:l.files_classified||!1,binding_and_submission:l.binding_and_submission||!1,disposal_speed_satisfactory:l.disposal_speed_satisfactory||!1,inspection_issues_json:l.inspection_issues_json||[],evaluation_score:l.evaluation_score||0,work_quality:l.work_quality||"",inspector_name:l.inspector_name||"",inspector_designation:l.inspector_designation||"",supervisor_remarks:l.supervisor_remarks||"",supervisor_signature:l.supervisor_signature||""})}},[a]),A.useEffect(()=>{const u=["letter_received_logged","letter_priority_disposed","weekly_report_created","pending_register_maintained","reminders_sent_in_time","letters_bound_with_permission","class_d_letters_destroyed","required_registers","updated_registers","registers_submitted_on_time","file_structure_six_bundle","post_disposal_bundling","periodic_statements_submitted","permanent_instruction_available","indexed_instruction_complete","updated_by_gov_circular","files_classified","binding_and_submission","disposal_speed_satisfactory"].reduce((E,v)=>E+(c[v]?1:0),0);g(E=>({...E,evaluation_score:u}))},[c.letter_received_logged,c.letter_priority_disposed,c.weekly_report_created,c.pending_register_maintained,c.reminders_sent_in_time,c.letters_bound_with_permission,c.class_d_letters_destroyed,c.required_registers,c.updated_registers,c.registers_submitted_on_time,c.file_structure_six_bundle,c.post_disposal_bundling,c.periodic_statements_submitted,c.permanent_instruction_available,c.indexed_instruction_complete,c.updated_by_gov_circular,c.files_classified,c.binding_and_submission,c.disposal_speed_satisfactory]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`Office inspection photo ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`OFF-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const{error:f}=await M.from("fims_office_inspection_forms").upsert({inspection_id:a.id,...c});if(f)throw f}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const{error:C}=await M.from("fims_office_inspection_forms").insert({inspection_id:E.id,...c});if(C)throw C}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-purple-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2 text-purple-600"}),"  (Employee Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.department_name,onChange:l=>g(u=>({...u,department_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   ",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.employee_name,onChange:l=>g(u=>({...u,employee_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   ",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.designation,onChange:l=>g(u=>({...u,designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.table_number,onChange:l=>g(u=>({...u,table_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"date",value:c.date_of_joining,onChange:l=>g(u=>({...u,date_of_joining:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("textarea",{value:c.work_nature,onChange:l=>g(u=>({...u,work_nature:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3,placeholder:"   "})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   ",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Location Detected)"}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3,placeholder:"   "})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"   (Office Inspection Form)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-purple-600"}),"   (Letter Correspondence Details)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"letter_received_logged",label:"     ?"},{key:"letter_priority_disposed",label:"    ?"},{key:"weekly_report_created",label:"    ?"},{key:"pending_register_maintained",label:"   ?"},{key:"reminders_sent_in_time",label:"    ?"},{key:"letters_bound_with_permission",label:"    ?"},{key:"class_d_letters_destroyed",label:"''     ?"},{key:"long_pending_cases",label:"  /?"}].map(l=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:l.key,checked:c[l.key],onChange:u=>g(E=>({...E,[l.key]:u.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:l.key,className:"text-sm text-gray-700",children:l.label})]},l.key))})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Um,{className:"h-5 w-5 mr-2 text-purple-600"})," (Registers)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"required_registers",label:"  ?"},{key:"updated_registers",label:" ?"},{key:"registers_submitted_on_time",label:"   ?"}].map(l=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:l.key,checked:c[l.key],onChange:u=>g(E=>({...E,[l.key]:u.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:l.key,className:"text-sm text-gray-700",children:l.label})]},l.key))})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(A0,{className:"h-5 w-5 mr-2 text-purple-600"}),"  (Office Structure)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"file_structure_six_bundle",label:"    ?"},{key:"post_disposal_bundling",label:"      ?"},{key:"periodic_statements_submitted",label:"   ?"},{key:"permanent_instruction_available",label:"   ?"},{key:"indexed_instruction_complete",label:"   ?"},{key:"updated_by_gov_circular",label:"    ?"},{key:"files_classified",label:"  ?"},{key:"binding_and_submission",label:"    ?"},{key:"disposal_speed_satisfactory",label:"   ?"}].map(l=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:l.key,checked:c[l.key],onChange:u=>g(E=>({...E,[l.key]:u.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:l.key,className:"text-sm text-gray-700",children:l.label})]},l.key))})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Pn,{className:"h-5 w-5 mr-2 text-purple-600"}),"   (Work Quality Evaluation)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   (Automatic)"}),r.jsx("input",{type:"number",value:c.evaluation_score,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsxs("select",{value:c.work_quality,onChange:l=>g(u=>({...u,work_quality:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(hi,{className:"h-5 w-5 mr-2 text-purple-600"}),"  (Officer Acknowledgment)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:l=>g(u=>({...u,inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("textarea",{value:c.supervisor_remarks,onChange:l=>g(u=>({...u,supervisor_remarks:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:4,placeholder:"    "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.supervisor_signature,onChange:l=>g(u=>({...u,supervisor_signature:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  "})]})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Office Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Upload photos of the office for documentation and record keeping"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`Office photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`Office photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.department_name&&c.employee_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -   "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-purple-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-purple-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-purple-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-purple-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-cyan-50/30 rounded-xl shadow-lg border-2 border-blue-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},py=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),c=()=>{const v=["1","2","3","4","5","6","7","8","9","10","11","12"],S={};return v.forEach(O=>{S[O]={enrollment:0,attendance:0}}),S},g=()=>{const v=["1","2","3","4","5","6","7","8"],S=["","","","../","","","","..",""],O={};return v.forEach(b=>{O[b]={},S.forEach(f=>{O[b][f]=0})}),O},P=()=>{const v=["/   ","   ","   ","DIKSHA APP"," / -"," -"," "," "," "," "," "," - ","NGO   "],S={};return v.forEach(O=>{S[O]={available:!1,usage_status:"",suggestions:""}}),S},[y,T]=A.useState({visit_date:"",school_name:"",school_address:"",principal_name:"",principal_mobile:"",udise_number:"",center:"",taluka:"",district:"",management_type:"",school_achievement_self:"",school_achievement_external:"",sanctioned_posts:0,working_posts:0,present_teachers:0,class_enrollment:c(),math_teachers_count:0,khan_registered_teachers:0,khan_registered_students:0,khan_active_students:0,khan_usage_method:"",sqdp_prepared:"",sqdp_objectives_achieved:"",nipun_bharat_verification:"",learning_outcomes_assessment:"",subject_learning_outcomes:g(),officer_feedback:"",innovative_initiatives:"",suggested_changes:"",srujanrang_articles:"",future_articles:"",ngo_involvement:"",materials_usage:P(),inspector_name:"",inspector_designation:"",visit_date_inspector:""}),D=s.find(v=>v.form_type==="rajya_shaishanik");A.useEffect(()=>{D&&j(v=>({...v,category_id:D.id}))},[D,s]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),(async()=>{try{const{getAdarshShalaForm:S}=await Ct(async()=>{const{getAdarshShalaForm:b}=await Promise.resolve().then(()=>cy);return{getAdarshShalaForm:b}},void 0),O=await S(a.id);O&&T({visit_date:O.visit_date||"",school_name:O.school_name||"",school_address:O.school_address||"",principal_name:O.principal_name||"",principal_mobile:O.principal_mobile||"",udise_number:O.udise_number||"",center:O.center_name||"",taluka:O.taluka_name||"",district:O.district_name||"",management_type:O.management_type||"",school_achievement_self:O.school_achievement_self||"",school_achievement_external:O.school_achievement_external||"",sanctioned_posts:O.sanctioned_posts||0,working_posts:O.working_posts||0,present_teachers:O.present_teachers||0,class_enrollment:c(),math_teachers_count:O.math_teachers_count||0,khan_registered_teachers:O.khan_registered_teachers||0,khan_registered_students:O.khan_registered_students||0,khan_active_students:O.khan_active_students||0,khan_usage_method:O.khan_usage_method||"",sqdp_prepared:O.sqdp_prepared||"",sqdp_objectives_achieved:O.sqdp_objectives_achieved||"",nipun_bharat_verification:O.nipun_bharat_verification||"",learning_outcomes_assessment:O.learning_outcomes_assessment||"",subject_learning_outcomes:g(),officer_feedback:O.officer_feedback||"",innovative_initiatives:O.innovative_initiatives||"",suggested_changes:O.suggested_changes||"",srujanrang_articles:O.srujanrang_articles||"",future_articles:O.future_articles||"",ngo_involvement:O.ngo_involvement||"",materials_usage:P(),inspector_name:O.inspector_name||"",inspector_designation:O.inspector_designation||"",visit_date_inspector:O.visit_date_inspector||""})}catch(S){console.error("Error loading adarsh shala form data:",S)}})())},[a]),A.useEffect(()=>{a&&a.fims_school_inspection_forms&&a.fims_school_inspection_forms.length>0&&a.fims_school_inspection_forms[0]&&T(S=>({...S,...a.form_data}))},[a]);const I=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async v=>{j(S=>({...S,latitude:v.coords.latitude,longitude:v.coords.longitude,location_accuracy:v.coords.accuracy}));try{const O=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${v.coords.latitude},${v.coords.longitude}&key=undefined`)).json();if(O.results&&O.results.length>0){const b=O.results[0].formatted_address;j(f=>({...f,address:b}))}}catch(S){console.error("Error getting location name:",S)}p(!1)},v=>{console.error("Error getting location:",v),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},H=v=>{const S=Array.from(v.target.files||[]);if(x.length+S.length>5){alert(i("fims.maxPhotosAllowed"));return}_(O=>[...O,...S])},q=v=>{_(S=>S.filter((O,b)=>b!==v))},F=()=>{const v=new Date,S=v.getFullYear(),O=String(v.getMonth()+1).padStart(2,"0"),b=String(v.getDate()).padStart(2,"0"),f=String(v.getTime()).slice(-6);return`SCH-${S}${O}${b}-${f}`},V=async(v=!1)=>{try{p(!0);let S;if(a&&a.id){const f={...N,planned_date:N.planned_date||null,category_id:N.category_id||D?.id||null};if(!f.category_id)throw new Error("Category is required. Please select a valid inspection category.");const{data:C,error:U}=await M.from("fims_inspections").update({location_name:f.location_name,latitude:f.latitude,longitude:f.longitude,location_accuracy:f.location_accuracy,address:f.address,planned_date:f.planned_date,inspection_date:new Date().toISOString(),status:v?"draft":"submitted",form_data:y}).eq("id",a.id);if(U)throw U;S={id:a.id};const{error:G}=await M.from("adarsha_shala").upsert({inspection_id:a.id,visit_date:y.visit_date||new Date().toISOString().split("T")[0],school_name:y.school_name||"",school_address:y.school_address||"",principal_name:y.principal_name||"",principal_mobile_no:y.principal_mobile?parseInt(y.principal_mobile):null,udise_code:y.udise_number||"",center:y.center||"",taluka:y.taluka||"",district:y.district||"",management_type:y.management_type||"",self_assessment_grade:y.school_achievement_self||null,external_assessment_grade:y.school_achievement_external||null,sanctioned_posts:y.sanctioned_posts||0,working_posts:y.working_posts||0,present_teachers:y.present_teachers||0,math_teachers_count:y.math_teachers_count||0,registered_teachers:y.khan_registered_teachers||0,registered_students:y.khan_registered_students||0,active_students:y.khan_active_students||0,question1:y.khan_usage_method||null,question2:y.sqdp_prepared||null,question3:y.sqdp_objectives_achieved||null,question4:y.nipun_bharat_verification||null,question5:y.learning_outcomes_assessment||null,question6:y.officer_feedback||null,question7:y.innovative_initiatives||null,question8:y.suggested_changes||null,question9:y.srujanrang_articles||null,question10:y.future_articles||null,question11:y.ngo_involvement||null,class_data:JSON.stringify([{class:"1",boys:0,girls:0,total:y.class_enrollment[1]?.enrollment||0},{class:"2",boys:0,girls:0,total:y.class_enrollment[2]?.enrollment||0},{class:"3",boys:0,girls:0,total:y.class_enrollment[3]?.enrollment||0},{class:"4",boys:0,girls:0,total:y.class_enrollment[4]?.enrollment||0},{class:"5",boys:0,girls:0,total:y.class_enrollment[5]?.enrollment||0},{class:"6",boys:0,girls:0,total:y.class_enrollment[6]?.enrollment||0},{class:"7",boys:0,girls:0,total:y.class_enrollment[7]?.enrollment||0},{class:"8",boys:0,girls:0,total:y.class_enrollment[8]?.enrollment||0}]),subject_performance:JSON.stringify([{subject:"Marathi",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"English",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"Math",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"Science",class_1:y.subject_learning_outcomes[1]?.["../"]||0,class_2:y.subject_learning_outcomes[2]?.["../"]||0,class_3:y.subject_learning_outcomes[3]?.["../"]||0,class_4:y.subject_learning_outcomes[4]?.["../"]||0,class_5:y.subject_learning_outcomes[5]?.["../"]||0,class_6:y.subject_learning_outcomes[6]?.["../"]||0,class_7:y.subject_learning_outcomes[7]?.["../"]||0,class_8:y.subject_learning_outcomes[8]?.["../"]||0},{subject:"Social Studies",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0}]),material_usage:JSON.stringify(Object.keys(y.materials_usage).map(te=>({material:te,available:y.materials_usage[te].available,usage:y.materials_usage[te].usage_status,suggestions:y.materials_usage[te].suggestions})))});if(G)throw G}else{const f={...N,planned_date:N.planned_date||null,category_id:N.category_id||D?.id||null};if(!f.category_id)throw new Error("Category is required. Please select a valid inspection category.");const C=F(),{data:U,error:G}=await M.from("fims_inspections").insert({inspection_number:C,category_id:f.category_id,inspector_id:t.id,location_name:f.location_name,latitude:f.latitude,longitude:f.longitude,location_accuracy:f.location_accuracy,address:f.address,planned_date:f.planned_date,inspection_date:new Date().toISOString(),status:v?"draft":"submitted",form_data:y}).select().single();if(G)throw G;S=U;const{error:te}=await M.from("adarsha_shala").insert({inspection_id:S.id,visit_date:y.visit_date||new Date().toISOString().split("T")[0],school_name:y.school_name||"",school_address:y.school_address||"",principal_name:y.principal_name||"",principal_mobile_no:y.principal_mobile?parseInt(y.principal_mobile):null,udise_code:y.udise_number||"",center:y.center||"",taluka:y.taluka||"",district:y.district||"",management_type:y.management_type||"",self_assessment_grade:y.school_achievement_self||null,external_assessment_grade:y.school_achievement_external||null,sanctioned_posts:y.sanctioned_posts||0,working_posts:y.working_posts||0,present_teachers:y.present_teachers||0,math_teachers_count:y.math_teachers_count||0,registered_teachers:y.khan_registered_teachers||0,registered_students:y.khan_registered_students||0,active_students:y.khan_active_students||0,question1:y.khan_usage_method||null,question2:y.sqdp_prepared||null,question3:y.sqdp_objectives_achieved||null,question4:y.nipun_bharat_verification||null,question5:y.learning_outcomes_assessment||null,question6:y.officer_feedback||null,question7:y.innovative_initiatives||null,question8:y.suggested_changes||null,question9:y.srujanrang_articles||null,question10:y.future_articles||null,question11:y.ngo_involvement||null,class_data:JSON.stringify([{class:"1",boys:0,girls:0,total:y.class_enrollment[1]?.enrollment||0},{class:"2",boys:0,girls:0,total:y.class_enrollment[2]?.enrollment||0},{class:"3",boys:0,girls:0,total:y.class_enrollment[3]?.enrollment||0},{class:"4",boys:0,girls:0,total:y.class_enrollment[4]?.enrollment||0},{class:"5",boys:0,girls:0,total:y.class_enrollment[5]?.enrollment||0},{class:"6",boys:0,girls:0,total:y.class_enrollment[6]?.enrollment||0},{class:"7",boys:0,girls:0,total:y.class_enrollment[7]?.enrollment||0},{class:"8",boys:0,girls:0,total:y.class_enrollment[8]?.enrollment||0}]),subject_performance:JSON.stringify([{subject:"Marathi",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"English",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"Math",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0},{subject:"Science",class_1:y.subject_learning_outcomes[1]?.["../"]||0,class_2:y.subject_learning_outcomes[2]?.["../"]||0,class_3:y.subject_learning_outcomes[3]?.["../"]||0,class_4:y.subject_learning_outcomes[4]?.["../"]||0,class_5:y.subject_learning_outcomes[5]?.["../"]||0,class_6:y.subject_learning_outcomes[6]?.["../"]||0,class_7:y.subject_learning_outcomes[7]?.["../"]||0,class_8:y.subject_learning_outcomes[8]?.["../"]||0},{subject:"Social Studies",class_1:y.subject_learning_outcomes[1]?.||0,class_2:y.subject_learning_outcomes[2]?.||0,class_3:y.subject_learning_outcomes[3]?.||0,class_4:y.subject_learning_outcomes[4]?.||0,class_5:y.subject_learning_outcomes[5]?.||0,class_6:y.subject_learning_outcomes[6]?.||0,class_7:y.subject_learning_outcomes[7]?.||0,class_8:y.subject_learning_outcomes[8]?.||0}]),material_usage:JSON.stringify(Object.keys(y.materials_usage).map(se=>({material:se,available:y.materials_usage[se].available,usage:y.materials_usage[se].usage_status,suggestions:y.materials_usage[se].suggestions})))});if(te)throw te}x.length>0&&await Q(S.id);const O=a&&a.id,b=i(v?O?"fims.draftUpdatedSuccessfully":"fims.draftSavedSuccessfully":O?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(b),n(),e()}catch(S){console.error("Error saving inspection:",S),alert("Error saving inspection: "+S.message)}finally{p(!1)}},Q=async v=>{if(x.length!==0){k(!0);try{for(let S=0;S<x.length;S++){const O=x[S],b=O.name.split(".").pop(),f=`rajya_shaishanik_${v}_${Date.now()}_${S}.${b}`,{data:C,error:U}=await M.storage.from("field-visit-images").upload(f,O);if(U)throw U;const{data:{publicUrl:G}}=M.storage.from("field-visit-images").getPublicUrl(f),{error:te}=await M.from("fims_inspection_photos").insert({inspection_id:v,photo_url:G,photo_name:O.name,description:`Rajya Shaishanik inspection photo ${S+1}`,photo_order:S+1});if(te)throw te}}catch(S){throw console.error("Error uploading photos:",S),S}finally{k(!1)}}},X=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(v=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=v?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:v}),v<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>v?"bg-green-600":"bg-gray-200"}`})]},v))}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(mc,{className:"h-5 w-5 mr-2 text-green-600"}),"   (Basic School Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"date",value:y.visit_date,onChange:v=>T(S=>({...S,visit_date:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:y.school_name,onChange:v=>T(S=>({...S,school_name:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:y.school_address,onChange:v=>T(S=>({...S,school_address:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:2,placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:y.principal_name,onChange:v=>T(S=>({...S,principal_name:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"tel",value:y.principal_mobile,onChange:v=>T(S=>({...S,principal_mobile:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:y.udise_number,onChange:v=>T(S=>({...S,udise_number:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"UDISE   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:y.center,onChange:v=>T(S=>({...S,center:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:y.taluka,onChange:v=>T(S=>({...S,taluka:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:y.district,onChange:v=>T(S=>({...S,district:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsxs("select",{value:y.management_type,onChange:v=>T(S=>({...S,management_type:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:"  "}),r.jsx("option",{value:"government",children:""}),r.jsx("option",{value:"aided",children:""}),r.jsx("option",{value:"private",children:""}),r.jsx("option",{value:"other",children:""})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"  (School Achievement)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"- "}),r.jsxs("select",{value:y.school_achievement_self,onChange:v=>T(S=>({...S,school_achievement_self:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"A",children:"A"}),r.jsx("option",{value:"B",children:"B"}),r.jsx("option",{value:"C",children:"C"}),r.jsx("option",{value:"D",children:"D"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsxs("select",{value:y.school_achievement_external,onChange:v=>T(S=>({...S,school_achievement_external:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"A",children:"A"}),r.jsx("option",{value:"B",children:"B"}),r.jsx("option",{value:"C",children:"C"}),r.jsx("option",{value:"D",children:"D"})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2 text-green-600"}),"   (Teacher Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"number",value:y.sanctioned_posts,onChange:v=>T(S=>({...S,sanctioned_posts:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"number",value:y.working_posts,onChange:v=>T(S=>({...S,working_posts:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),r.jsx("input",{type:"number",value:y.present_teachers,onChange:v=>T(S=>({...S,present_teachers:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"    "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border border-gray-300",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:""}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:""}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:""})]})}),r.jsxs("tbody",{children:[["1","2","3","4","5","6","7","8","9","10","11","12"].map(v=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:v}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:y.class_enrollment[v]?.enrollment||0,onChange:S=>T(O=>({...O,class_enrollment:{...O.class_enrollment,[v]:{...O.class_enrollment[v],enrollment:parseInt(S.target.value)||0}}})),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",min:"0",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:y.class_enrollment[v]?.attendance||0,onChange:S=>T(O=>({...O,class_enrollment:{...O.class_enrollment,[v]:{...O.class_enrollment[v],attendance:parseInt(S.target.value)||0}}})),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",min:"0",disabled:m})})]},v)),r.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:""}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:Object.values(y.class_enrollment).reduce((v,S)=>v+(S.enrollment||0),0)}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:Object.values(y.class_enrollment).reduce((v,S)=>v+(S.attendance||0),0)})]})]})]})})]})]}),L=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("fims.locationName")," *"]}),r.jsx("input",{type:"text",value:N.location_name,onChange:v=>j(S=>({...S,location_name:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:i("fims.enterLocationName"),required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:v=>j(S=>({...S,planned_date:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:I,disabled:h||m,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Location Detected)"}),r.jsx("textarea",{value:N.address,onChange:v=>j(S=>({...S,address:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:i("fims.enterFullAddress"),disabled:m})]})]})]}),B=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"   (Educational Assessment Form)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(pc,{className:"h-5 w-5 mr-2 text-green-600"}),"SCERTM,    -       "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"     (   )"}),r.jsx("input",{type:"number",value:y.math_teachers_count,onChange:v=>T(S=>({...S,math_teachers_count:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khan Academy     "}),r.jsx("input",{type:"number",value:y.khan_registered_teachers,onChange:v=>T(S=>({...S,khan_registered_teachers:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khan Academy     "}),r.jsx("input",{type:"number",value:y.khan_registered_students,onChange:v=>T(S=>({...S,khan_registered_students:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khan Academy      "}),r.jsx("input",{type:"number",value:y.khan_active_students,onChange:v=>T(S=>({...S,khan_active_students:parseInt(v.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"0",disabled:m})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:". SCERTM,   Khan Academy            ?"}),r.jsx("textarea",{value:y.khan_usage_method,onChange:v=>T(S=>({...S,khan_usage_method:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"Khan Academy      ",disabled:m})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".   -  SQDP    -   SQDP    ?"}),r.jsx("textarea",{value:y.sqdp_prepared,onChange:v=>T(S=>({...S,sqdp_prepared:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"SQDP    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:". -      (SQDP)      ?   ."}),r.jsx("textarea",{value:y.sqdp_objectives_achieved,onChange:v=>T(S=>({...S,sqdp_objectives_achieved:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"SQDP     ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".       (  )    ?    ,            ."}),r.jsx("textarea",{value:y.nipun_bharat_verification,onChange:v=>T(S=>({...S,nipun_bharat_verification:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"     ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".              (    ,     )"}),r.jsx("textarea",{value:y.learning_outcomes_assessment,onChange:v=>T(S=>({...S,learning_outcomes_assessment:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"    ",disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"   "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border border-gray-300",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:"../"}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:".."}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""})]})}),r.jsxs("tbody",{children:[["1","2","3","4","5","6","7","8"].map(v=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-2 py-1 font-medium text-sm",children:v}),["","","","../","","","","..",""].map(S=>r.jsx("td",{className:"border border-gray-300 px-1 py-1",children:r.jsx("input",{type:"number",value:y.subject_learning_outcomes[v]?.[S]||0,onChange:O=>T(b=>({...b,subject_learning_outcomes:{...b.subject_learning_outcomes,[v]:{...b.subject_learning_outcomes[v],[S]:parseInt(O.target.value)||0}}})),className:"w-full px-1 py-1 border border-gray-200 rounded text-xs",min:"0",disabled:m})},S))]},v)),r.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[r.jsx("td",{className:"border border-gray-300 px-2 py-1 text-sm",children:""}),["","","","../","","","","..",""].map(v=>r.jsx("td",{className:"border border-gray-300 px-2 py-1 text-sm",children:Object.keys(y.subject_learning_outcomes).reduce((S,O)=>S+(y.subject_learning_outcomes[O]?.[v]||0),0)},v))]})]})]})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".                  /     ."}),r.jsx("textarea",{value:y.officer_feedback,onChange:v=>T(S=>({...S,officer_feedback:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".           ?  ?"}),r.jsx("textarea",{value:y.innovative_initiatives,onChange:v=>T(S=>({...S,innovative_initiatives:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".                       ?"}),r.jsx("textarea",{value:y.suggested_changes,onChange:v=>T(S=>({...S,suggested_changes:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".           ?         "}),r.jsx("textarea",{value:y.srujanrang_articles,onChange:v=>T(S=>({...S,srujanrang_articles:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".         ?"}),r.jsx("textarea",{value:y.future_articles,onChange:v=>T(S=>({...S,future_articles:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:".        ?       ."}),r.jsx("textarea",{value:y.ngo_involvement,onChange:v=>T(S=>({...S,ngo_involvement:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"    ",disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"  /  - "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border border-gray-300",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:".."}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:""}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:"  ?"}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:"-   "}),r.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm",children:" "})]})}),r.jsx("tbody",{children:Object.keys(y.materials_usage).map((v,S)=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-2 py-1 text-sm",children:S+1}),r.jsx("td",{className:"border border-gray-300 px-2 py-1 text-sm",children:v}),r.jsx("td",{className:"border border-gray-300 px-1 py-1",children:r.jsx("input",{type:"checkbox",checked:y.materials_usage[v]?.available||!1,onChange:O=>T(b=>({...b,materials_usage:{...b.materials_usage,[v]:{...b.materials_usage[v],available:O.target.checked}}})),className:"w-4 h-4",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-1 py-1",children:r.jsx("textarea",{value:y.materials_usage[v]?.usage_status||"",onChange:O=>T(b=>({...b,materials_usage:{...b.materials_usage,[v]:{...b.materials_usage[v],usage_status:O.target.value}}})),className:"w-full px-1 py-1 border border-gray-200 rounded text-xs",rows:2,disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-1 py-1",children:r.jsx("textarea",{value:y.materials_usage[v]?.suggestions||"",onChange:O=>T(b=>({...b,materials_usage:{...b.materials_usage,[v]:{...b.materials_usage[v],suggestions:O.target.value}}})),className:"w-full px-1 py-1 border border-gray-200 rounded text-xs",rows:2,disabled:m})})]},v))})]})})]})]}),l=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),!m&&r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload School Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Upload photos of the school for documentation and record keeping"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:H,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((v,S)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(v),alt:`School photo ${S+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>q(S),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:v.name})]},S))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((v,S)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:v.photo_url,alt:v.description||`School photo ${S+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:v.photo_name||`Photo ${S+1}`}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.description})]},v.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(dc,{className:"h-5 w-5 mr-2 text-green-600"}),"   (Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:y.inspector_name,onChange:v=>T(S=>({...S,inspector_name:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:y.inspector_designation,onChange:v=>T(S=>({...S,inspector_designation:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:y.visit_date_inspector,onChange:v=>T(S=>({...S,visit_date_inspector:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]})]})]})]}),u=()=>{switch(o){case 1:return ie();case 2:return L();case 3:return B();case 4:return l();default:return null}},E=()=>{switch(o){case 1:return y.visit_date&&y.school_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-2",children:"     , , "}),r.jsx("h2",{className:"text-md md:text-lg font-semibold text-gray-700",children:"   "})]}),r.jsx("div",{className:"w-20"})]}),X(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-green-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-green-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-green-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-green-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-green-50/30 to-emerald-50/30 rounded-xl shadow-lg border-2 border-green-200 p-4 md:p-6 mb-4 md:mb-6",children:u()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(v=>Math.max(1,v-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>V(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>V(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(v=>Math.min(4,v+1)),disabled:!E()||m,className:"px-4 md:px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},fy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({visit_date:"",work_name:"",account_head:"",admin_approval_number:"",admin_approval_date:"",admin_approval_amount:"",technical_approval_number:"",technical_approval_date:"",road_length_building_area:"",contract_number:"",contract_amount:"",contract_percentage:"",contractor_name:"",work_start_order_number:"",work_start_date:"",work_duration_from:"",work_duration_to:"",extension_details:"",extension_reasons:"",approved_estimate_scope:"",current_work_status:"",measurement_book_page:"",payment_status:"",inspector_name:"",inspector_designation:"",inspection_date:""}),P=s.find(l=>l.form_type==="bandhkam_vibhag1");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`bandhkam_vibhag1_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`Bandhkam Vibhag inspection photo ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`BDK-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const{error:f}=await M.from("bandhakam_vibhag1").upsert({inspection_id:a.id,work_name:c.work_name,budget_head:c.account_head,admin_approval_details:`${c.admin_approval_number} | ${c.admin_approval_date} | ${c.admin_approval_amount}`,technical_approval_details:`${c.technical_approval_number} | ${c.technical_approval_date}`,road_length_building_area:c.road_length_building_area,karnama_details:`${c.contract_number} | ${c.contract_amount} | ${c.contract_percentage}`,contractor_name:c.contractor_name,work_order_details:`${c.work_start_order_number} | ${c.work_start_date} | ${c.work_duration_from} - ${c.work_duration_to}`,extension_details:`${c.extension_details} | Reasons: ${c.extension_reasons}`,estimate_scope:c.approved_estimate_scope,current_work_status:c.current_work_status,measurement_book_details:c.measurement_book_page,payment_status:c.payment_status});if(f)throw f}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const{error:C}=await M.from("bandhakam_vibhag1").insert({inspection_id:E.id,work_name:c.work_name,budget_head:c.account_head,admin_approval_details:`${c.admin_approval_number} | ${c.admin_approval_date} | ${c.admin_approval_amount}`,technical_approval_details:`${c.technical_approval_number} | ${c.technical_approval_date}`,road_length_building_area:c.road_length_building_area,karnama_details:`${c.contract_number} | ${c.contract_amount} | ${c.contract_percentage}`,contractor_name:c.contractor_name,work_order_details:`${c.work_start_order_number} | ${c.work_start_date} | ${c.work_duration_from} - ${c.work_duration_to}`,extension_details:`${c.extension_details} | Reasons: ${c.extension_reasons}`,estimate_scope:c.approved_estimate_scope,current_work_status:c.current_work_status,measurement_book_details:c.measurement_book_page,payment_status:c.payment_status});if(C)throw C}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-orange-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-orange-600"}),"  (Basic Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"date",value:c.visit_date,onChange:l=>g(u=>({...u,visit_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"text",value:c.work_name,onChange:l=>g(u=>({...u,work_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.account_head,onChange:l=>g(u=>({...u,account_head:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.contractor_name,onChange:l=>g(u=>({...u,contractor_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",disabled:m})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"    (Construction Department Inspection Form)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-orange-600"}),"  (Administrative Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.admin_approval_number,onChange:l=>g(u=>({...u,admin_approval_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"date",value:c.admin_approval_date,onChange:l=>g(u=>({...u,admin_approval_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.admin_approval_amount,onChange:l=>g(u=>({...u,admin_approval_amount:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.technical_approval_number,onChange:l=>g(u=>({...u,technical_approval_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"date",value:c.technical_approval_date,onChange:l=>g(u=>({...u,technical_approval_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  /  "}),r.jsx("input",{type:"text",value:c.road_length_building_area,onChange:l=>g(u=>({...u,road_length_building_area:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"/  ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx($0,{className:"h-5 w-5 mr-2 text-orange-600"}),"  (Contract Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.contract_number,onChange:l=>g(u=>({...u,contract_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.contract_amount,onChange:l=>g(u=>({...u,contract_amount:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ( / )"}),r.jsx("input",{type:"text",value:c.contract_percentage,onChange:l=>g(u=>({...u,contract_percentage:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),r.jsx("input",{type:"text",value:c.work_start_order_number,onChange:l=>g(u=>({...u,work_start_order_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:c.work_start_date,onChange:l=>g(u=>({...u,work_start_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   ()"}),r.jsx("input",{type:"date",value:c.work_duration_from,onChange:l=>g(u=>({...u,work_duration_from:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   ()"}),r.jsx("input",{type:"date",value:c.work_duration_to,onChange:l=>g(u=>({...u,work_duration_to:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-orange-600"}),"    (Work Status and Details)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"     "}),r.jsx("textarea",{value:c.extension_details,onChange:l=>g(u=>({...u,extension_details:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:c.extension_reasons,onChange:l=>g(u=>({...u,extension_reasons:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"     "}),r.jsx("textarea",{value:c.approved_estimate_scope,onChange:l=>g(u=>({...u,approved_estimate_scope:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (  )"}),r.jsx("textarea",{value:c.current_work_status,onChange:l=>g(u=>({...u,current_work_status:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:4,placeholder:"  ",disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    "}),r.jsx("input",{type:"text",value:c.measurement_book_page,onChange:l=>g(u=>({...u,measurement_book_page:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"     ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"     "}),r.jsx("input",{type:"text",value:c.payment_status,onChange:l=>g(u=>({...u,payment_status:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",disabled:m})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-orange-600"}),"  (Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:l=>g(u=>({...u,inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:m})]})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Construction Work Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Upload photos of the construction work for documentation and record keeping"}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`Construction photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`Construction photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.visit_date&&c.work_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -   "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-orange-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-orange-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-orange-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-orange-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-orange-50/30 to-yellow-50/30 rounded-xl shadow-lg border-2 border-orange-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},gy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({inspection_date:"",officer_1_name:"",officer_1_designation:"",officer_2_name:"",officer_2_designation:"",officer_3_name:"",officer_3_designation:"",officer_4_name:"",officer_4_designation:"",current_work_status:"",work_quality:"",defect_liability_period:"",work_name:"",inspection_report:"",inspector_name:"",inspector_designation:""}),P=s.find(l=>l.form_type==="bandhkam_vibhag2");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`bandhkam_vibhag2_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`Bandhkam Vibhag 2 inspection photo ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`BDK2-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const f=[c.officer_1_name&&c.officer_1_designation?{name:c.officer_1_name,designation:c.officer_1_designation}:null,c.officer_2_name&&c.officer_2_designation?{name:c.officer_2_name,designation:c.officer_2_designation}:null,c.officer_3_name&&c.officer_3_designation?{name:c.officer_3_name,designation:c.officer_3_designation}:null,c.officer_4_name&&c.officer_4_designation?{name:c.officer_4_name,designation:c.officer_4_designation}:null].filter(U=>U!==null),{error:C}=await M.from("bandhakam_vibhag2").upsert({inspection_id:a.id,inspection_date:c.inspection_date,officers:f,current_work_status:c.current_work_status,work_quality:c.work_quality,liability_period:c.defect_liability_period,report_work_name:c.work_name,detailed_report:c.inspection_report});if(C)throw C}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const C=[c.officer_1_name&&c.officer_1_designation?{name:c.officer_1_name,designation:c.officer_1_designation}:null,c.officer_2_name&&c.officer_2_designation?{name:c.officer_2_name,designation:c.officer_2_designation}:null,c.officer_3_name&&c.officer_3_designation?{name:c.officer_3_name,designation:c.officer_3_designation}:null,c.officer_4_name&&c.officer_4_designation?{name:c.officer_4_name,designation:c.officer_4_designation}:null].filter(G=>G!==null),{error:U}=await M.from("bandhakam_vibhag2").insert({inspection_id:E.id,inspection_date:c.inspection_date,officers:C,current_work_status:c.current_work_status,work_quality:c.work_quality,liability_period:c.defect_liability_period,report_work_name:c.work_name,detailed_report:c.inspection_report});if(U)throw U}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-teal-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-teal-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(En,{className:"h-5 w-5 mr-2 text-teal-600"}),"  (Basic Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.work_name,onChange:l=>g(u=>({...u,work_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2 text-teal-600"}),"  /  (Present Officers/Staff)"]}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["/ ",l," - "]}),r.jsx("input",{type:"text",value:c[`officer_${l}_name`],onChange:u=>g(E=>({...E,[`officer_${l}_name`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c[`officer_${l}_designation`],onChange:u=>g(E=>({...E,[`officer_${l}_designation`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]},l))})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"   - (Construction Department Inspection Form-2)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(hc,{className:"h-5 w-5 mr-2 text-teal-600"}),"    (Work Status and Quality)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:c.current_work_status,onChange:l=>g(u=>({...u,current_work_status:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",rows:4,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsxs("select",{value:c.work_quality,onChange:l=>g(u=>({...u,work_quality:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.defect_liability_period,onChange:l=>g(u=>({...u,defect_liability_period:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"   ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-teal-600"}),"  (Inspection Report)"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:c.inspection_report,onChange:l=>g(u=>({...u,inspection_report:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",rows:6,placeholder:"   ",disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-teal-600"}),"  (Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:l=>g(u=>({...u,inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Construction Work Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Upload photos of the construction work for documentation and record keeping"}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`Construction photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`Construction photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.inspection_date&&c.work_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -   -"]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-teal-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-teal-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-teal-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-teal-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-teal-50/30 to-cyan-50/30 rounded-xl shadow-lg border-2 border-teal-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},xy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({visit_date:"",row_1_district_name:"",row_1_project_name:"",row_1_total_anganwadi_centers:"",row_1_total_supervisors:"",row_1_supervisor_target_achieved:"",row_1_bavipraa_target_achieved:"",row_1_dpo_project_visit_details:"",row_2_district_name:"",row_2_project_name:"",row_2_total_anganwadi_centers:"",row_2_total_supervisors:"",row_2_supervisor_target_achieved:"",row_2_bavipraa_target_achieved:"",row_2_dpo_project_visit_details:"",row_3_district_name:"",row_3_project_name:"",row_3_total_anganwadi_centers:"",row_3_total_supervisors:"",row_3_supervisor_target_achieved:"",row_3_bavipraa_target_achieved:"",row_3_dpo_project_visit_details:"",additional_notes:"",inspector_name:"",inspector_designation:"",inspection_date:""}),P=s.find(l=>l.form_type==="zp_dar_mahinyala");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`zp_dar_mahinyala_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`ZP Dar Mahinyala inspection photo ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`ZPM-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const{error:f}=await M.from("bhet_praptra").delete().eq("inspection_id",a.id);if(f)throw f;const C=[];for(let U=1;U<=3;U++){const G=c[`row_${U}_district_name`],te=c[`row_${U}_project_name`];if(G||te){const se=c[`row_${U}_dpo_project_visit_details`];let oe="",pe=0;if(se){se.toLowerCase().includes("")&&(oe="");const Ve=se.match(/(\d+)/);Ve&&(pe=parseInt(Ve[1],10))}C.push({inspection_id:a.id,row_no:U,district_name:G||"",project_name:te||"",total_anganwadi_centers:parseInt(c[`row_${U}_total_anganwadi_centers`])||0,total_supervisors:parseInt(c[`row_${U}_total_supervisors`])||0,supervisors_achieved_centers_count:parseInt(c[`row_${U}_supervisor_target_achieved`])||0,bavipra_achieved_centers_count:parseInt(c[`row_${U}_bavipraa_target_achieved`])||0,dpo_visit_details:se||"",project_visit_status:oe,total_centers_visited:pe})}}if(C.length>0){const{error:U}=await M.from("bhet_praptra").insert(C);if(U)throw U}}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const C=[];for(let U=1;U<=3;U++){const G=c[`row_${U}_district_name`],te=c[`row_${U}_project_name`];if(G||te){const se=c[`row_${U}_dpo_project_visit_details`];let oe="",pe=0;if(se){se.toLowerCase().includes("")&&(oe="");const Ve=se.match(/(\d+)/);Ve&&(pe=parseInt(Ve[1],10))}C.push({inspection_id:E.id,row_no:U,district_name:G||"",project_name:te||"",total_anganwadi_centers:parseInt(c[`row_${U}_total_anganwadi_centers`])||0,total_supervisors:parseInt(c[`row_${U}_total_supervisors`])||0,supervisors_achieved_centers_count:parseInt(c[`row_${U}_supervisor_target_achieved`])||0,bavipra_achieved_centers_count:parseInt(c[`row_${U}_bavipraa_target_achieved`])||0,dpo_visit_details:se||"",project_visit_status:oe,total_centers_visited:pe})}}if(C.length>0){const{error:U}=await M.from("bhet_praptra").insert(C);if(U)throw U}}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-indigo-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(En,{className:"h-5 w-5 mr-2 text-indigo-600"}),"  (Basic Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"date",value:c.visit_date,onChange:l=>g(u=>({...u,visit_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-indigo-600"}),"  (Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:l=>g(u=>({...u,inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"     (  )"}),[1,2,3].map(l=>r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(za,{className:"h-5 w-5 mr-2 text-indigo-600"})," ",l,"  (Project ",l," Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c[`row_${l}_district_name`],onChange:u=>g(E=>({...E,[`row_${l}_district_name`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  /   "}),r.jsx("input",{type:"text",value:c[`row_${l}_project_name`],onChange:u=>g(E=>({...E,[`row_${l}_project_name`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    "}),r.jsx("input",{type:"number",value:c[`row_${l}_total_anganwadi_centers`],onChange:u=>g(E=>({...E,[`row_${l}_total_anganwadi_centers`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),r.jsx("input",{type:"number",value:c[`row_${l}_total_supervisors`],onChange:u=>g(E=>({...E,[`row_${l}_total_supervisors`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"      "}),r.jsx("input",{type:"number",value:c[`row_${l}_supervisor_target_achieved`],onChange:u=>g(E=>({...E,[`row_${l}_supervisor_target_achieved`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"       "}),r.jsx("input",{type:"number",value:c[`row_${l}_bavipraa_target_achieved`],onChange:u=>g(E=>({...E,[`row_${l}_bavipraa_target_achieved`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   ()      "}),r.jsx("textarea",{value:c[`row_${l}_dpo_project_visit_details`],onChange:u=>g(E=>({...E,[`row_${l}_dpo_project_visit_details`]:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"  (/)      ",disabled:m})]})]})]},l)),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-indigo-600"}),"  (Additional Notes)"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    "}),r.jsx("textarea",{value:c.additional_notes,onChange:l=>g(u=>({...u,additional_notes:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:4,placeholder:"   /           . //                    .",disabled:m})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload ZP Monthly Report Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Upload photos related to the monthly ZP report for documentation"}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`ZP report photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`ZP report photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.visit_date;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -     "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-indigo-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-indigo-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-indigo-600 font-medium":"text-gray-500"}`,children:"ZP  "}),r.jsx("div",{className:`${o===4?"text-indigo-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-indigo-50/30 to-purple-50/30 rounded-xl shadow-lg border-2 border-indigo-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},_y=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({inspector_name:"",inspection_date:"",work_name:"",state_quality_inspector_name:"",state_quality_inspector_designation:""}),P=s.find(l=>l.form_type==="rajya_gunwatta_nirikshak");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`rajya_gunwatta_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`     ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`RGN-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const{error:f}=await M.from("rajya_tapasani").upsert({inspection_id:a.id,inspector_name:c.state_quality_inspector_name,inspection_date:c.inspection_date,work_name:c.work_name,photos:x.map((C,U)=>({name:C.name,size:C.size,type:C.type,order:U+1}))});if(f)throw f}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const{error:C}=await M.from("rajya_tapasani").insert({inspection_id:E.id,inspector_name:c.state_quality_inspector_name,inspection_date:c.inspection_date,work_name:c.work_name,photos:x.map((U,G)=>({name:U.name,size:U.size,type:U.type,order:G+1}))});if(C)throw C}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-emerald-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-emerald-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(dc,{className:"h-5 w-5 mr-2 text-emerald-600"}),"    (State Quality Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"     *"}),r.jsx("input",{type:"text",value:c.state_quality_inspector_name,onChange:l=>g(u=>({...u,state_quality_inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"     ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.state_quality_inspector_designation,onChange:l=>g(u=>({...u,state_quality_inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.work_name,onChange:l=>g(u=>({...u,work_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"      (State Quality Inspector Inspection Report)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-emerald-600"}),"  (Inspector Information)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"   ",disabled:m})]})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 p-6 rounded-lg border-2 border-emerald-200",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Tr,{className:"h-5 w-5 mr-2 text-emerald-600"}),"    (Work Inspection Photography)"]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-emerald-200",children:[r.jsx("p",{className:"text-sm text-emerald-800 font-medium mb-2",children:"   "}),r.jsx("p",{className:"text-sm text-emerald-700",children:"       .      ."})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"    (Work Inspection Photography)"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Work Inspection Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"       "}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`Work inspection photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`Work inspection photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.state_quality_inspector_name&&c.inspection_date&&c.work_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -    "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-emerald-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-emerald-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-emerald-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-emerald-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-emerald-50/30 to-green-50/30 rounded-xl shadow-lg border-2 border-emerald-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},yy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({inspection_date:"",inspector_name:"",inspector_designation:"",work_name:"",gram_panchayat:"",village:"",tehsil:"",district:"",work_type:"",annual_action_plan_included:"",annual_action_plan_year:"",implementation_agency:"",work_code:"",estimated_amount_unskilled:"",estimated_amount_skilled:"",estimated_amount_total:"",dsr_department:"",dsr_year:"",nrega_soft_records_correct:"",nrega_soft_form_a:"",nrega_soft_form_b:"",work_under_convergence:"",convergence_department:"",convergence_fund_details:"",mgnrega_unskilled:"",mgnrega_skilled:"",mgnrega_total:"",other_dept_unskilled:"",other_dept_skilled:"",other_dept_total:"",attendance_register_workers:"",actual_workers_present:"",shelter_for_workers:"",first_aid_kit:"",drinking_water:"",childcare_for_workers_children:"",current_work_status:"",expenses_unskilled:"",expenses_skilled:"",expenses_total:"",previous_attendance_closure_date:"",wages_deposited_timely:"",delay_compensation_provided:"",aadhaar_based_payment:"",payment_failure_reasons:"",workers_have_job_cards:"",job_card_records_updated:"",work_file_updated:"",citizen_information_board:"",work_measurement_done:"",measurement_book_number:"",all_measurements_recorded:"",senior_technical_officer_check:"",measurement_discrepancy:"",discrepancy_details:"",work_geotagged:"",other_important_matters:"",overall_work_quality:"",work_utility_feedback:"",inspection_date_final:"",inspection_location:"",inspector_name_final:"",inspector_designation_final:"",inspector_office:""}),P=s.find(l=>l.form_type==="mahatma_gandhi_rojgar_hami");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`mahatma_gandhi_rojgar_hami_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`MGNREGA work photo ${u+1}`});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`MGRH-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O;const{error:f}=await M.from("mahatma_gandhi_rastriya_gramin_tapasani_praptra").upsert({inspection_id:a.id,inspection_date:c.inspection_date||new Date().toISOString().split("T")[0],officer_name:c.inspector_name,work_name:c.work_name,gram_panchayat:c.gram_panchayat,village:c.village,tehsil:c.tehsil,district:c.district,work_type:c.work_type,annual_plan:c.annual_action_plan_included,plan_year:c.annual_action_plan_year,implementing_agency:c.implementation_agency,work_code:c.work_code,unskilled_amount:parseFloat(c.estimated_amount_unskilled)||0,skilled_amount:parseFloat(c.estimated_amount_skilled)||0,total_amount:parseFloat(c.estimated_amount_total)||0,dsr_department:c.dsr_department,dsr_year:c.dsr_year,nrega_records:c.nrega_soft_records_correct,nrega_form_a:c.nrega_soft_form_a,nrega_form_b:c.nrega_soft_form_b,convergence:c.work_under_convergence,department_name:c.convergence_department,fund_details:c.convergence_fund_details,mgnrega_unskilled:parseFloat(c.mgnrega_unskilled)||0,mgnrega_skilled:parseFloat(c.mgnrega_skilled)||0,mgnrega_total:parseFloat(c.mgnrega_total)||0,other_dept_unskilled:parseFloat(c.other_dept_unskilled)||0,other_dept_skilled:parseFloat(c.other_dept_skilled)||0,other_dept_total:parseFloat(c.other_dept_total)||0,recorded_workers:parseInt(c.attendance_register_workers)||0,present_workers:parseInt(c.actual_workers_present)||0,shelter:c.shelter_for_workers,first_aid:c.first_aid_kit,drinking_water:c.drinking_water,child_care:c.childcare_for_workers_children,current_status:c.current_work_status,expense_unskilled:parseFloat(c.expenses_unskilled)||0,expense_skilled:parseFloat(c.expenses_skilled)||0,expense_total:parseFloat(c.expenses_total)||0,attendance_close_date:c.previous_attendance_closure_date||new Date().toISOString().split("T")[0],wage_deposited:c.wages_deposited_timely,delay_compensation:c.delay_compensation_provided,aadhaar_wage:c.aadhaar_based_payment,wage_not_deposited_reasons:c.payment_failure_reasons,job_card_available:c.workers_have_job_cards,job_card_updated:c.job_card_records_updated,work_file_updated:c.work_file_updated,cib_available:c.citizen_information_board,measurement_taken:c.work_measurement_done,measurement_book_no:c.measurement_book_number,all_measurements_recorded:c.all_measurements_recorded,senior_officer_check:c.senior_technical_officer_check,measurement_discrepancy:c.measurement_discrepancy,discrepancy_details:c.discrepancy_details,geo_tagging:c.work_geotagged,other_important_matters:c.other_important_matters,overall_quality:c.overall_work_quality,utility_feedback:c.work_utility_feedback,final_date:c.inspection_date_final||new Date().toISOString().split("T")[0],final_place:c.inspection_location,final_officer_name:c.inspector_name_final,final_designation:c.inspector_designation_final,final_office:c.inspector_office});if(f)throw f}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b;const{error:C}=await M.from("mahatma_gandhi_rastriya_gramin_tapasani_praptra").insert({inspection_id:E.id,inspection_date:c.inspection_date||new Date().toISOString().split("T")[0],officer_name:c.inspector_name,work_name:c.work_name,gram_panchayat:c.gram_panchayat,village:c.village,tehsil:c.tehsil,district:c.district,work_type:c.work_type,annual_plan:c.annual_action_plan_included,plan_year:c.annual_action_plan_year,implementing_agency:c.implementation_agency,work_code:c.work_code,unskilled_amount:parseFloat(c.estimated_amount_unskilled)||0,skilled_amount:parseFloat(c.estimated_amount_skilled)||0,total_amount:parseFloat(c.estimated_amount_total)||0,dsr_department:c.dsr_department,dsr_year:c.dsr_year,nrega_records:c.nrega_soft_records_correct,nrega_form_a:c.nrega_soft_form_a,nrega_form_b:c.nrega_soft_form_b,convergence:c.work_under_convergence,department_name:c.convergence_department,fund_details:c.convergence_fund_details,mgnrega_unskilled:parseFloat(c.mgnrega_unskilled)||0,mgnrega_skilled:parseFloat(c.mgnrega_skilled)||0,mgnrega_total:parseFloat(c.mgnrega_total)||0,other_dept_unskilled:parseFloat(c.other_dept_unskilled)||0,other_dept_skilled:parseFloat(c.other_dept_skilled)||0,other_dept_total:parseFloat(c.other_dept_total)||0,recorded_workers:parseInt(c.attendance_register_workers)||0,present_workers:parseInt(c.actual_workers_present)||0,shelter:c.shelter_for_workers,first_aid:c.first_aid_kit,drinking_water:c.drinking_water,child_care:c.childcare_for_workers_children,current_status:c.current_work_status,expense_unskilled:parseFloat(c.expenses_unskilled)||0,expense_skilled:parseFloat(c.expenses_skilled)||0,expense_total:parseFloat(c.expenses_total)||0,attendance_close_date:c.previous_attendance_closure_date||new Date().toISOString().split("T")[0],wage_deposited:c.wages_deposited_timely,delay_compensation:c.delay_compensation_provided,aadhaar_wage:c.aadhaar_based_payment,wage_not_deposited_reasons:c.payment_failure_reasons,job_card_available:c.workers_have_job_cards,job_card_updated:c.job_card_records_updated,work_file_updated:c.work_file_updated,cib_available:c.citizen_information_board,measurement_taken:c.work_measurement_done,measurement_book_no:c.measurement_book_number,all_measurements_recorded:c.all_measurements_recorded,senior_officer_check:c.senior_technical_officer_check,measurement_discrepancy:c.measurement_discrepancy,discrepancy_details:c.discrepancy_details,geo_tagging:c.work_geotagged,other_important_matters:c.other_important_matters,overall_quality:c.overall_work_quality,utility_feedback:c.work_utility_feedback,final_date:c.inspection_date_final||new Date().toISOString().split("T")[0],final_place:c.inspection_location,final_officer_name:c.inspector_name_final,final_designation:c.inspector_designation_final,final_office:c.inspector_office});if(C)throw C}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-green-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(En,{className:"h-5 w-5 mr-2 text-green-600"}),"  (Basic Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1]   *"}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2]   -  *"}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:l=>g(u=>({...u,inspector_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:l=>g(u=>({...u,inspector_designation:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3]   *"}),r.jsx("input",{type:"text",value:c.work_name,onChange:l=>g(u=>({...u,work_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.gram_panchayat,onChange:l=>g(u=>({...u,gram_panchayat:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.village,onChange:l=>g(u=>({...u,village:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.tehsil,onChange:l=>g(u=>({...u,tehsil:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.district,onChange:l=>g(u=>({...u,district:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"          "}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(hc,{className:"h-5 w-5 mr-2 text-green-600"}),"    (Work Type and Planning)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()  "}),r.jsxs("select",{value:c.work_type,onChange:l=>g(u=>({...u,work_type:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()         ?"}),r.jsxs("select",{value:c.annual_action_plan_included,onChange:l=>g(u=>({...u,annual_action_plan_included:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()    "}),r.jsx("input",{type:"text",value:c.annual_action_plan_year,onChange:l=>g(u=>({...u,annual_action_plan_year:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4]   "}),r.jsx("input",{type:"text",value:c.implementation_agency,onChange:l=>g(u=>({...u,implementation_agency:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"5]  "}),r.jsx("input",{type:"text",value:c.work_code,onChange:l=>g(u=>({...u,work_code:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-green-600"}),"6]    DSR  (Budget Details and DSR)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"() "}),r.jsx("input",{type:"text",value:c.estimated_amount_unskilled,onChange:l=>g(u=>({...u,estimated_amount_unskilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:" ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.estimated_amount_skilled,onChange:l=>g(u=>({...u,estimated_amount_skilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:" ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.estimated_amount_total,onChange:l=>g(u=>({...u,estimated_amount_total:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:" ",disabled:m})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"() DSR "}),r.jsx("input",{type:"text",value:c.dsr_department,onChange:l=>g(u=>({...u,dsr_department:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.dsr_year,onChange:l=>g(u=>({...u,dsr_year:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-green-600"}),"7] NREGA Soft   (NREGA Soft Records)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NREGA Soft      ?"}),r.jsxs("select",{value:c.nrega_soft_records_correct,onChange:l=>g(u=>({...u,nrega_soft_records_correct:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"() NREGA Soft      - "}),r.jsxs("select",{value:c.nrega_soft_form_a,onChange:l=>g(u=>({...u,nrega_soft_form_a:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"() NREGA Soft       - "}),r.jsxs("select",{value:c.nrega_soft_form_b,onChange:l=>g(u=>({...u,nrega_soft_form_b:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-800",children:"( MIS   NREGA Soft   -    -      .)"})})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-green-600"}),"8]   (Convergence Details)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   ?"}),r.jsxs("select",{value:c.work_under_convergence,onChange:l=>g(u=>({...u,work_under_convergence:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.convergence_department,onChange:l=>g(u=>({...u,convergence_department:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("textarea",{value:c.convergence_fund_details,onChange:l=>g(u=>({...u,convergence_fund_details:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:" (MGNREGA)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.mgnrega_unskilled,onChange:l=>g(u=>({...u,mgnrega_unskilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.mgnrega_skilled,onChange:l=>g(u=>({...u,mgnrega_skilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.mgnrega_total,onChange:l=>g(u=>({...u,mgnrega_total:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"  (Other Department)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.other_dept_unskilled,onChange:l=>g(u=>({...u,other_dept_unskilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.other_dept_skilled,onChange:l=>g(u=>({...u,other_dept_skilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.other_dept_total,onChange:l=>g(u=>({...u,other_dept_total:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2 text-green-600"}),"    (Workers and Attendance Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"9]      "}),r.jsx("input",{type:"number",value:c.attendance_register_workers,onChange:l=>g(u=>({...u,attendance_register_workers:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10]     "}),r.jsx("input",{type:"number",value:c.actual_workers_present,onChange:l=>g(u=>({...u,actual_workers_present:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Pn,{className:"h-5 w-5 mr-2 text-green-600"}),"11]      (Worker Facilities)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"(i)  "}),r.jsx("input",{type:"text",value:c.shelter_for_workers,onChange:l=>g(u=>({...u,shelter_for_workers:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"(ii)  "}),r.jsx("input",{type:"text",value:c.first_aid_kit,onChange:l=>g(u=>({...u,first_aid_kit:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"(iii)  "}),r.jsx("input",{type:"text",value:c.drinking_water,onChange:l=>g(u=>({...u,drinking_water:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"(iv)    "}),r.jsx("input",{type:"text",value:c.childcare_for_workers_children,onChange:l=>g(u=>({...u,childcare_for_workers_children:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(dc,{className:"h-5 w-5 mr-2 text-green-600"}),"    (Work Status and Expenses)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"12]  "}),r.jsx("textarea",{value:c.current_work_status,onChange:l=>g(u=>({...u,current_work_status:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"13]    "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.expenses_unskilled,onChange:l=>g(u=>({...u,expenses_unskilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.expenses_skilled,onChange:l=>g(u=>({...u,expenses_skilled:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.expenses_total,onChange:l=>g(u=>({...u,expenses_total:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Ba,{className:"h-5 w-5 mr-2 text-green-600"}),"14]     (Wages and Payment Details)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()     "}),r.jsx("input",{type:"date",value:c.previous_attendance_closure_date,onChange:l=>g(u=>({...u,previous_attendance_closure_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()            ?"}),r.jsxs("select",{value:c.wages_deposited_timely,onChange:l=>g(u=>({...u,wages_deposited_timely:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()    ,      ?"}),r.jsxs("select",{value:c.delay_compensation_provided,onChange:l=>g(u=>({...u,delay_compensation_provided:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-green-600"}),"15-16]      (Aadhaar and Job Card Details)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"15] ()           ?"}),r.jsxs("select",{value:c.aadhaar_based_payment,onChange:l=>g(u=>({...u,aadhaar_based_payment:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()           ?"}),r.jsx("textarea",{value:c.payment_failure_reasons,onChange:l=>g(u=>({...u,payment_failure_reasons:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"  ",disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"16] ()      ?"}),r.jsxs("select",{value:c.workers_have_job_cards,onChange:l=>g(u=>({...u,workers_have_job_cards:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()        ?"}),r.jsxs("select",{value:c.job_card_records_updated,onChange:l=>g(u=>({...u,job_card_records_updated:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-green-600"}),"17-19]    (Documentation and Measurement)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"17]    (Work File/Case Record)    ?"}),r.jsxs("select",{value:c.work_file_updated,onChange:l=>g(u=>({...u,work_file_updated:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"18]   Citizen Information Board (CIB)   ?"}),r.jsxs("select",{value:c.citizen_information_board,onChange:l=>g(u=>({...u,citizen_information_board:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"19]       ?"}),r.jsxs("select",{value:c.work_measurement_done,onChange:l=>g(u=>({...u,work_measurement_done:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()   "}),r.jsx("input",{type:"text",value:c.measurement_book_number,onChange:l=>g(u=>({...u,measurement_book_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()           ?"}),r.jsxs("select",{value:c.all_measurements_recorded,onChange:l=>g(u=>({...u,all_measurements_recorded:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()           ?"}),r.jsxs("select",{value:c.senior_technical_officer_check,onChange:l=>g(u=>({...u,senior_technical_officer_check:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()           ?"}),r.jsxs("select",{value:c.measurement_discrepancy,onChange:l=>g(u=>({...u,measurement_discrepancy:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"()      "}),r.jsx("textarea",{value:c.discrepancy_details,onChange:l=>g(u=>({...u,discrepancy_details:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(hi,{className:"h-5 w-5 mr-2 text-green-600"}),"20-23]   (Final Assessment)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"20]  Geo-tagging    ?"}),r.jsxs("select",{value:c.work_geotagged,onChange:l=>g(u=>({...u,work_geotagged:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m,children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"21]      "}),r.jsx("textarea",{value:c.other_important_matters,onChange:l=>g(u=>({...u,other_important_matters:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"22]   "}),r.jsx("textarea",{value:c.overall_work_quality,onChange:l=>g(u=>({...u,overall_work_quality:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"23]   "}),r.jsx("textarea",{value:c.work_utility_feedback,onChange:l=>g(u=>({...u,work_utility_feedback:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"   ",disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"date",value:c.inspection_date_final,onChange:l=>g(u=>({...u,inspection_date_final:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspection_location,onChange:l=>g(u=>({...u,inspection_location:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" - "}),r.jsx("input",{type:"text",value:c.inspector_name_final,onChange:l=>g(u=>({...u,inspector_name_final:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation_final,onChange:l=>g(u=>({...u,inspector_designation_final:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_office,onChange:l=>g(u=>({...u,inspector_office:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload MGNREGA Work Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"        "}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`MGNREGA work photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`MGNREGA work photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.inspection_date&&c.inspector_name&&c.work_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -     "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-green-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-green-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-green-600 font-medium":"text-gray-500"}`,children:"  "}),r.jsx("div",{className:`${o===4?"text-green-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-green-50/30 to-emerald-50/30 rounded-xl shadow-lg border-2 border-green-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B(),className:"px-4 md:px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},by=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({inspection_date:"",district_name:"",taluka_name:"",center_name:"",school_name:"",management_name:"",principal_name:"",udise_number:"",total_boys:0,total_girls:0,total_students:0,sanctioned_teachers:0,working_teachers:0,vacant_teachers:0,sanctioned_non_teaching:0,working_non_teaching:0,vacant_non_teaching:0,building_construction_year:"",building_construction_year_status:"",building_construction_year_measures:"",building_construction_year_feedback:"",building_type_structure:"",building_type_structure_status:"",building_type_structure_measures:"",building_type_structure_feedback:"",classrooms_adequate:"",classrooms_adequate_status:"",classrooms_adequate_measures:"",classrooms_adequate_feedback:"",separate_toilets:"",separate_toilets_status:"",separate_toilets_measures:"",separate_toilets_feedback:"",cwsn_toilets:"",cwsn_toilets_status:"",cwsn_toilets_measures:"",cwsn_toilets_feedback:"",drinking_water:"",drinking_water_status:"",drinking_water_measures:"",drinking_water_feedback:"",boundary_wall:"",boundary_wall_status:"",boundary_wall_measures:"",boundary_wall_feedback:"",playground:"",playground_status:"",playground_measures:"",playground_feedback:"",kitchen_shed:"",kitchen_shed_status:"",kitchen_shed_measures:"",kitchen_shed_feedback:"",ramp_facility:"",ramp_facility_status:"",ramp_facility_measures:"",ramp_facility_feedback:"",electricity:"",electricity_status:"",electricity_measures:"",electricity_feedback:"",seating_arrangement:"",seating_arrangement_status:"",seating_arrangement_measures:"",seating_arrangement_feedback:"",cleanliness:"",cleanliness_status:"",cleanliness_measures:"",cleanliness_feedback:"",illegal_use:"",illegal_use_status:"",illegal_use_measures:"",illegal_use_feedback:"",encroachment:"",encroachment_status:"",encroachment_measures:"",encroachment_feedback:"",notable_work:"",notable_work_status:"",notable_work_measures:"",notable_work_feedback:"",inspector_name:"",inspector_designation:""}),P=s.find(l=>l.form_type==="mumbai_nyayalay");A.useEffect(()=>{P&&j(l=>({...l,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]),A.useEffect(()=>{const l=c.total_boys+c.total_girls;g(u=>({...u,total_students:l}))},[c.total_boys,c.total_girls]),A.useEffect(()=>{const l=c.sanctioned_teachers-c.working_teachers,u=c.sanctioned_non_teaching-c.working_non_teaching;g(E=>({...E,vacant_teachers:Math.max(0,l),vacant_non_teaching:Math.max(0,u)}))},[c.sanctioned_teachers,c.working_teachers,c.sanctioned_non_teaching,c.working_non_teaching]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async l=>{j(u=>({...u,latitude:l.coords.latitude,longitude:l.coords.longitude,location_accuracy:l.coords.accuracy}));try{const E=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l.coords.latitude},${l.coords.longitude}&key=undefined`)).json();if(E.results&&E.results.length>0){const v=E.results[0].formatted_address;j(S=>({...S,address:v}))}}catch(u){console.error("Error getting location name:",u)}p(!1)},l=>{console.error("Error getting location:",l),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=l=>{const u=Array.from(l.target.files||[]);if(x.length+u.length>5){alert(i("fims.maxPhotosAllowed"));return}_(E=>[...E,...u])},D=l=>{_(u=>u.filter((E,v)=>v!==l))},I=async l=>{if(x.length!==0){k(!0);try{for(let u=0;u<x.length;u++){const E=x[u],v=E.name.split(".").pop(),S=`mumbai_nyayalay_${l}_${Date.now()}_${u}.${v}`,{data:O,error:b}=await M.storage.from("field-visit-images").upload(S,E);if(b)throw b;const{data:{publicUrl:f}}=M.storage.from("field-visit-images").getPublicUrl(S),{error:C}=await M.from("fims_inspection_photos").insert({inspection_id:l,photo_url:f,photo_name:E.name,description:`    ${u+1}`,photo_order:u+1});if(C)throw C}}catch(u){throw console.error("Error uploading photos:",u),u}finally{k(!1)}}},H=()=>{const l=new Date,u=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0"),S=String(l.getTime()).slice(-6);return`MNY-${u}${E}${v}-${S}`},q=async(l=!1)=>{try{p(!0);const u={...N,planned_date:N.planned_date||null};let E;if(a&&a.id){const{data:O,error:b}=await M.from("fims_inspections").update({location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(b)throw b;E=O}else{const O=H(),{data:b,error:f}=await M.from("fims_inspections").insert({inspection_number:O,category_id:u.category_id,inspector_id:t.id,location_name:u.location_name,latitude:u.latitude,longitude:u.longitude,location_accuracy:u.location_accuracy,address:u.address,planned_date:u.planned_date,inspection_date:new Date().toISOString(),status:l?"draft":"submitted",form_data:c}).select().single();if(f)throw f;E=b}x.length>0&&await I(E.id);const v=a&&a.id,S=i(l?v?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":v?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(S),n(),e()}catch(u){console.error("Error saving inspection:",u),alert("Error saving inspection: "+u.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(l=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=l?"bg-red-600 text-white":"bg-gray-200 text-gray-600"}`,children:l}),l<4&&r.jsx("div",{className:`w-16 h-1 mx-2 ${o>l?"bg-red-600":"bg-gray-200"}`})]},l))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(mc,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Basic Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"date",value:c.inspection_date,onChange:l=>g(u=>({...u,inspection_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.district_name,onChange:l=>g(u=>({...u,district_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.taluka_name,onChange:l=>g(u=>({...u,taluka_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.center_name,onChange:l=>g(u=>({...u,center_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.school_name,onChange:l=>g(u=>({...u,school_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" -   / .. / .."}),r.jsx("input",{type:"text",value:c.management_name,onChange:l=>g(u=>({...u,management_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.principal_name,onChange:l=>g(u=>({...u,principal_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ."}),r.jsx("input",{type:"text",value:c.udise_number,onChange:l=>g(u=>({...u,udise_number:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:" .  ",disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(bt,{className:"h-5 w-5 mr-2 text-red-600"}),"    (Student and Teacher Count)"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border border-black text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"border border-black p-2",children:"   "}),r.jsx("th",{className:"border border-black p-2",children:"   "}),r.jsx("th",{className:"border border-black p-2",children:"  "}),r.jsx("th",{className:"border border-black p-2",children:"   "}),r.jsx("th",{className:"border border-black p-2",children:"  "}),r.jsx("th",{className:"border border-black p-2",children:"  "}),r.jsx("th",{className:"border border-black p-2",children:"    "}),r.jsx("th",{className:"border border-black p-2",children:"    "}),r.jsx("th",{className:"border border-black p-2",children:"   "})]})}),r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.total_boys,onChange:l=>g(u=>({...u,total_boys:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.total_girls,onChange:l=>g(u=>({...u,total_girls:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2 bg-gray-100",children:r.jsx("input",{type:"number",value:c.total_students,readOnly:!0,className:"w-full px-2 py-1 bg-gray-100 border border-gray-300 rounded"})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.sanctioned_teachers,onChange:l=>g(u=>({...u,sanctioned_teachers:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.working_teachers,onChange:l=>g(u=>({...u,working_teachers:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2 bg-gray-100",children:r.jsx("input",{type:"number",value:c.vacant_teachers,readOnly:!0,className:"w-full px-2 py-1 bg-gray-100 border border-gray-300 rounded"})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.sanctioned_non_teaching,onChange:l=>g(u=>({...u,sanctioned_non_teaching:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("input",{type:"number",value:c.working_non_teaching,onChange:l=>g(u=>({...u,working_non_teaching:parseInt(l.target.value)||0})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500",disabled:m})}),r.jsx("td",{className:"border border-black p-2 bg-gray-100",children:r.jsx("input",{type:"number",value:c.vacant_non_teaching,readOnly:!0,className:"w-full px-2 py-1 bg-gray-100 border border-gray-300 rounded"})})]})})]})})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:l=>j(u=>({...u,location_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:l=>j(u=>({...u,planned_date:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:l=>j(u=>({...u,address:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>{const l=[{key:"building_construction_year_1",title:"1)    ."},{key:"building_type_structure_1",title:"2) ()    : 1...."},{key:"building_type_structure_2",title:"2)   /  "},{key:"building_type_structure_3",title:"()   : 1.  ?"},{key:"building_type_structure_4",title:"2.   ?   "},{key:"classrooms_adequate_1",title:"3)      ?"},{key:"classrooms_adequate_2",title:".   ."},{key:"classrooms_adequate_3",title:".   "},{key:"classrooms_adequate_4",title:".     "},{key:"classrooms_adequate_5",title:".    ?"},{key:"classrooms_adequate_6",title:".    ?   ?"},{key:"separate_toilets_1",title:"4)         ?"},{key:"separate_toilets_2",title:".        ?"},{key:"separate_toilets_3",title:".      ?"},{key:"separate_toilets_4",title:".       ?"},{key:"cwsn_toilets_1",title:"5)     (CWSN)    ?"},{key:"cwsn_toilets_2",title:".      ?"},{key:"cwsn_toilets_3",title:".       ?"},{key:"drinking_water_1",title:"6)             ?"},{key:"drinking_water_2",title:".       ?   ( )"},{key:"drinking_water_3",title:".    (, , .)"},{key:"drinking_water_4",title:".       ?   ?"},{key:"boundary_wall_1",title:"7)      ?"},{key:"boundary_wall_2",title:".   /   ?"},{key:"boundary_wall_3",title:".      ?"},{key:"playground_1",title:"8)   "},{key:"playground_2",title:".  ,"},{key:"playground_3",title:".  /   / "},{key:"playground_4",title:".   ?"},{key:"kitchen_shed_1",title:"9)     ?  ."},{key:"kitchen_shed_2",title:".    ?"},{key:"ramp_facility_1",title:"10)   ()   ?"},{key:"ramp_facility_2",title:".     ? ( :)"},{key:"ramp_facility_3",title:".      ?"},{key:"electricity_1",title:"11)      ?"},{key:"electricity_2",title:".       ?"},{key:"electricity_3",title:".         ?"},{key:"electricity_4",title:".   /     ."},{key:"electricity_5",title:".       ?"},{key:"seating_arrangement_1",title:"12)    ."},{key:"seating_arrangement_2",title:".  /  / ,"},{key:"seating_arrangement_3",title:".   "},{key:"seating_arrangement_4",title:".   "},{key:"seating_arrangement_5",title:".    "},{key:"seating_arrangement_6",title:".      ?"},{key:"cleanliness_1",title:"13)       ?"},{key:"cleanliness_2",title:".  ,"},{key:"cleanliness_3",title:". "},{key:"cleanliness_4",title:".  /  "},{key:"cleanliness_5",title:".    ?"},{key:"cleanliness_6",title:".      ?   .  ,      "},{key:"illegal_use_1",title:"14)   /          ?"},{key:"illegal_use_2",title:".       ?          ?"},{key:"encroachment",title:"15)         ?   ."},{key:"notable_work",title:"16)          ."}];return r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:".  ,    (Hon. High Court, Mumbai Inspection Form)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(hc,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Inspection Details)"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border border-black text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"border border-black p-2",children:"."}),r.jsx("th",{className:"border border-black p-2",children:""}),r.jsx("th",{className:"border border-black p-2",children:""}),r.jsx("th",{className:"border border-black p-2",children:" "}),r.jsx("th",{className:"border border-black p-2",children:""})]})}),r.jsx("tbody",{children:l.map((u,E)=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-black p-2 align-top",children:E+1}),r.jsx("td",{className:"border border-black p-2 align-top whitespace-pre-wrap text-xs",children:u.title}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("textarea",{value:c[`${u.key}_status`],onChange:v=>g(S=>({...S,[`${u.key}_status`]:v.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500 text-xs",rows:3,placeholder:"",disabled:m})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("textarea",{value:c[`${u.key}_measures`],onChange:v=>g(S=>({...S,[`${u.key}_measures`]:v.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500 text-xs",rows:3,placeholder:"",disabled:m})}),r.jsx("td",{className:"border border-black p-2",children:r.jsx("textarea",{value:c[`${u.key}_feedback`],onChange:v=>g(S=>({...S,[`${u.key}_feedback`]:v.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-red-500 text-xs",rows:3,placeholder:"",disabled:m})})]},u.key))})]})})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Xe,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Inspector Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.inspector_name,onChange:u=>g(E=>({...E,inspector_name:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",value:c.inspector_designation,onChange:u=>g(E=>({...E,inspector_designation:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",disabled:m})]})]})]})]})},ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload School Inspection Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"      "}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(l),alt:`School inspection photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(u),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.name})]},u))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((l,u)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.photo_url,alt:l.description||`School inspection photo ${u+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:l.photo_name||`Photo ${u+1}`}),l.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.description})]},l.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),L=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();default:return null}},B=()=>{switch(o){case 1:return c.inspection_date&&c.district_name&&c.taluka_name&&c.school_name;case 2:return N.location_name;case 3:return!0;case 4:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -    "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-4 md:space-x-8 text-xs md:text-sm",children:[r.jsx("div",{className:`${o===1?"text-red-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===2?"text-red-600 font-medium":"text-gray-500"}`,children:i("fims.locationDetails")}),r.jsx("div",{className:`${o===3?"text-red-600 font-medium":"text-gray-500"}`,children:" "}),r.jsx("div",{className:`${o===4?"text-red-600 font-medium":"text-gray-500"}`,children:i("fims.photosSubmit")})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-red-50/30 to-pink-50/30 rounded-xl shadow-lg border-2 border-red-200 p-4 md:p-6 mb-4 md:mb-6",children:L()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(l=>Math.max(1,l-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===4?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(l=>Math.min(4,l+1)),disabled:!B()||m,className:"px-4 md:px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},vy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(1),[h,p]=A.useState(!1),[x,_]=A.useState([]),[w,k]=A.useState(!1),m=a?.mode==="view",$=a?.mode==="edit",[N,j]=A.useState({category_id:"",location_name:"",address:"",planned_date:"",latitude:null,longitude:null,location_accuracy:null}),[c,g]=A.useState({institute_name_address:"",head_name_contact:"",inspector_name_designation:"",visit_date_time:"",inspection_purpose_reason:"",technical_work_review:"",work_type:"",target_current_year:"",achieved_month_end:"",achieved_previous_year_month_end:"",outpatients_target:0,outpatients_current_month:0,outpatients_previous:0,inpatients_target:0,inpatients_current_month:0,inpatients_previous:0,epilepsy_patients_target:0,epilepsy_patients_current_month:0,epilepsy_patients_previous:0,castration_headquarters_target:0,castration_headquarters_current_month:0,castration_headquarters_previous:0,castration_field_target:0,castration_field_current_month:0,castration_field_previous:0,major_surgery_headquarters_target:0,major_surgery_headquarters_current_month:0,major_surgery_headquarters_previous:0,major_surgery_field_target:0,major_surgery_field_current_month:0,major_surgery_field_previous:0,major_surgery_total_target:0,major_surgery_total_current_month:0,major_surgery_total_previous:0,minor_surgery_headquarters_target:0,minor_surgery_headquarters_current_month:0,minor_surgery_headquarters_previous:0,artificial_insemination_primary_foreign_target:0,artificial_insemination_primary_foreign_current_month:0,artificial_insemination_primary_foreign_previous:0,artificial_insemination_primary_hybrid_target:0,artificial_insemination_primary_hybrid_current_month:0,artificial_insemination_primary_hybrid_previous:0,artificial_insemination_primary_local_target:0,artificial_insemination_primary_local_current_month:0,artificial_insemination_primary_local_previous:0,artificial_insemination_primary_buffalo_target:0,artificial_insemination_primary_buffalo_current_month:0,artificial_insemination_primary_buffalo_previous:0,artificial_insemination_primary_total_target:0,artificial_insemination_primary_total_current_month:0,artificial_insemination_primary_total_previous:0,born_calves_cow_hybrid_target:0,born_calves_cow_hybrid_current_month:0,born_calves_cow_hybrid_previous:0,born_calves_cow_local_target:0,born_calves_cow_local_current_month:0,born_calves_cow_local_previous:0,born_calves_buffalo_target:0,born_calves_buffalo_current_month:0,born_calves_buffalo_previous:0,born_calves_total_target:0,born_calves_total_current_month:0,born_calves_total_previous:0,calved_cows_hybrid_target:0,calved_cows_hybrid_current_month:0,calved_cows_hybrid_previous:0,calved_cows_local_target:0,calved_cows_local_current_month:0,calved_cows_local_previous:0,calved_buffaloes_target:0,calved_buffaloes_current_month:0,calved_buffaloes_previous:0,pregnancy_examination_cow_target:0,pregnancy_examination_cow_current_month:0,pregnancy_examination_cow_previous:0,pregnancy_examination_buffalo_target:0,pregnancy_examination_buffalo_current_month:0,pregnancy_examination_buffalo_previous:0,pregnancy_examination_total_target:0,pregnancy_examination_total_current_month:0,pregnancy_examination_total_previous:0,infertility_animals_examination_cow_target:0,infertility_animals_examination_cow_current_month:0,infertility_animals_examination_cow_previous:0,infertility_animals_examination_buffalo_target:0,infertility_animals_examination_buffalo_current_month:0,infertility_animals_examination_buffalo_previous:0,infertility_animals_examination_total_target:0,infertility_animals_examination_total_current_month:0,infertility_animals_examination_total_previous:0,patients_average_daily_attendance_target:0,patients_average_daily_attendance_current_month:0,patients_average_daily_attendance_previous:0,collected_service_fees_target:0,collected_service_fees_current_month:0,collected_service_fees_previous:0,village_name:"",disease_name:"",incubation_period:"",livestock_count:0,affected_count:0,deaths:0,vaccinated_count:0,actions_taken:"",villages_within_10km:0,livestock_within_10km:"",previous_endemic_disease_info:"",edr_submission_date:"",team_visit_date:"",vaccine_type:"",vaccine_name:"",number_of_animals_in_program:"",total_vaccinated:"",recently_vaccinated_date:"",received_vaccinated:"",previous_vaccinated:"",total_vaccinated_count:"",vaccination_date:"",since_april_vaccinated:"",reason_not_vaccinated:"",dairy_animals_group_distribution_target_current_year:"",dairy_animals_group_distribution_achieved_current_year:"",dairy_animals_group_distribution_achieved_previous_year:"",dairy_animals_group_distribution_remarks:"",goat_sheep_group_distribution_target_current_year:"",goat_sheep_group_distribution_achieved_current_year:"",goat_sheep_group_distribution_achieved_previous_year:"",goat_sheep_group_distribution_remarks:"",poultry_shed_construction_target_current_year:"",poultry_shed_construction_achieved_current_year:"",poultry_shed_construction_achieved_previous_year:"",poultry_shed_construction_remarks:"",pig_group_distribution_target_current_year:"",pig_group_distribution_achieved_current_year:"",pig_group_distribution_achieved_previous_year:"",pig_group_distribution_remarks:"",one_day_old_chicks_distribution_target_current_year:"",one_day_old_chicks_distribution_achieved_current_year:"",one_day_old_chicks_distribution_achieved_previous_year:"",one_day_old_chicks_distribution_remarks:"",double_yolk_eggs_distribution_target_current_year:"",double_yolk_eggs_distribution_achieved_current_year:"",double_yolk_eggs_distribution_achieved_previous_year:"",double_yolk_eggs_distribution_remarks:"",general_technical_assessment:"",given_instructions:""}),P=s.find(b=>b.form_type==="pashutapasani");A.useEffect(()=>{P&&j(b=>({...b,category_id:P.id}))},[P]),A.useEffect(()=>{a&&a.id&&(j({category_id:a.category_id||"",location_name:a.location_name||"",address:a.address||"",planned_date:a.planned_date?a.planned_date.split("T")[0]:"",latitude:a.latitude,longitude:a.longitude,location_accuracy:a.location_accuracy}),a.form_data&&g({...c,...a.form_data}))},[a]);const y=()=>{if(!navigator.geolocation){alert(i("fims.geolocationNotSupported"));return}p(!0),navigator.geolocation.getCurrentPosition(async b=>{j(f=>({...f,latitude:b.coords.latitude,longitude:b.coords.longitude,location_accuracy:b.coords.accuracy}));try{const C=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${b.coords.latitude},${b.coords.longitude}&key=undefined`)).json();if(C.results&&C.results.length>0){const U=C.results[0].formatted_address;j(G=>({...G,address:U}))}}catch(f){console.error("Error getting location name:",f)}p(!1)},b=>{console.error("Error getting location:",b),alert(i("fims.unableToGetLocation")),p(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},T=b=>{const f=Array.from(b.target.files||[]);if(x.length+f.length>5){alert(i("fims.maxPhotosAllowed"));return}_(C=>[...C,...f])},D=b=>{_(f=>f.filter((C,U)=>U!==b))},I=async b=>{if(x.length!==0){k(!0);try{for(let f=0;f<x.length;f++){const C=x[f],U=C.name.split(".").pop(),G=`veterinary_${b}_${Date.now()}_${f}.${U}`,{data:te,error:se}=await M.storage.from("field-visit-images").upload(G,C);if(se)throw se;const{data:{publicUrl:oe}}=M.storage.from("field-visit-images").getPublicUrl(G),{error:pe}=await M.from("fims_inspection_photos").insert({inspection_id:b,photo_url:oe,photo_name:C.name,description:`   ${f+1}`,photo_order:f+1});if(pe)throw pe}}catch(f){throw console.error("Error uploading photos:",f),f}finally{k(!1)}}},H=()=>{const b=new Date,f=b.getFullYear(),C=String(b.getMonth()+1).padStart(2,"0"),U=String(b.getDate()).padStart(2,"0"),G=String(b.getTime()).slice(-6);return`VET-${f}${C}${U}-${G}`},q=async(b=!1)=>{try{p(!0);const f={...N,planned_date:N.planned_date||null};let C;if(a&&a.id){const{data:te,error:se}=await M.from("fims_inspections").update({location_name:f.location_name,latitude:f.latitude,longitude:f.longitude,location_accuracy:f.location_accuracy,address:f.address,planned_date:f.planned_date,inspection_date:new Date().toISOString(),status:b?"draft":"submitted",form_data:c}).eq("id",a.id).select().single();if(se)throw se;C=te;const{error:oe}=await M.from("veterinary_inspection_report_form").upsert({inspection_id:a.id,...c});if(oe)throw oe}else{const te=H(),{data:se,error:oe}=await M.from("fims_inspections").insert({inspection_number:te,category_id:f.category_id,inspector_id:t.id,location_name:f.location_name,latitude:f.latitude,longitude:f.longitude,location_accuracy:f.location_accuracy,address:f.address,planned_date:f.planned_date,inspection_date:new Date().toISOString(),status:b?"draft":"submitted",form_data:c}).select().single();if(oe)throw oe;C=se;const{error:pe}=await M.from("veterinary_inspection_report_form").insert({inspection_id:C.id,...c});if(pe)throw pe}x.length>0&&await I(C.id);const U=a&&a.id,G=i(b?U?"fims.inspectionUpdatedAsDraft":"fims.inspectionSavedAsDraft":U?"fims.inspectionUpdatedSuccessfully":"fims.inspectionSubmittedSuccessfully");alert(G),n(),e()}catch(f){console.error("Error saving inspection:",f),alert("Error saving inspection: "+f.message)}finally{p(!1)}},F=()=>r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4,5,6,7].map(b=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=b?"bg-red-600 text-white":"bg-gray-200 text-gray-600"}`,children:b}),b<7&&r.jsx("div",{className:`w-12 h-1 mx-1 ${o>b?"bg-red-600":"bg-gray-200"}`})]},b))}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-red-600"}),"   (Basic Institution Information)"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("textarea",{value:c.institute_name_address,onChange:b=>g(f=>({...f,institute_name_address:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"      ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"text",value:c.head_name_contact,onChange:b=>g(f=>({...f,head_name_contact:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"      ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"text",value:c.inspector_name_designation,onChange:b=>g(f=>({...f,inspector_name_designation:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"     ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"datetime-local",value:c.visit_date_time,onChange:b=>g(f=>({...f,visit_date_time:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsxs("select",{value:c.inspection_purpose_reason,onChange:b=>g(f=>({...f,inspection_purpose_reason:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,disabled:m,children:[r.jsx("option",{value:"",children:"  "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""})]})]})]})]})]}),Q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-4 rounded-t-lg",children:r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(be,{className:"h-5 w-5 mr-2"}),"  (Location Information)"]})}),r.jsxs("div",{className:"bg-white p-6 rounded-b-lg border border-gray-200 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:N.location_name,onChange:b=>j(f=>({...f,location_name:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"date",value:N.planned_date,onChange:b=>j(f=>({...f,planned_date:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GPS Location"}),r.jsxs("button",{type:"button",onClick:y,disabled:h||m,className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:[r.jsx(be,{className:"h-4 w-4"}),r.jsx("span",{children:h?"  ...":"  "})]})]})]}),N.latitude&&N.longitude&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"  "}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[": ",N.latitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.longitude.toFixed(6)]}),r.jsxs("p",{children:[": ",N.location_accuracy?Math.round(N.location_accuracy)+"m":"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("textarea",{value:N.address,onChange:b=>j(f=>({...f,address:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"   ",disabled:m})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"   (Technical Work Review)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Ua,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Work Overview)"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("textarea",{value:c.technical_work_review,onChange:b=>g(f=>({...f,technical_work_review:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:4,placeholder:"     ",disabled:m})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),r.jsx("input",{type:"text",value:c.work_type,onChange:b=>g(f=>({...f,work_type:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.target_current_year,onChange:b=>g(f=>({...f,target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),r.jsx("input",{type:"text",value:c.achieved_month_end,onChange:b=>g(f=>({...f,achieved_month_end:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"     ",disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    "}),r.jsx("input",{type:"text",value:c.achieved_previous_year_month_end,onChange:b=>g(f=>({...f,achieved_previous_year_month_end:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"     ",disabled:m})]})]})]})]})]}),ie=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  (Patient Statistics)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Bm,{className:"h-5 w-5 mr-2 text-red-600"}),"   (Patient Count Details)"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-red-100",children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:" "}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:""}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:" "}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:""})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:" (Outpatients)"}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.outpatients_target,onChange:b=>g(f=>({...f,outpatients_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.outpatients_current_month,onChange:b=>g(f=>({...f,outpatients_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.outpatients_previous,onChange:b=>g(f=>({...f,outpatients_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:" (Inpatients)"}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.inpatients_target,onChange:b=>g(f=>({...f,inpatients_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.inpatients_current_month,onChange:b=>g(f=>({...f,inpatients_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.inpatients_previous,onChange:b=>g(f=>({...f,inpatients_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"  (Epilepsy Patients)"}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.epilepsy_patients_target,onChange:b=>g(f=>({...f,epilepsy_patients_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.epilepsy_patients_current_month,onChange:b=>g(f=>({...f,epilepsy_patients_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.epilepsy_patients_previous,onChange:b=>g(f=>({...f,epilepsy_patients_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]})]})]})})]})]}),L=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  (Surgery Statistics)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Ua,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Surgery Details)"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-red-100",children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:" "}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:""}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:" "}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:""})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:" - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_headquarters_target,onChange:b=>g(f=>({...f,castration_headquarters_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_headquarters_current_month,onChange:b=>g(f=>({...f,castration_headquarters_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_headquarters_previous,onChange:b=>g(f=>({...f,castration_headquarters_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:" - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_field_target,onChange:b=>g(f=>({...f,castration_field_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_field_current_month,onChange:b=>g(f=>({...f,castration_field_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.castration_field_previous,onChange:b=>g(f=>({...f,castration_field_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"  - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_headquarters_target,onChange:b=>g(f=>({...f,major_surgery_headquarters_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_headquarters_current_month,onChange:b=>g(f=>({...f,major_surgery_headquarters_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_headquarters_previous,onChange:b=>g(f=>({...f,major_surgery_headquarters_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"  - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_field_target,onChange:b=>g(f=>({...f,major_surgery_field_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_field_current_month,onChange:b=>g(f=>({...f,major_surgery_field_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_field_previous,onChange:b=>g(f=>({...f,major_surgery_field_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"  - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_total_target,onChange:b=>g(f=>({...f,major_surgery_total_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_total_current_month,onChange:b=>g(f=>({...f,major_surgery_total_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.major_surgery_total_previous,onChange:b=>g(f=>({...f,major_surgery_total_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"  - "}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.minor_surgery_headquarters_target,onChange:b=>g(f=>({...f,minor_surgery_headquarters_target:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.minor_surgery_headquarters_current_month,onChange:b=>g(f=>({...f,minor_surgery_headquarters_current_month:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})}),r.jsx("td",{className:"border border-gray-300 px-2 py-1",children:r.jsx("input",{type:"number",value:c.minor_surgery_headquarters_previous,onChange:b=>g(f=>({...f,minor_surgery_headquarters_previous:parseInt(b.target.value)||0})),className:"w-full px-2 py-1 border border-gray-200 rounded text-center",disabled:m})})]})]})]})})]})]}),B=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  (Disease Information)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(M0,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Disease Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.village_name,onChange:b=>g(f=>({...f,village_name:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.disease_name,onChange:b=>g(f=>({...f,disease_name:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.incubation_period,onChange:b=>g(f=>({...f,incubation_period:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"number",value:c.livestock_count,onChange:b=>g(f=>({...f,livestock_count:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"number",value:c.affected_count,onChange:b=>g(f=>({...f,affected_count:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"number",value:c.deaths,onChange:b=>g(f=>({...f,deaths:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"number",value:c.vaccinated_count,onChange:b=>g(f=>({...f,vaccinated_count:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.actions_taken,onChange:b=>g(f=>({...f,actions_taken:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"number",value:c.villages_within_10km,onChange:b=>g(f=>({...f,villages_within_10km:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"text",value:c.livestock_within_10km,onChange:b=>g(f=>({...f,livestock_within_10km:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("input",{type:"text",value:c.previous_endemic_disease_info,onChange:b=>g(f=>({...f,previous_endemic_disease_info:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EDR    *"}),r.jsx("input",{type:"date",value:c.edr_submission_date,onChange:b=>g(f=>({...f,edr_submission_date:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"date",value:c.team_visit_date,onChange:b=>g(f=>({...f,team_visit_date:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,disabled:m})]})]})]})]}),l=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  (Vaccination Program)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(D0,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Vaccination Details)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.vaccine_type,onChange:b=>g(f=>({...f,vaccine_type:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.vaccine_name,onChange:b=>g(f=>({...f,vaccine_name:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.number_of_animals_in_program,onChange:b=>g(f=>({...f,number_of_animals_in_program:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.total_vaccinated,onChange:b=>g(f=>({...f,total_vaccinated:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.recently_vaccinated_date,onChange:b=>g(f=>({...f,recently_vaccinated_date:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.received_vaccinated,onChange:b=>g(f=>({...f,received_vaccinated:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.previous_vaccinated,onChange:b=>g(f=>({...f,previous_vaccinated:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.total_vaccinated_count,onChange:b=>g(f=>({...f,total_vaccinated_count:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.vaccination_date,onChange:b=>g(f=>({...f,vaccination_date:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("input",{type:"text",value:c.since_april_vaccinated,onChange:b=>g(f=>({...f,since_april_vaccinated:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"   ",required:!0,disabled:m})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"    *"}),r.jsx("textarea",{value:c.reason_not_vaccinated,onChange:b=>g(f=>({...f,reason_not_vaccinated:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3,placeholder:"     ",required:!0,disabled:m})]})]})]})]}),u=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  (Scheme Progress)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(fc,{className:"h-5 w-5 mr-2 text-red-600"}),"    (Dairy Animals Group Distribution)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.dairy_animals_group_distribution_target_current_year,onChange:b=>g(f=>({...f,dairy_animals_group_distribution_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.dairy_animals_group_distribution_achieved_current_year,onChange:b=>g(f=>({...f,dairy_animals_group_distribution_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.dairy_animals_group_distribution_achieved_previous_year,onChange:b=>g(f=>({...f,dairy_animals_group_distribution_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.dairy_animals_group_distribution_remarks,onChange:b=>g(f=>({...f,dairy_animals_group_distribution_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"/   (Goat/Sheep Group Distribution)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.goat_sheep_group_distribution_target_current_year,onChange:b=>g(f=>({...f,goat_sheep_group_distribution_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.goat_sheep_group_distribution_achieved_current_year,onChange:b=>g(f=>({...f,goat_sheep_group_distribution_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.goat_sheep_group_distribution_achieved_previous_year,onChange:b=>g(f=>({...f,goat_sheep_group_distribution_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.goat_sheep_group_distribution_remarks,onChange:b=>g(f=>({...f,goat_sheep_group_distribution_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"   (Poultry Shed Construction)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.poultry_shed_construction_target_current_year,onChange:b=>g(f=>({...f,poultry_shed_construction_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.poultry_shed_construction_achieved_current_year,onChange:b=>g(f=>({...f,poultry_shed_construction_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.poultry_shed_construction_achieved_previous_year,onChange:b=>g(f=>({...f,poultry_shed_construction_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.poultry_shed_construction_remarks,onChange:b=>g(f=>({...f,poultry_shed_construction_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"   (Pig Group Distribution)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.pig_group_distribution_target_current_year,onChange:b=>g(f=>({...f,pig_group_distribution_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.pig_group_distribution_achieved_current_year,onChange:b=>g(f=>({...f,pig_group_distribution_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.pig_group_distribution_achieved_previous_year,onChange:b=>g(f=>({...f,pig_group_distribution_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.pig_group_distribution_remarks,onChange:b=>g(f=>({...f,pig_group_distribution_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"    (One Day Old Chicks Distribution)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.one_day_old_chicks_distribution_target_current_year,onChange:b=>g(f=>({...f,one_day_old_chicks_distribution_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.one_day_old_chicks_distribution_achieved_current_year,onChange:b=>g(f=>({...f,one_day_old_chicks_distribution_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.one_day_old_chicks_distribution_achieved_previous_year,onChange:b=>g(f=>({...f,one_day_old_chicks_distribution_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.one_day_old_chicks_distribution_remarks,onChange:b=>g(f=>({...f,one_day_old_chicks_distribution_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"    (Double Yolk Eggs Distribution)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.double_yolk_eggs_distribution_target_current_year,onChange:b=>g(f=>({...f,double_yolk_eggs_distribution_target_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.double_yolk_eggs_distribution_achieved_current_year,onChange:b=>g(f=>({...f,double_yolk_eggs_distribution_achieved_current_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("input",{type:"text",value:c.double_yolk_eggs_distribution_achieved_previous_year,onChange:b=>g(f=>({...f,double_yolk_eggs_distribution_achieved_previous_year:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"    ",required:!0,disabled:m})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),r.jsx("input",{type:"text",value:c.double_yolk_eggs_distribution_remarks,onChange:b=>g(f=>({...f,double_yolk_eggs_distribution_remarks:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  ",required:!0,disabled:m})]})]})]})]}),E=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"   (Assessment and Instructions)"}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(C0,{className:"h-5 w-5 mr-2 text-red-600"}),"   (General Technical Assessment)"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),r.jsx("textarea",{value:c.general_technical_assessment,onChange:b=>g(f=>({...f,general_technical_assessment:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:6,placeholder:"      ",required:!0,disabled:m})]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(Te,{className:"h-5 w-5 mr-2 text-red-600"}),"  (Given Instructions)"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),r.jsx("textarea",{value:c.given_instructions,onChange:b=>g(f=>({...f,given_instructions:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:6,placeholder:"    ",required:!0,disabled:m})]})]})]}),v=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("fims.photoDocumentation")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Veterinary Inspection Photos"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"    "}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"photo-upload"}),r.jsxs("label",{htmlFor:"photo-upload",className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg cursor-pointer transition-colors duration-200",children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),i("fims.chooseFiles")]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 photos allowed"})]})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:[i("fims.uploadedPhotos")," (",x.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map((b,f)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(b),alt:`Veterinary inspection photo ${f+1}`,className:"w-full h-32 object-cover rounded-lg"}),!m&&r.jsx("button",{onClick:()=>D(f),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:b.name})]},f))})]}),m&&a?.fims_inspection_photos&&a.fims_inspection_photos.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Inspection Photos (",a.fims_inspection_photos.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.fims_inspection_photos.map((b,f)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:b.photo_url,alt:b.description||`Veterinary inspection photo ${f+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:b.photo_name||`Photo ${f+1}`}),b.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:b.description})]},b.id))})]}),m&&(!a?.fims_inspection_photos||a.fims_inspection_photos.length===0)&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{children:i("fims.noPhotosFound")})]}),w&&r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:i("fims.uploadingPhotos")})]})]}),S=()=>{switch(o){case 1:return V();case 2:return Q();case 3:return X();case 4:return ie();case 5:return L();case 6:return B();case 7:return l();case 8:return u();case 9:return E();case 10:return v();default:return null}},O=()=>{switch(o){case 1:return c.institute_name_address&&c.head_name_contact&&c.inspector_name_designation&&c.visit_date_time&&c.inspection_purpose_reason;case 2:return N.location_name;case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return!0;default:return!1}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[a?.mode==="view"&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:[i("fims.viewMode")," - ",i("fims.formReadOnly")]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 text-center",children:[a?.mode==="view"?i("fims.viewInspection"):a?.mode==="edit"?i("fims.editInspection"):i("fims.newInspection")," -  "]}),r.jsx("div",{className:"w-20"})]}),F(),r.jsxs("div",{className:"flex justify-center space-x-2 md:space-x-4 text-xs md:text-sm overflow-x-auto",children:[r.jsx("div",{className:`${o===1?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===2?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===3?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===4?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===5?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:""}),r.jsx("div",{className:`${o===6?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===7?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:""}),r.jsx("div",{className:`${o===8?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:" "}),r.jsx("div",{className:`${o===9?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:""}),r.jsx("div",{className:`${o===10?"text-red-600 font-medium":"text-gray-500"} whitespace-nowrap`,children:""})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-white via-red-50/30 to-pink-50/30 rounded-xl shadow-lg border-2 border-red-200 p-4 md:p-6 mb-4 md:mb-6",children:S()}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>d(b=>Math.max(1,b-1)),disabled:o===1,className:"px-4 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.previous")}),r.jsx("div",{className:"flex space-x-2 md:space-x-3",children:o===10?r.jsxs(r.Fragment,{children:[!m&&r.jsxs("button",{onClick:()=>q(!0),disabled:h||w,className:"px-3 md:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx($t,{className:"h-4 w-4"}),r.jsx("span",{children:i("fims.saveAsDraft")})]}),!m&&r.jsxs("button",{onClick:()=>q(!1),disabled:h||w,className:"px-3 md:px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50 transition-colors duration-200 flex items-center space-x-2 text-sm md:text-base",children:[r.jsx(Rt,{className:"h-4 w-4"}),r.jsx("span",{children:i($?"fims.updateInspection":"fims.submitInspection")})]})]}):r.jsx("button",{onClick:()=>d(b=>Math.min(10,b+1)),disabled:!O()||m,className:"px-4 md:px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm md:text-base",children:i("common.next")})})]})]})})},wy=({user:t,onBack:e,categories:s,onInspectionCreated:n,editingInspection:a})=>{const{t:i}=Be(),[o,d]=A.useState(null),[h,p]=A.useState(!1);A.useEffect(()=>{if(a&&s.length>0){const k=s.find(m=>m.id===a.category_id);k&&d(k.form_type)}},[a,s]),A.useEffect(()=>{if(a&&a.id&&s.length>0){const k=s.find(m=>m.id===a.category_id);k&&k.form_type&&d(k.form_type)}},[a,s]);const x=k=>{d(k)},_=()=>{if(a&&a.id){e();return}d(null)},w=()=>o==="anganwadi"?r.jsx(hy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="office"?r.jsx(my,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="bandhkam_vibhag1"?r.jsx(fy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="bandhkam_vibhag2"?r.jsx(gy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="rajya_shaishanik"?r.jsx(py,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="zp_dar_mahinyala"?r.jsx(xy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="rajya_gunwatta_nirikshak"?r.jsx(_y,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="mahatma_gandhi_rojgar_hami"?r.jsx(yy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="mumbai_nyayalay"?r.jsx(by,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):o==="pashutapasani"?r.jsx(vy,{user:t,onBack:_,categories:s,onInspectionCreated:n,editingInspection:a}):null;return o?w():r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[r.jsx(wt,{className:"h-5 w-5"}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{className:"text-lg md:text-2xl font-bold text-gray-900",children:i("fims.newInspection")}),r.jsx("div",{className:"w-20"})]}),r.jsx("p",{className:"text-sm md:text-base text-gray-600 text-center",children:i("fims.selectCategory")})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[r.jsxs("div",{onClick:()=>x("anganwadi"),className:"bg-gradient-to-br from-purple-100 via-purple-50 to-pink-50 rounded-lg shadow-lg border-2 border-purple-200 p-4 md:p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer hover:border-purple-400 touch-manipulation hover:from-purple-200 hover:via-purple-100 hover:to-pink-100",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:r.jsx(zm,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"  "}),r.jsx("p",{className:"text-sm md:text-base text-purple-700 font-medium",children:"  "})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-purple-800",children:[r.jsx("p",{children:"     "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "})]}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-purple-700 bg-white/50 px-3 py-1 rounded-full",children:"   "}),r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-2 rounded-full shadow-lg",children:r.jsx(rr,{className:"h-5 w-5 text-white"})})]})]}),r.jsxs("div",{onClick:()=>x("office"),className:"bg-gradient-to-br from-blue-100 via-blue-50 to-cyan-50 rounded-lg shadow-lg border-2 border-blue-200 p-4 md:p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer hover:border-blue-400 touch-manipulation hover:from-blue-200 hover:via-blue-100 hover:to-cyan-100",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:r.jsx(Te,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"  "}),r.jsx("p",{className:"text-sm md:text-base text-blue-700 font-medium",children:" "})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[r.jsx("p",{children:"     "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"   "})]}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-blue-700 bg-white/50 px-3 py-1 rounded-full",children:"   "}),r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-2 rounded-full shadow-lg",children:r.jsx(rr,{className:"h-5 w-5 text-white"})})]})]}),r.jsxs("div",{onClick:()=>x("rajya_shaishanik"),className:"bg-gradient-to-br from-green-100 via-green-50 to-emerald-50 rounded-lg shadow-lg border-2 border-green-200 p-4 md:p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer hover:border-green-400 touch-manipulation hover:from-green-200 hover:via-green-100 hover:to-emerald-100",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:r.jsx(mc,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"   "}),r.jsx("p",{className:"text-sm md:text-base text-green-700 font-medium",children:"    "})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[r.jsx("p",{children:"    "}),r.jsx("p",{children:" Khan Academy  "}),r.jsx("p",{children:" SQDP    "}),r.jsx("p",{children:"   "})]}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-green-700 bg-white/50 px-3 py-1 rounded-full",children:"   "}),r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-2 rounded-full shadow-lg",children:r.jsx(rr,{className:"h-5 w-5 text-white"})})]})]}),[{key:"bandhkam_vibhag1",title:"  -1",subtitle:"Construction Department Form-1",color:"orange",active:!0},{key:"bandhkam_vibhag2",title:"  -2",subtitle:"Construction Department Form-2",color:"teal",active:!0},{key:"zp_dar_mahinyala",title:"    ",subtitle:"ZP Monthly Report Form",color:"indigo",active:!0},{key:"rajya_gunwatta_nirikshak",title:"   ",subtitle:"State Quality Inspector Inspection",color:"emerald",active:!0},{key:"mahatma_gandhi_rojgar_hami",title:"    ",subtitle:"MGNREGA Work Inspection Form",color:"green",active:!0},{key:"mumbai_nyayalay",title:"   ",subtitle:"Mumbai High Court School Inspection Form",color:"red",active:!0},{key:"pashutapasani",title:"   ",subtitle:"Veterinary Institution Technical Inspection Form",color:"red",active:!0}].map((k,m)=>r.jsxs("div",{onClick:()=>k.active?x(k.key):alert(`${k.title} - Coming Soon!`),className:`bg-gradient-to-br from-${k.color}-100 via-${k.color}-50 to-${k.color}-50 rounded-lg shadow-lg border-2 border-${k.color}-200 p-4 md:p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer hover:border-${k.color}-400 touch-manipulation ${k.active?"":"opacity-75"}`,children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:`bg-gradient-to-br from-${k.color}-500 to-${k.color}-600 p-3 rounded-xl shadow-lg`,children:r.jsx(P0,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:k.title}),r.jsx("p",{className:`text-sm md:text-base text-${k.color}-700 font-medium`,children:k.subtitle})]})]}),r.jsx("div",{className:"space-y-2 text-sm text-gray-600",children:k.key==="bandhkam_vibhag1"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"     "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "})]}):k.key==="bandhkam_vibhag2"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"     "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"  "}),r.jsx("p",{children:"  "})]}):k.key==="zp_dar_mahinyala"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"    "}),r.jsx("p",{children:"   "}),r.jsx("p",{children:"   "}),r.jsx("p",{children:"   "})]}):k.key==="rajya_gunwatta_nirikshak"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"    "}),r.jsx("p",{children:"   "}),r.jsx("p",{children:"  "}),r.jsx("p",{children:"   "})]}):k.key==="mahatma_gandhi_rojgar_hami"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:" NREGA Soft  "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"    "})]}):k.key==="mumbai_nyayalay"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"     "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:"   "}),r.jsx("p",{children:"    "})]}):k.key==="pashutapasani"?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"      "}),r.jsx("p",{children:"     "}),r.jsx("p",{children:"     "}),r.jsx("p",{children:"     "}),r.jsx("p",{children:"     "})]}):r.jsx(r.Fragment,{})}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsx("span",{className:`text-sm font-bold text-${k.color}-700 bg-white/50 px-3 py-1 rounded-full`,children:k.active?"   ":"Coming Soon"}),r.jsx("div",{className:`bg-gradient-to-r from-${k.color}-500 to-${k.color}-600 p-2 rounded-full shadow-lg`,children:r.jsx(rr,{className:"h-5 w-5 text-white"})})]})]},k.key))]}),r.jsx("div",{className:"mt-6 md:mt-8 bg-gradient-to-r from-blue-100 via-cyan-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6 shadow-lg",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 p-2 rounded-lg shadow-md",children:r.jsx(ee,{className:"h-5 w-5 text-white flex-shrink-0"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-base font-bold text-blue-900 mb-2",children:i("fims.photoDocumentationRequired")}),r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:i("fims.photoDocumentationRequiredDesc")})]})]})}),r.jsx("div",{className:"mt-3 md:mt-4 bg-gradient-to-r from-amber-100 via-yellow-50 to-amber-100 border-2 border-amber-300 rounded-xl p-6 shadow-lg",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 p-2 rounded-lg shadow-md",children:r.jsx(be,{className:"h-5 w-5 text-white flex-shrink-0"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-base font-bold text-amber-900 mb-2",children:i("fims.gpsLocationCaptureRequired")}),r.jsx("p",{className:"text-sm text-amber-800 font-medium",children:i("fims.gpsLocationCaptureDesc")})]})]})})]})})},jy=({user:t,onSignOut:e})=>{const{t:s,i18n:n}=Be(),[a,i]=A.useState("dashboard"),[o,d]=A.useState(!1),[h,p]=A.useState([]),[x,_]=A.useState([]),[w,k]=A.useState([]),[m,$]=A.useState(""),[N,j]=A.useState(""),[c,g]=A.useState(""),[P,y]=A.useState(!1),[T,D]=A.useState(0),[I,H]=A.useState([]),[q,F]=A.useState(null),[V,Q]=A.useState(!1),[X,ie]=A.useState(""),[L,B]=A.useState([]),[l,u]=A.useState(""),[E,v]=A.useState(!1),[S,O]=A.useState(!1),[b,f]=A.useState(!1);A.useEffect(()=>{const R=()=>{const Y=navigator.userAgent||navigator.vendor||window.opera,He=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Y.toLowerCase())||window.innerWidth<=768;O(He)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),A.useEffect(()=>{C()},[]),q?.mode;const C=async()=>{d(!0);try{const[R,Y,ce]=await Promise.all([gp(t.id),_p(),bp()]);p(R),_(Y),B(ce)}catch(R){console.error("Error fetching data:",R)}finally{d(!1)}},U=async()=>{try{console.log(" Fetching inspections...");const{supabase:R}=await Ct(async()=>{const{supabase:He}=await Promise.resolve().then(()=>ra);return{supabase:He}},void 0);if(!R)throw new Error("Supabase client not initialized");const{data:Y,error:ce}=await R.from("fims_inspections").select(`
          *,
          fims_categories(name, name_marathi),
          fims_anganwadi_forms(*),
          fims_office_inspection_forms(*),
          fims_inspection_photos(*)
        `).order("created_at",{ascending:!1});if(ce)throw console.error("Database error:",ce),new Error(`Database error: ${ce.message}`);console.log(" Inspections fetched successfully:",Y?.length||0),p(Y||[])}catch(R){console.error(" Error in fetchInspections:",R),R.message.includes("Failed to fetch")?alert("Network connection error. Please check your internet connection and try again."):R.message.includes("JWT")?alert("Session expired. Please sign in again."):alert(`Error loading inspections: ${R.message}`)}},G=async()=>{try{const{supabase:R}=await Ct(async()=>{const{supabase:Y}=await Promise.resolve().then(()=>ra);return{supabase:Y}},void 0);R&&await R.auth.signOut(),e()}catch(R){console.error("Error signing out:",R)}},te=async R=>{if(confirm(s("fims.confirmDeleteInspection")||"Are you sure you want to delete this inspection?"))try{d(!0),await xp(R),alert(s("fims.inspectionDeletedSuccessfully")||"Inspection deleted successfully"),await U()}catch(Y){console.error("Error deleting inspection:",Y),alert(s("fims.errorDeletingInspection")||"Error deleting inspection: "+Y.message)}finally{d(!1)}},se=async R=>{try{const{supabase:Y}=await Ct(async()=>{const{supabase:He}=await Promise.resolve().then(()=>ra);return{supabase:He}},void 0);if(!Y)return;const{error:ce}=await Y.from("fims_inspections").update({status:"approved"}).eq("id",R);if(ce)throw ce;await U(),alert("Inspection marked as completed")}catch(Y){console.error("Error completing inspection:",Y),alert("Error completing inspection: "+Y.message)}},oe=R=>{ie(R),u(""),Q(!0)},pe=async()=>{if(!l){alert("Please select an inspector for revisit");return}try{d(!0),await yp(X,l),alert("Inspection assigned for revisit successfully"),Q(!1),C()}catch(R){console.error("Error sending for revisit:",R),alert("Error sending for revisit: "+R.message)}finally{d(!1)}},Ve=async R=>{try{const{supabase:Y}=await Ct(async()=>{const{supabase:xr}=await Promise.resolve().then(()=>ra);return{supabase:xr}},void 0);if(!Y)return;const{data:ce,error:He}=await Y.from("fims_inspection_photos").select("*").eq("inspection_id",R.id).order("photo_order");if(He)throw He;if(!ce||ce.length===0){alert(s("fims.noPhotosFound","No photos found for this inspection"));return}H(ce||[]),D(0),y(!0)}catch(Y){console.error("Error loading photos:",Y),alert("Error loading photos: "+Y.message)}},$n=()=>h.filter(R=>{const Y=c===""||R.location_name?.toLowerCase().includes(c.toLowerCase())||R.inspection_number?.toLowerCase().includes(c.toLowerCase()),ce=m===""||R.category_id===m,He=N===""||R.status===N;return Y&&ce&&He}),Rn=()=>{const R=h.length,Y=h.filter(xr=>["planned","in_progress","draft"].includes(xr.status)).length,ce=h.filter(xr=>xr.status==="approved").length,He=h.filter(xr=>xr.status==="submitted").length;return{total:R,pending:Y,completed:ce,submitted:He}},Sp=()=>{const{total:R,completed:Y}=Rn();return R===0?0:Math.round(Y/R*100)},On=R=>s(`statuses.${R}`,R.toUpperCase()),Cp=[{id:"dashboard",icon:el,title:s("fims.dashboard"),description:s("dashboard.overview"),color:"bg-purple-500"},{id:"inspections",icon:Te,title:s("fims.inspections"),description:s("fims.viewAndManageInspections"),color:"bg-blue-500"},{id:"newInspection",icon:rr,title:s("fims.newInspection"),description:s("fims.createNewInspection"),color:"bg-green-500"}],Ep=()=>r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-50 md:hidden",children:r.jsx("div",{className:"flex justify-around items-center",children:Cp.map(R=>r.jsxs("button",{onClick:()=>{i(R.id),f(!1)},className:`flex flex-col items-center space-y-1 p-2 rounded-lg transition-all duration-200 ${a===R.id?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"}`,children:[r.jsx(R.icon,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:R.title})]},R.id))})}),Pp=()=>r.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 md:hidden",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:r.jsx(ee,{className:"h-5 w-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"FIMS"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Field Inspection"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>v(!E),className:"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-50 rounded-lg",children:r.jsx("div",{className:"bg-purple-100 p-1.5 rounded-full",children:r.jsx(Xe,{className:"h-4 w-4 text-purple-600"})})}),E&&r.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-[60]",children:[r.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:r.jsx(Xe,{className:"h-4 w-4 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:t.email?.split("@")[0]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Field Inspector"})]})]})}),r.jsxs("div",{className:"py-2",children:[r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[r.jsx(Xe,{className:"h-4 w-4"}),r.jsx("span",{children:s("profile.userProfile")})]}),r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[r.jsx(Ld,{className:"h-4 w-4"}),r.jsx("span",{children:s("navigation.settings")})]})]}),r.jsx("div",{className:"border-t border-gray-100 pt-2",children:r.jsxs("button",{onClick:G,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center space-x-3",children:[r.jsx(Rd,{className:"h-4 w-4"}),r.jsx("span",{children:s("auth.signOut")})]})})]})]})]})});if(a==="analytics")return r.jsx(uy,{user:t,onBack:()=>i("dashboard")});const Tp=()=>r.jsxs("div",{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:s("fims.totalInspections")}),r.jsx("p",{className:"text-3xl font-bold",children:Rn().total})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:r.jsx(Te,{className:"h-8 w-8 text-white"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm font-medium",children:s("fims.completed")}),r.jsx("p",{className:"text-3xl font-bold",children:Rn().completed})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:r.jsx(Pn,{className:"h-8 w-8 text-white"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-100 text-sm font-medium",children:s("fims.pending")}),r.jsx("p",{className:"text-3xl font-bold",children:Rn().pending})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:r.jsx(Ba,{className:"h-8 w-8 text-white"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:s("fims.successRate")}),r.jsxs("p",{className:"text-3xl font-bold",children:[Sp(),"%"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:r.jsx(fc,{className:"h-8 w-8 text-white"})})]})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-cyan-50/30 rounded-xl shadow-lg border-2 border-blue-200 p-4 md:p-6",children:[r.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(pc,{className:"h-6 w-6 mr-2 text-blue-600"}),s("fims.quickActions")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>i("newInspection"),className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white p-4 rounded-lg transition-all duration-200 flex items-center space-x-3 hover:shadow-lg hover:scale-105",children:[r.jsx(rr,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:s("fims.newInspection")})]}),r.jsxs("button",{onClick:()=>i("inspections"),className:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white p-4 rounded-lg transition-all duration-200 flex items-center space-x-3 hover:shadow-lg hover:scale-105",children:[r.jsx(Te,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:s("fims.inspections")})]}),r.jsxs("button",{onClick:()=>i("analytics"),className:"bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white p-4 rounded-lg transition-all duration-200 flex items-center space-x-3 hover:shadow-lg hover:scale-105",children:[r.jsx(Vm,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:s("fims.analytics")})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-4 md:px-6 py-3 md:py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900",children:s("fims.recentInspections")})}),r.jsx("div",{className:"overflow-x-auto hidden md:block",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.inspectionNumber")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.location")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.category")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.status")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.date")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.actions")})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.slice(0,5).map(R=>{const Y=x.find(ce=>ce.id===R.category_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.inspection_number}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.location_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y?s(`categories.${Y.form_type}`,Y.name):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.status==="approved"?"bg-green-100 text-green-800":R.status==="submitted"?"bg-blue-100 text-blue-800":R.status==="draft"?"bg-yellow-100 text-yellow-800":R.status==="in_progress"?"bg-orange-100 text-orange-800":R.status==="rejected"?"bg-red-100 text-red-800":R.status==="reassigned"?"bg-purple-100 text-purple-800":R.status==="under_review"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:On(R.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.inspection_date?new Date(R.inspection_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("button",{onClick:()=>{F({...R,mode:"view"}),i("newInspection")},className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"View Inspection",children:r.jsx(Tr,{className:"h-4 w-4"})})})]},R.id)})})]})}),r.jsx("div",{className:"md:hidden",children:h.slice(0,5).map(R=>{const Y=x.find(ce=>ce.id===R.category_id);return r.jsxs("div",{className:"border-b border-gray-100 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:R.inspection_number}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.status==="approved"?"bg-green-100 text-green-800":R.status==="submitted"?"bg-blue-100 text-blue-800":R.status==="draft"?"bg-yellow-100 text-yellow-800":R.status==="in_progress"?"bg-orange-100 text-orange-800":R.status==="rejected"?"bg-red-100 text-red-800":R.status==="reassigned"?"bg-purple-100 text-purple-800":R.status==="under_review"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:On(R.status)})]}),r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:R.location_name}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsx("span",{children:Y?s(`categories.${Y.form_type}`,Y.name):"-"}),r.jsx("span",{children:R.inspection_date?new Date(R.inspection_date).toLocaleDateString():"-"})]})]},R.id)})})]})]}),Ap=()=>r.jsxs("div",{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900",children:s("fims.inspections")}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs("button",{onClick:()=>i("newInspection"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all duration-200 text-sm md:text-base",children:[r.jsx(rr,{className:"h-4 w-4"}),r.jsx("span",{children:s("fims.newInspection")})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:s("fims.searchInspections"),value:c,onChange:R=>g(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm md:text-base"})]}),r.jsxs("select",{value:m,onChange:R=>$(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm md:text-base",children:[r.jsx("option",{value:"",children:s("fims.allCategories")}),x.map(R=>r.jsx("option",{value:R.id,children:s(`categories.${R.form_type}`,R.name)},R.id))]}),r.jsxs("select",{value:N,onChange:R=>j(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm md:text-base",children:[r.jsx("option",{value:"",children:s("fims.allStatuses")}),r.jsx("option",{value:"planned",children:"Planned"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"reassigned",children:"Reassigned"}),r.jsx("option",{value:"under_review",children:"Under Review"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-4 md:px-6 py-3 md:py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900",children:s("fims.inspections")})}),r.jsx("div",{className:"overflow-x-auto hidden md:block",children:r.jsxs("table",{className:"w-full bg-gradient-to-br from-blue-50 to-cyan-50 divide-y divide-blue-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{className:"bg-gradient-to-r from-blue-200 via-blue-100 to-cyan-100 border-b-2 border-blue-300",children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider bg-gradient-to-r from-blue-300 to-blue-200 shadow-sm",children:s("fims.inspectionNumber")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.location")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.category")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider bg-gradient-to-r from-blue-300 to-blue-200 shadow-sm",children:s("fims.status")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.date")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("fims.locationAccuracy")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider bg-gradient-to-r from-blue-300 to-blue-200 shadow-sm",children:s("fims.actions")}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photos"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Complete/Revisit"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$n().length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"px-6 py-8 text-center text-gray-500",children:s("fims.noInspectionsFound")})}):$n().map((R,Y)=>{const ce=x.find(He=>He.id===R.category_id);return r.jsxs("tr",{className:`
                        ${Y%2===0?"bg-gradient-to-r from-blue-50 to-cyan-50":"bg-gradient-to-r from-white to-blue-25"}
                        hover:bg-gradient-to-r hover:from-blue-100 hover:to-cyan-100 
                        transition-all duration-300 ease-in-out
                        border-l-4 border-transparent hover:border-blue-400
                      `,children:[r.jsx("td",{className:"px-6 py-4 text-blue-800 hover:text-blue-600 transition-colors duration-200",children:r.jsx("div",{className:"text-sm text-blue-500 hover:text-blue-400 truncate max-w-xs transition-colors duration-200",children:R.inspection_number})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-900 hover:text-blue-700 transition-colors duration-200",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:R.location_name}),R.address&&r.jsx("div",{className:"text-xs text-gray-500",children:R.address})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-800 hover:text-blue-600 transition-colors duration-200",children:ce?s(`categories.${ce.form_type}`,ce.name):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.status==="approved"?"bg-green-100 text-green-800":R.status==="submitted"?"bg-blue-100 text-blue-800":R.status==="draft"?"bg-yellow-100 text-yellow-800":R.status==="in_progress"?"bg-orange-100 text-orange-800":R.status==="rejected"?"bg-red-100 text-red-800":R.status==="reassigned"?"bg-purple-100 text-purple-800":R.status==="under_review"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:On(R.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.inspection_date?new Date(R.inspection_date).toLocaleDateString():R.planned_date?new Date(R.planned_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.location_accuracy?`${Math.round(R.location_accuracy)}m`:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700 hover:text-blue-500 transition-colors duration-200",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>{F({...R,mode:"view"}),i("newInspection")},className:`
                              bg-gradient-to-r from-blue-500 to-blue-600 
                              hover:from-blue-600 hover:to-blue-700
                              text-white px-3 py-1 rounded-lg shadow-md
                              hover:shadow-lg hover:scale-105 
                              transition-all duration-200
                              flex items-center space-x-1
                            `,title:"View Inspection",children:[r.jsx(Tr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-xs font-medium",children:"View"})]}),r.jsxs("button",{onClick:()=>{F({...R,mode:"edit"}),i("newInspection")},className:`
                              bg-gradient-to-r from-green-500 to-green-600 
                              hover:from-green-600 hover:to-green-700
                              text-white px-3 py-1 rounded-lg shadow-md
                              hover:shadow-lg hover:scale-105 
                              transition-all duration-200
                              flex items-center space-x-1
                            `,title:"Edit Inspection",children:[r.jsx(Dd,{className:"h-4 w-4"}),r.jsx("span",{className:"text-xs font-medium",children:"Edit"})]}),r.jsxs("button",{onClick:()=>te(R.id),className:`
                              bg-gradient-to-r from-red-500 to-red-600 
                              hover:from-red-600 hover:to-red-700
                              text-white px-3 py-1 rounded-lg shadow-md
                              hover:shadow-lg hover:scale-105 
                              transition-all duration-200
                              flex items-center space-x-1
                            `,title:"Delete Inspection",children:[r.jsx(I0,{className:"h-4 w-4"}),r.jsx("span",{className:"text-xs font-medium",children:"Delete"})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("button",{onClick:()=>Ve(R),className:"text-purple-600 hover:text-purple-900 p-1 rounded",title:"View Photos",children:r.jsx(ee,{className:"h-4 w-4"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>se(R.id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 hover:bg-green-200 rounded",title:"Complete",children:"Complete"}),r.jsx("button",{onClick:()=>oe(R.id),className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 hover:bg-orange-200 rounded",title:"Revisit",children:"Revisit"})]})})]},R.id)})})]})}),r.jsx("div",{className:"md:hidden",children:$n().length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:s("fims.noInspectionsFound")}):$n().map(R=>{const Y=x.find(ce=>ce.id===R.category_id);return r.jsxs("div",{className:"border-b border-gray-100 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:R.inspection_number}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.status==="approved"?"bg-green-100 text-green-800":R.status==="submitted"?"bg-blue-100 text-blue-800":R.status==="draft"?"bg-yellow-100 text-yellow-800":R.status==="in_progress"?"bg-orange-100 text-orange-800":R.status==="rejected"?"bg-red-100 text-red-800":R.status==="reassigned"?"bg-purple-100 text-purple-800":R.status==="under_review"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:On(R.status)})]}),r.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[r.jsx("div",{className:"font-medium",children:R.location_name}),R.address&&r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:R.address})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[r.jsx("span",{children:Y?s(`categories.${Y.form_type}`,Y.name):"-"}),r.jsx("span",{children:R.inspection_date?new Date(R.inspection_date).toLocaleDateString():R.planned_date?new Date(R.planned_date).toLocaleDateString():"-"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>{F({...R,mode:"view"}),i("newInspection")},className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"View",children:r.jsx(Tr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>{F({...R,mode:"edit"}),i("newInspection")},className:"text-green-600 hover:text-green-900 p-1 rounded",title:"Edit",children:r.jsx(Dd,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ve(R),className:"text-purple-600 hover:text-purple-900 p-1 rounded",title:"Photos",children:r.jsx(ee,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>se(R.id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 hover:bg-green-200 rounded",children:"Complete"}),r.jsx("button",{onClick:()=>oe(R.id),className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 hover:bg-orange-200 rounded",children:"Revisit"})]})]})]},R.id)})})]})]}),$p=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg",children:s("fims.comingSoon")}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Analytics and reporting features will be available soon."})]}),Rp=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg",children:s("fims.comingSoon")}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Reports and export features will be available soon."})]});return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[S&&Pp(),r.jsx("div",{className:"hidden md:block bg-white border-b border-gray-200",children:r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-400 p-3 rounded-full shadow-lg",children:r.jsx(ee,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent",children:"FIMS"}),r.jsx("p",{className:"text-gray-600",children:s("fims.fullName")})]})]}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("nav",{className:"flex space-x-6",children:[r.jsxs("button",{onClick:()=>i("dashboard"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${a==="dashboard"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"}`,children:[r.jsx(el,{className:"h-5 w-5"}),r.jsx("span",{children:s("fims.dashboard")})]}),r.jsxs("button",{onClick:()=>i("inspections"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${a==="inspections"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"}`,children:[r.jsx(Te,{className:"h-5 w-5"}),r.jsx("span",{children:s("fims.inspections")})]}),r.jsxs("button",{onClick:()=>i("newInspection"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${a==="newInspection"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"}`,children:[r.jsx(rr,{className:"h-5 w-5"}),r.jsx("span",{children:s("fims.newInspection")})]}),r.jsxs("button",{onClick:()=>i("analytics"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${a==="analytics"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"}`,children:[r.jsx(za,{className:"h-5 w-5"}),r.jsx("span",{children:s("fims.analytics")})]})]}),r.jsx(oy,{}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>v(!E),className:"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:r.jsx(Xe,{className:"h-5 w-5 text-purple-600"})}),r.jsx(uc,{className:"h-4 w-4"})]}),E&&r.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-[60]",children:[r.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:r.jsx(Xe,{className:"h-5 w-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:t.email?.split("@")[0]}),r.jsx("div",{className:"text-sm text-gray-500",children:"Field Inspector"})]})]})}),r.jsxs("div",{className:"py-2",children:[r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[r.jsx(Xe,{className:"h-4 w-4"}),r.jsx("span",{children:s("profile.userProfile")})]}),r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[r.jsx(Ld,{className:"h-4 w-4"}),r.jsx("span",{children:s("navigation.settings")})]})]}),r.jsx("div",{className:"border-t border-gray-100 pt-2",children:r.jsxs("button",{onClick:G,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center space-x-3",children:[r.jsx(Rd,{className:"h-4 w-4"}),r.jsx("span",{children:s("auth.signOut")})]})})]})]})]})]})})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto h-full pb-20 md:pb-6",children:[a==="dashboard"&&Tp(),a==="inspections"&&Ap(),a==="newInspection"&&r.jsx(wy,{user:t,onBack:()=>{F(null),i("dashboard")},categories:x,onInspectionCreated:U,editingInspection:q}),a==="analytics"&&$p(),a==="reports"&&Rp()]})}),S&&Ep(),P&&I.length>0&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:r.jsxs("div",{className:"max-w-4xl max-h-[90vh] bg-white rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Photo ",T+1," of ",I.length]}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Id,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("img",{src:I[T]?.photo_url,alt:I[T]?.photo_name||"Inspection photo",className:"max-w-full max-h-[70vh] object-contain mx-auto"}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("p",{className:"text-sm text-gray-600",children:I[T]?.description})}),r.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4",children:[r.jsx("button",{onClick:()=>D(Math.max(0,T-1)),disabled:T===0,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>D(Math.min(I.length-1,T+1)),disabled:T===I.length-1,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50",children:"Next"})]})]})]})}),V&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("fims.assignForRevisit","Assign for Revisit")}),r.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Id,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("fims.selectInspector","Select Inspector")}),r.jsxs("select",{value:l,onChange:R=>u(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:s("fims.chooseInspector","Choose Inspector")}),L.map(R=>r.jsxs("option",{value:R.user_id,children:[R.name," (",R.roles?.name||"Inspector",")"]},R.user_id))]})]}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(hi,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{children:r.jsx("p",{className:"text-sm text-amber-800",children:s("fims.revisitNote",'This inspection will be reassigned to the selected inspector for revisit. The status will be changed to "In Progress".')})})]})})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[r.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",children:s("common.cancel")}),r.jsx("button",{onClick:pe,disabled:o||!l,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200 disabled:opacity-50",children:o?s("common.saving"):s("fims.assignForRevisit","Assign for Revisit")})]})]})})]})};function Ny(){const{t}=Be(),[e,s]=A.useState(null),[n,a]=A.useState(!0),[i,o]=A.useState(!1),[d,h]=A.useState({accessToken:null,refreshToken:null});A.useEffect(()=>{(()=>{const m=new URLSearchParams(window.location.search),$=new URLSearchParams(window.location.hash.substring(1)),N=m.get("type")||$.get("type"),j=m.get("access_token")||$.get("access_token"),c=m.get("refresh_token")||$.get("refresh_token");return N==="recovery"&&j&&c?(console.log("Recovery URL detected:",{type:N,accessToken:j,refreshToken:c}),o(!0),h({accessToken:j,refreshToken:c}),window.history.replaceState&&window.history.replaceState(null,"",window.location.pathname),!0):!1})(),(async()=>{if(!At||!M){a(!1);return}try{const{data:{user:m}}=await M.auth.getUser();s(m)}catch(m){console.error("Error checking user:",m),m instanceof Error&&m.message.includes("Invalid Refresh Token")&&(localStorage.removeItem("supabase.auth.token"),sessionStorage.removeItem("supabase.auth.token"),await M.auth.signOut()),s(null)}finally{a(!1)}})();let k=null;if(At&&M){const{data:{subscription:m}}=M.auth.onAuthStateChange(($,N)=>{console.log("Auth event:",$,"Session:",N),s(N?.user??null),$==="PASSWORD_RECOVERY"&&o(!0),a(!1)});k=m}return()=>{k&&k.unsubscribe()}},[]);const p=()=>{},x=()=>{s(null),o(!1)};return n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):At?i||!e?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-400 p-3 rounded-full shadow-lg",children:r.jsx(ee,{className:"h-8 w-8 text-white"})})}),r.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent mb-2",children:"FIMS"}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:t("systems.fims.fullName")}),r.jsx("p",{className:"text-gray-500 text-xs",children:t("systems.fims.description")})]}),r.jsx(iy,{onSignInSuccess:p,forceResetMode:i,accessToken:d.accessToken,refreshToken:d.refreshToken}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:t("auth.secureAccess","Secure access to field inspection management system")})})]})})}):r.jsx(jy,{user:e,onSignOut:x}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center",children:r.jsx("div",{className:"w-full max-w-md mx-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md mx-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Configuration Required"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Supabase environment variables are missing or invalid."}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-left",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Required steps:"}),r.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:"1. Create a .env file in project root"}),r.jsx("li",{children:"2. Add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY"}),r.jsx("li",{children:"3. Get values from Supabase dashboard"}),r.jsx("li",{children:"4. Restart the development server"})]})]}),pl.length>0&&r.jsxs("div",{className:"mt-4 bg-red-50 p-3 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Errors:"}),r.jsx("ul",{className:"text-xs text-red-700 space-y-1",children:pl.map((_,w)=>r.jsxs("li",{children:[" ",_]},w))})]})]})})})})}const J=t=>typeof t=="string",Ds=()=>{let t,e;const s=new Promise((n,a)=>{t=n,e=a});return s.resolve=t,s.reject=e,s},su=t=>t==null?"":""+t,ky=(t,e,s)=>{t.forEach(n=>{e[n]&&(s[n]=e[n])})},Sy=/###/g,nu=t=>t&&t.indexOf("###")>-1?t.replace(Sy,"."):t,au=t=>!t||J(t),en=(t,e,s)=>{const n=J(e)?e.split("."):e;let a=0;for(;a<n.length-1;){if(au(t))return{};const i=nu(n[a]);!t[i]&&s&&(t[i]=new s),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++a}return au(t)?{}:{obj:t,k:nu(n[a])}},iu=(t,e,s)=>{const{obj:n,k:a}=en(t,e,Object);if(n!==void 0||e.length===1){n[a]=s;return}let i=e[e.length-1],o=e.slice(0,e.length-1),d=en(t,o,Object);for(;d.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),d=en(t,o,Object),d?.obj&&typeof d.obj[`${d.k}.${i}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${i}`]=s},Cy=(t,e,s,n)=>{const{obj:a,k:i}=en(t,e,Object);a[i]=a[i]||[],a[i].push(s)},Ka=(t,e)=>{const{obj:s,k:n}=en(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,n))return s[n]},Ey=(t,e,s)=>{const n=Ka(t,s);return n!==void 0?n:Ka(e,s)},vp=(t,e,s)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?J(t[n])||t[n]instanceof String||J(e[n])||e[n]instanceof String?s&&(t[n]=e[n]):vp(t[n],e[n],s):t[n]=e[n]);return t},Hr=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Py={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ty=t=>J(t)?t.replace(/[&<>"'\/]/g,e=>Py[e]):t;class Ay{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const $y=[" ",",","?","!",";"],Ry=new Ay(20),Oy=(t,e,s)=>{e=e||"",s=s||"";const n=$y.filter(o=>e.indexOf(o)<0&&s.indexOf(o)<0);if(n.length===0)return!0;const a=Ry.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(s);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i},fl=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(s);let a=t;for(let i=0;i<n.length;){if(!a||typeof a!="object")return;let o,d="";for(let h=i;h<n.length;++h)if(h!==i&&(d+=s),d+=n[h],o=a[d],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&h<n.length-1)continue;i+=h-i+1;break}a=o}return a},vn=t=>t?.replace("_","-"),Ly={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class Ga{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||Ly,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,n,a){return a&&!this.debug?null:(J(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Ga(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ga(this.logger,e)}}var Et=new Ga;class bi{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(s)||0;this.observers[n].set(s,a+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([a,i])=>{for(let o=0;o<i;o++)a(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let o=0;o<i;o++)a.apply(a,[e,...s])})}}class ou extends bi{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,n,a={}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,s],n&&(Array.isArray(n)?d.push(...n):J(n)&&i?d.push(...n.split(i)):d.push(n)));const h=Ka(this.data,d);return!h&&!s&&!n&&e.indexOf(".")>-1&&(e=d[0],s=d[1],n=d.slice(2).join(".")),h||!o||!J(n)?h:fl(this.data?.[e]?.[s],n,i)}addResource(e,s,n,a,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let d=[e,s];n&&(d=d.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(d=e.split("."),a=s,s=d[1]),this.addNamespaces(s),iu(this.data,d,a),i.silent||this.emit("added",e,s,n,a)}addResources(e,s,n,a={silent:!1}){for(const i in n)(J(n[i])||Array.isArray(n[i]))&&this.addResource(e,s,i,n[i],{silent:!0});a.silent||this.emit("added",e,s,n)}addResourceBundle(e,s,n,a,i,o={silent:!1,skipCopy:!1}){let d=[e,s];e.indexOf(".")>-1&&(d=e.split("."),a=n,n=s,s=d[1]),this.addNamespaces(s);let h=Ka(this.data,d)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?vp(h,n,i):h={...h,...n},iu(this.data,d,h),o.silent||this.emit("added",e,s,n)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(a=>s[a]&&Object.keys(s[a]).length>0)}toJSON(){return this.data}}var wp={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,n,a){return t.forEach(i=>{e=this.processors[i]?.process(e,s,n,a)??e}),e}};const lu={},cu=t=>!J(t)&&typeof t!="boolean"&&typeof t!="number";class Qa extends bi{constructor(e,s={}){super(),ky(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Et.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const n={...s};return e==null?!1:this.resolve(e,n)?.res!==void 0}extractFromKey(e,s){let n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=s.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Oy(e,n,a);if(o&&!d){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:J(i)?[i]:i};const p=e.split(n);(n!==a||n===a&&this.options.ns.indexOf(p[0])>-1)&&(i=p.shift()),e=p.join(a)}return{key:e,namespaces:J(i)?[i]:i}}translate(e,s,n){let a=typeof s=="object"?{...s}:s;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(a={...a}),a||(a={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:d,namespaces:h}=this.extractFromKey(e[e.length-1],a),p=h[h.length-1];let x=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;x===void 0&&(x=":");const _=a.lng||this.language,w=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_?.toLowerCase()==="cimode")return w?i?{res:`${p}${x}${d}`,usedKey:d,exactUsedKey:d,usedLng:_,usedNS:p,usedParams:this.getUsedParamsDetails(a)}:`${p}${x}${d}`:i?{res:d,usedKey:d,exactUsedKey:d,usedLng:_,usedNS:p,usedParams:this.getUsedParamsDetails(a)}:d;const k=this.resolve(e,a);let m=k?.res;const $=k?.usedKey||d,N=k?.exactUsedKey||d,j=["[object Number]","[object Function]","[object RegExp]"],c=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,P=a.count!==void 0&&!J(a.count),y=Qa.hasDefaultValue(a),T=P?this.pluralResolver.getSuffix(_,a.count,a):"",D=a.ordinal&&P?this.pluralResolver.getSuffix(_,a.count,{ordinal:!1}):"",I=P&&!a.ordinal&&a.count===0,H=I&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${T}`]||a[`defaultValue${D}`]||a.defaultValue;let q=m;g&&!m&&y&&(q=H);const F=cu(q),V=Object.prototype.toString.apply(q);if(g&&q&&F&&j.indexOf(V)<0&&!(J(c)&&Array.isArray(q))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Q=this.options.returnedObjectHandler?this.options.returnedObjectHandler($,q,{...a,ns:h}):`key '${d} (${this.language})' returned an object instead of string.`;return i?(k.res=Q,k.usedParams=this.getUsedParamsDetails(a),k):Q}if(o){const Q=Array.isArray(q),X=Q?[]:{},ie=Q?N:$;for(const L in q)if(Object.prototype.hasOwnProperty.call(q,L)){const B=`${ie}${o}${L}`;y&&!m?X[L]=this.translate(B,{...a,defaultValue:cu(H)?H[L]:void 0,joinArrays:!1,ns:h}):X[L]=this.translate(B,{...a,joinArrays:!1,ns:h}),X[L]===B&&(X[L]=q[L])}m=X}}else if(g&&J(c)&&Array.isArray(m))m=m.join(c),m&&(m=this.extendTranslation(m,e,a,n));else{let Q=!1,X=!1;!this.isValidLookup(m)&&y&&(Q=!0,m=H),this.isValidLookup(m)||(X=!0,m=d);const L=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&X?void 0:m,B=y&&H!==m&&this.options.updateMissing;if(X||Q||B){if(this.logger.log(B?"updateKey":"missingKey",_,p,d,B?H:m),o){const v=this.resolve(d,{...a,keySeparator:!1});v&&v.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let l=[];const u=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&u&&u[0])for(let v=0;v<u.length;v++)l.push(u[v]);else this.options.saveMissingTo==="all"?l=this.languageUtils.toResolveHierarchy(a.lng||this.language):l.push(a.lng||this.language);const E=(v,S,O)=>{const b=y&&O!==m?O:L;this.options.missingKeyHandler?this.options.missingKeyHandler(v,p,S,b,B,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(v,p,S,b,B,a),this.emit("missingKey",v,p,S,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?l.forEach(v=>{const S=this.pluralResolver.getSuffixes(v,a);I&&a[`defaultValue${this.options.pluralSeparator}zero`]&&S.indexOf(`${this.options.pluralSeparator}zero`)<0&&S.push(`${this.options.pluralSeparator}zero`),S.forEach(O=>{E([v],d+O,a[`defaultValue${O}`]||H)})}):E(l,d,H))}m=this.extendTranslation(m,e,a,k,n),X&&m===d&&this.options.appendNamespaceToMissingKey&&(m=`${p}${x}${d}`),(X||Q)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}${x}${d}`:d,Q?m:void 0,a))}return i?(k.res=m,k.usedParams=this.getUsedParamsDetails(a),k):m}extendTranslation(e,s,n,a,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const h=J(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(h){const _=e.match(this.interpolator.nestingRegexp);p=_&&_.length}let x=n.replace&&!J(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),e=this.interpolator.interpolate(e,x,n.lng||this.language||a.usedLng,n),h){const _=e.match(this.interpolator.nestingRegexp),w=_&&_.length;p<w&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(..._)=>i?.[0]===_[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${s[0]}`),null):this.translate(..._,s),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,d=J(o)?[o]:o;return e!=null&&d?.length&&n.applyPostProcessor!==!1&&(e=wp.handle(d,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,s={}){let n,a,i,o,d;return J(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(n))return;const p=this.extractFromKey(h,s),x=p.key;a=x;let _=p.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const w=s.count!==void 0&&!J(s.count),k=w&&!s.ordinal&&s.count===0,m=s.context!==void 0&&(J(s.context)||typeof s.context=="number")&&s.context!=="",$=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);_.forEach(N=>{this.isValidLookup(n)||(d=N,!lu[`${$[0]}-${N}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(lu[`${$[0]}-${N}`]=!0,this.logger.warn(`key "${a}" for languages "${$.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),$.forEach(j=>{if(this.isValidLookup(n))return;o=j;const c=[x];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(c,x,j,N,s);else{let P;w&&(P=this.pluralResolver.getSuffix(j,s.count,s));const y=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(w&&(s.ordinal&&P.indexOf(T)===0&&c.push(x+P.replace(T,this.options.pluralSeparator)),c.push(x+P),k&&c.push(x+y)),m){const D=`${x}${this.options.contextSeparator||"_"}${s.context}`;c.push(D),w&&(s.ordinal&&P.indexOf(T)===0&&c.push(D+P.replace(T,this.options.pluralSeparator)),c.push(D+P),k&&c.push(D+y))}}let g;for(;g=c.pop();)this.isValidLookup(n)||(i=g,n=this.getResource(j,N,g,s))}))})}),{res:n,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,n,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,s,n,a):this.resourceStore.getResource(e,s,n,a)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!J(e.replace);let a=n?e.replace:e;if(n&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const i of s)delete a[i]}return a}static hasDefaultValue(e){const s="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&s===n.substring(0,s.length)&&e[n]!==void 0)return!0;return!1}}class du{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Et.create("languageUtils")}getScriptPartFromCode(e){if(e=vn(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=vn(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(J(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(n=>{if(s)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(s=a)}),!s&&this.options.supportedLngs&&e.forEach(n=>{if(s)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return s=a;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return s=i;s=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),J(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let n=e[s];return n||(n=e[this.getScriptPartFromCode(s)]),n||(n=e[this.formatLanguageCode(s)]),n||(n=e[this.getLanguagePartFromCode(s)]),n||(n=e.default),n||[]}toResolveHierarchy(e,s){const n=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return J(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):J(e)&&i(this.formatLanguageCode(e)),n.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}const uu={zero:0,one:1,two:2,few:3,many:4,other:5},hu={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Dy{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=Et.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const n=vn(e==="dev"?"en":e),a=s.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),hu;if(!e.match(/-|_/))return hu;const h=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(h,s)}return this.pluralRulesCache[i]=o,o}needsPlural(e,s={}){let n=this.getRule(e,s);return n||(n=this.getRule("dev",s)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,s,n={}){return this.getSuffixes(e,n).map(a=>`${s}${a}`)}getSuffixes(e,s={}){let n=this.getRule(e,s);return n||(n=this.getRule("dev",s)),n?n.resolvedOptions().pluralCategories.sort((a,i)=>uu[a]-uu[i]).map(a=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,s,n={}){const a=this.getRule(e,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,n))}}const mu=(t,e,s,n=".",a=!0)=>{let i=Ey(t,e,s);return!i&&a&&J(s)&&(i=fl(t,s,n),i===void 0&&(i=fl(e,s,n))),i},so=t=>t.replace(/\$/g,"$$$$");class Iy{constructor(e={}){this.logger=Et.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(s=>s),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:n,useRawValueToEscape:a,prefix:i,prefixEscaped:o,suffix:d,suffixEscaped:h,formatSeparator:p,unescapeSuffix:x,unescapePrefix:_,nestingPrefix:w,nestingPrefixEscaped:k,nestingSuffix:m,nestingSuffixEscaped:$,nestingOptionsSeparator:N,maxReplaces:j,alwaysFormat:c}=e.interpolation;this.escape=s!==void 0?s:Ty,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Hr(i):o||"{{",this.suffix=d?Hr(d):h||"}}",this.formatSeparator=p||",",this.unescapePrefix=x?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=w?Hr(w):k||Hr("$t("),this.nestingSuffix=m?Hr(m):$||Hr(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=j||1e3,this.alwaysFormat=c!==void 0?c:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,n)=>s?.source===n?(s.lastIndex=0,s):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,s,n,a){let i,o,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=k=>{if(k.indexOf(this.formatSeparator)<0){const j=mu(s,h,k,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(j,void 0,n,{...a,...s,interpolationkey:k}):j}const m=k.split(this.formatSeparator),$=m.shift().trim(),N=m.join(this.formatSeparator).trim();return this.format(mu(s,h,$,this.options.keySeparator,this.options.ignoreJSONStructure),N,n,{...a,...s,interpolationkey:$})};this.resetRegExp();const x=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,_=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:k=>so(k)},{regex:this.regexp,safeValue:k=>this.escapeValue?so(this.escape(k)):so(k)}].forEach(k=>{for(d=0;i=k.regex.exec(e);){const m=i[1].trim();if(o=p(m),o===void 0)if(typeof x=="function"){const N=x(e,i,a);o=J(N)?N:""}else if(a&&Object.prototype.hasOwnProperty.call(a,m))o="";else if(_){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else!J(o)&&!this.useRawValueToEscape&&(o=su(o));const $=k.safeValue(o);if(e=e.replace(i[0],$),_?(k.regex.lastIndex+=o.length,k.regex.lastIndex-=i[0].length):k.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,s,n={}){let a,i,o;const d=(h,p)=>{const x=this.nestingOptionsSeparator;if(h.indexOf(x)<0)return h;const _=h.split(new RegExp(`${x}[ ]*{`));let w=`{${_[1]}`;h=_[0],w=this.interpolate(w,o);const k=w.match(/'/g),m=w.match(/"/g);((k?.length??0)%2===0&&!m||m.length%2!==0)&&(w=w.replace(/'/g,'"'));try{o=JSON.parse(w),p&&(o={...p,...o})}catch($){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,$),`${h}${x}${w}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,h};for(;a=this.nestingRegexp.exec(e);){let h=[];o={...n},o=o.replace&&!J(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const p=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(p!==-1&&(h=a[1].slice(p).split(this.formatSeparator).map(x=>x.trim()).filter(Boolean),a[1]=a[1].slice(0,p)),i=s(d.call(this,a[1].trim(),o),o),i&&a[0]===e&&!J(i))return i;J(i)||(i=su(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),h.length&&(i=h.reduce((x,_)=>this.format(x,_,n.lng,{...n,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const My=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);e==="currency"&&a.indexOf(":")<0?s.currency||(s.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?s.range||(s.range=a.trim()):a.split(";").forEach(o=>{if(o){const[d,...h]=o.split(":"),p=h.join(":").trim().replace(/^'+|'+$/g,""),x=d.trim();s[x]||(s[x]=p),p==="false"&&(s[x]=!1),p==="true"&&(s[x]=!0),isNaN(p)||(s[x]=parseInt(p,10))}})}return{formatName:e,formatOptions:s}},pu=t=>{const e={};return(s,n,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const o=n+JSON.stringify(i);let d=e[o];return d||(d=t(vn(n),a),e[o]=d),d(s)}},Fy=t=>(e,s,n)=>t(vn(s),n)(e);class Uy{constructor(e={}){this.logger=Et.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const n=s.cacheInBuiltFormats?pu:Fy;this.formats={number:n((a,i)=>{const o=new Intl.NumberFormat(a,{...i});return d=>o.format(d)}),currency:n((a,i)=>{const o=new Intl.NumberFormat(a,{...i,style:"currency"});return d=>o.format(d)}),datetime:n((a,i)=>{const o=new Intl.DateTimeFormat(a,{...i});return d=>o.format(d)}),relativetime:n((a,i)=>{const o=new Intl.RelativeTimeFormat(a,{...i});return d=>o.format(d,i.range||"day")}),list:n((a,i)=>{const o=new Intl.ListFormat(a,{...i});return d=>o.format(d)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=pu(s)}format(e,s,n,a={}){const i=s.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(d=>d.indexOf(")")>-1)){const d=i.findIndex(h=>h.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,d)].join(this.formatSeparator)}return i.reduce((d,h)=>{const{formatName:p,formatOptions:x}=My(h);if(this.formats[p]){let _=d;try{const w=a?.formatParams?.[a.interpolationkey]||{},k=w.locale||w.lng||a.locale||a.lng||n;_=this.formats[p](d,k,{...x,...a,...w})}catch(w){this.logger.warn(w)}return _}else this.logger.warn(`there was no format function for ${p}`);return d},e)}}const zy=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class qy extends bi{constructor(e,s,n,a={}){super(),this.backend=e,this.store=s,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=Et.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,a.backend,a)}queueLoad(e,s,n,a){const i={},o={},d={},h={};return e.forEach(p=>{let x=!0;s.forEach(_=>{const w=`${p}|${_}`;!n.reload&&this.store.hasResourceBundle(p,_)?this.state[w]=2:this.state[w]<0||(this.state[w]===1?o[w]===void 0&&(o[w]=!0):(this.state[w]=1,x=!1,o[w]===void 0&&(o[w]=!0),i[w]===void 0&&(i[w]=!0),h[_]===void 0&&(h[_]=!0)))}),x||(d[p]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(e,s,n){const a=e.split("|"),i=a[0],o=a[1];s&&this.emit("failedLoading",i,o,s),!s&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&n&&(this.state[e]=0);const d={};this.queue.forEach(h=>{Cy(h.loaded,[i],o),zy(h,e),s&&h.errors.push(s),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(p=>{d[p]||(d[p]={});const x=h.loaded[p];x.length&&x.forEach(_=>{d[p][_]===void 0&&(d[p][_]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(e,s,n,a=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:n,tried:a,wait:i,callback:o});return}this.readingCalls++;const d=(p,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(p&&x&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,n,a+1,i*2,o)},i);return}o(p,x)},h=this.backend[n].bind(this.backend);if(h.length===2){try{const p=h(e,s);p&&typeof p.then=="function"?p.then(x=>d(null,x)).catch(d):d(null,p)}catch(p){d(p)}return}return h(e,s,d)}prepareLoading(e,s,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();J(e)&&(e=this.languageUtils.toResolveHierarchy(e)),J(s)&&(s=[s]);const i=this.queueLoad(e,s,n,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,s,n){this.prepareLoading(e,s,{},n)}reload(e,s,n){this.prepareLoading(e,s,{reload:!0},n)}loadOne(e,s=""){const n=e.split("|"),a=n[0],i=n[1];this.read(a,i,"read",void 0,void 0,(o,d)=>{o&&this.logger.warn(`${s}loading namespace ${i} for language ${a} failed`,o),!o&&d&&this.logger.log(`${s}loaded namespace ${i} for language ${a}`,d),this.loaded(e,o,d)})}saveMissing(e,s,n,a,i,o={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${n}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const h={...o,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let x;p.length===5?x=p(e,s,n,a,h):x=p(e,s,n,a),x&&typeof x.then=="function"?x.then(_=>d(null,_)).catch(d):d(null,x)}catch(x){d(x)}else p(e,s,n,a,d,h)}!e||!e[0]||this.store.addResource(e[0],s,n,a)}}}const fu=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),J(t[1])&&(e.defaultValue=t[1]),J(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(n=>{e[n]=s[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),gu=t=>(J(t.ns)&&(t.ns=[t.ns]),J(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),J(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),sa=()=>{},By=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class wn extends bi{constructor(e={},s){if(super(),this.options=gu(e),this.services={},this.logger=Et,this.modules={external:[]},By(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(J(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=fu();this.options={...n,...this.options,...gu(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?Et.init(a(this.modules.logger),this.options):Et.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=Uy;const x=new du(this.options);this.store=new ou(this.options.resources,this.options);const _=this.services;_.logger=Et,_.resourceStore=this.store,_.languageUtils=x,_.pluralResolver=new Dy(x,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),p&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(_.formatter=a(p),_.formatter.init&&_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Iy(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new qy(a(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",(k,...m)=>{this.emit(k,...m)}),this.modules.languageDetector&&(_.languageDetector=a(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=a(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new Qa(this.services,this.options),this.translator.on("*",(k,...m)=>{this.emit(k,...m)}),this.modules.external.forEach(k=>{k.init&&k.init(this)})}if(this.format=this.options.interpolation.format,s||(s=sa),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=(...x)=>this.store[p](...x)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=(...x)=>(this.store[p](...x),this)});const d=Ds(),h=()=>{const p=(x,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(_),s(x,_)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),d}loadResources(e,s=sa){let n=s;const a=J(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],o=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(p=>{p!=="cimode"&&i.indexOf(p)<0&&i.push(p)})};a?o(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>o(h)),this.options.preload?.forEach?.(d=>o(d)),this.services.backendConnector.load(i,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(d)})}else n(null)}reloadResources(e,s,n){const a=Ds();return typeof e=="function"&&(n=e,e=void 0),typeof s=="function"&&(n=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),n||(n=sa),this.services.backendConnector.reload(e,s,i=>{a.resolve(),n(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&wp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const n=Ds();this.emit("languageChanging",e);const a=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},i=(d,h)=>{h?this.isLanguageChangingTo===e&&(a(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,n.resolve((...p)=>this.t(...p)),s&&s(d,(...p)=>this.t(...p))},o=d=>{!e&&!d&&this.services.languageDetector&&(d=[]);const h=J(d)?d:d&&d[0],p=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(J(d)?[d]:d);p&&(this.language||a(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector?.cacheUserLanguage?.(p)),this.loadResources(p,x=>{i(x,p)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),n}getFixedT(e,s,n){const a=(i,o,...d)=>{let h;typeof o!="object"?h=this.options.overloadTranslationOptionHandler([i,o].concat(d)):h={...o},h.lng=h.lng||a.lng,h.lngs=h.lngs||a.lngs,h.ns=h.ns||a.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||n||a.keyPrefix);const p=this.options.keySeparator||".";let x;return h.keyPrefix&&Array.isArray(i)?x=i.map(_=>`${h.keyPrefix}${p}${_}`):x=h.keyPrefix?`${h.keyPrefix}${p}${i}`:i,this.t(x,h)};return J(e)?a.lng=e:a.lngs=e,a.ns=s,a.keyPrefix=n,a}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=s.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(d,h)=>{const p=this.services.backendConnector.state[`${d}|${h}`];return p===-1||p===0||p===2};if(s.precheck){const d=s.precheck(this,o);if(d!==void 0)return d}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,e)&&(!a||o(i,e)))}loadNamespaces(e,s){const n=Ds();return this.options.ns?(J(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),s&&s(a)}),n):(s&&s(),Promise.resolve())}loadLanguages(e,s){const n=Ds();J(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{n.resolve(),s&&s(o)}),n):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const i=a.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new du(fu());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new wn(e,s)}cloneInstance(e={},s=sa){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new wn(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(d=>{i[d]=this[d]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const d=Object.keys(this.store.data).reduce((h,p)=>(h[p]={...this.store.data[p]},h[p]=Object.keys(h[p]).reduce((x,_)=>(x[_]={...h[p][_]},x),h[p]),h),{});i.store=new ou(d,a),i.services.resourceStore=i.store}return i.translator=new Qa(i.services,a),i.translator.on("*",(d,...h)=>{i.emit(d,...h)}),i.init(a,s),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ie=wn.createInstance();Ie.createInstance=wn.createInstance;Ie.createInstance;Ie.dir;Ie.init;Ie.loadResources;Ie.reloadResources;Ie.use;Ie.changeLanguage;Ie.getFixedT;Ie.t;Ie.exists;Ie.setDefaultNamespace;Ie.hasLoadedNamespace;Ie.loadNamespaces;Ie.loadLanguages;const{slice:Vy,forEach:Hy}=[];function Wy(t){return Hy.call(Vy.call(arguments,1),e=>{if(e)for(const s in e)t[s]===void 0&&(t[s]=e[s])}),t}function Ky(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(s=>s.test(t))}const xu=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Gy=function(t,e){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(e);let i=`${t}=${a}`;if(n.maxAge>0){const o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(n.domain){if(!xu.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!xu.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},_u={create(t,e,s,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};s&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+s*60*1e3)),n&&(a.domain=n),document.cookie=Gy(t,e,a)},read(t){const e=`${t}=`,s=document.cookie.split(";");for(let n=0;n<s.length;n++){let a=s[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Qy={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return _u.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:s,cookieMinutes:n,cookieDomain:a,cookieOptions:i}=e;s&&typeof document<"u"&&_u.create(s,t,n,a,i)}},Jy={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,s;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const i=n.substring(1).split("&");for(let o=0;o<i.length;o++){const d=i[o].indexOf("=");d>0&&i[o].substring(0,d)===e&&(s=i[o].substring(d+1))}}return s}},Yy={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:s}=t,n;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const i=a.substring(1);if(e){const o=i.split("&");for(let d=0;d<o.length;d++){const h=o[d].indexOf("=");h>0&&o[d].substring(0,h)===e&&(n=o[d].substring(h+1))}}if(n)return n;if(!n&&s>-1){const o=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof s=="number"?s:0]?.replace("/",""):void 0}}}return n}};let Wr=null;const yu=()=>{if(Wr!==null)return Wr;try{if(Wr=typeof window<"u"&&window.localStorage!==null,!Wr)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Wr=!1}return Wr};var Zy={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&yu())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:s}=e;s&&yu()&&window.localStorage.setItem(s,t)}};let Kr=null;const bu=()=>{if(Kr!==null)return Kr;try{if(Kr=typeof window<"u"&&window.sessionStorage!==null,!Kr)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Kr=!1}return Kr};var Xy={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&bu())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:s}=e;s&&bu()&&window.sessionStorage.setItem(s,t)}},eb={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:s,userLanguage:n,language:a}=navigator;if(s)for(let i=0;i<s.length;i++)e.push(s[i]);n&&e.push(n),a&&e.push(a)}return e.length>0?e:void 0}},tb={name:"htmlTag",lookup(t){let{htmlTag:e}=t,s;const n=e||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(s=n.getAttribute("lang")),s}},rb={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const s=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof e=="number"?e:0]?.replace("/",""):void 0}},sb={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const s=typeof e=="number"?e+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[s]}};let jp=!1;try{document.cookie,jp=!0}catch{}const Np=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];jp||Np.splice(1,1);const nb=()=>({order:Np,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class kp{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,s)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Wy(s,this.options||{},nb()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Qy),this.addDetector(Jy),this.addDetector(Zy),this.addDetector(Xy),this.addDetector(eb),this.addDetector(tb),this.addDetector(rb),this.addDetector(sb),this.addDetector(Yy)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,s=[];return e.forEach(n=>{if(this.detectors[n]){let a=this.detectors[n].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(s=s.concat(a))}}),s=s.filter(n=>n!=null&&!Ky(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}cacheUserLanguage(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;s&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||s.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(e,this.options)}))}}kp.type="languageDetector";const ab={loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",view:"View",search:"Search",filter:"Filter",export:"Export",print:"Print",submit:"Submit",back:"Back",next:"Next",previous:"Previous",close:"Close",confirm:"Confirm",yes:"Yes",no:"No",add:"Add",update:"Update",saving:"Saving...",deleteConfirm:"Are you sure you want to delete this?"},ib={title:"Field Inspection Management System",subtitle:"Conduct and manage field inspections with photo documentation",dashboard:"Dashboard",inspections:"Inspections",inspectionsList:"Inspections List",newInspection:"New Inspection",analytics:"Analytics",reports:"Reports",fullName:"Field Inspection Management System",description:"Conduct and manage field inspections with photo documentation",totalInspections:"Total Inspections",pending:"Pending",completed:"Completed",successRate:"Success Rate",quickActions:"Quick Actions",recentInspections:"Recent Inspections",inspectionNumber:"Inspection Number",location:"Location",category:"Category",status:"Status",date:"Date",locationAccuracy:"Location Accuracy",actions:"Actions",viewAndManageInspections:"View and manage inspections",createNewInspection:"Create new inspection",viewAnalyticsAndReports:"View analytics and reports",noInspectionsFound:"No inspections found",createFirstInspection:"Create your first inspection to get started",searchInspections:"Search inspections...",allCategories:"All Categories",allStatuses:"All Statuses",allStatus:"All Status",planned:"Planned",inProgress:"In Progress",draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected",reassigned:"Reassigned",underReview:"Under Review",photoDocumentationRequired:"Photo Documentation Required",photoDocumentationRequiredDesc:"Both inspection types require photo documentation. You can upload up to 5 photos per inspection for proper record keeping.",gpsLocationCaptureRequired:"GPS Location Capture",gpsLocationCaptureDesc:"Location coordinates will be automatically captured during the inspection process for accurate record keeping.",locationDetails:"Location Details",photosSubmit:"Photos & Submit",viewInspection:"View Inspection",editInspection:"Edit Inspection",formReadOnly:"This form is read-only",viewMode:"View Mode",updateInspection:"Update Inspection",inspectionSavedAsDraft:"Inspection saved as draft",inspectionUpdatedAsDraft:"Inspection updated as draft",inspectionSubmittedSuccessfully:"Inspection submitted successfully",inspectionUpdatedSuccessfully:"Inspection updated successfully",chooseFiles:"Choose Files",uploadedPhotos:"Uploaded Photos",uploadingPhotos:"Uploading photos...",noPhotosFound:"No photos found",maxPhotosAllowed:"Maximum 5 photos allowed",anganwadi:"Anganwadi Center Inspection",office:"Office Inspection",document:"Document Inspection",rajya_shaishanik:"School Visit Form",form_4:"Form 4",form_5:"Form 5",form_6:"Form 6",form_7:"Form 7",form_8:"Form 8",form_9:"Form 9",form_10:"Form 10",form_11:"Form 11",form_12:"Form 12",form_13:"Form 13",form_14:"Form 14",form_15:"Form 15",inspectionCategory:"Inspection Category",selectCategory:"Select Category",locationName:"Location Name",enterLocationName:"Enter location name",address:"Address",enterFullAddress:"Enter full address",plannedDate:"Planned Date",locationInformation:"Location Information",getCurrentLocation:"Get Current Location",locationCaptured:"Location Captured",latitude:"Latitude",longitude:"Longitude",accuracy:"Accuracy",createInspection:"Create Inspection",creating:"Creating...",refresh:"Refresh",export:"Export",anganwadiInspection:"Anganwadi Center Inspection",officeInspection:"Office Inspection",comingSoon:"Coming Soon",basicDetails:"Basic Details",inspectionDetails:"Inspection Details",inspectionForm:"Inspection Form",basicInformation:"Basic Information",enterBasicDetails:"Enter the basic details of the Anganwadi center",anganwadiName:"Anganwadi Name",enterAnganwadiName:"Enter anganwadi name",anganwadiNumber:"Anganwadi Number",enterAnganwadiNumber:"Enter anganwadi number",supervisorName:"Supervisor Name",enterSupervisorName:"Enter supervisor name",helperName:"Helper Name",enterHelperName:"Enter helper name",villageName:"Village Name",enterVillageName:"Enter village name",buildingCondition:"Building Condition",selectCondition:"Select condition",excellent:"Excellent",good:"Good",average:"Average",poor:"Poor",provideLocationDetails:"Provide location details and capture GPS coordinates",fullAddress:"Full Address",enterCompleteAddress:"Enter complete address",gpsLocationCapture:"GPS Location Capture",clickToGetLocation:'Click "Get Current Location" to capture GPS coordinates',completeDetailedChecklist:"Complete the detailed inspection checklist",facilitiesAvailable:"Facilities Available",roomAvailability:"Room Availability",toiletFacility:"Toilet Facility",drinkingWater:"Drinking Water",electricity:"Electricity",kitchenGarden:"Kitchen Garden",weighingMachine:"Weighing Machine",heightMeasuringScale:"Height Measuring Scale",firstAidKit:"First Aid Kit",teachingMaterials:"Teaching Materials",toysAvailable:"Toys Available",attendanceRegister:"Attendance Register",growthChartUpdated:"Growth Chart Updated",vaccinationRecords:"Vaccination Records",nutritionRecords:"Nutrition Records",childrenInformation:"Children Information",totalRegistered:"Total Registered",presentToday:"Present Today",age0to3Years:"Age 0-3 Years",age3to6Years:"Age 3-6 Years",nutritionHealthServices:"Nutrition & Health Services",hotMealServed:"Hot Meal Served",mealQuality:"Meal Quality",selectQuality:"Select quality",takeHomeRation:"Take Home Ration",healthCheckupConducted:"Health Checkup Conducted",immunizationUpdated:"Immunization Updated",vitaminAGiven:"Vitamin A Given",ironTabletsGiven:"Iron Tablets Given",observationsRecommendations:"Observations & Recommendations",generalObservations:"General Observations",enterGeneralObservations:"Enter general observations about the anganwadi center",recommendations:"Recommendations",enterRecommendations:"Enter recommendations for improvement",actionRequired:"Action Required",enterActionRequired:"Enter specific actions that need to be taken",photoDocumentation:"Photo Documentation",uploadPhotosToDocument:"Upload photos to document your inspection findings",uploadInspectionPhotos:"Upload Inspection Photos",uploadPhotos:"Upload Photos",clickToSelectPhotos:"Click to select photos or drag and drop",addPhotoDescription:"Add photo description",pleaseWaitProcessing:"Please wait while we process your images",readyToSubmit:"Ready to Submit?",reviewInspectionDetails:"Review your inspection details and choose to save as draft or submit for review.",saveAsDraft:"Save as Draft",submitInspection:"Submit Inspection",sectionA:"A) Infrastructure and Basic Facilities",sectionB:"B) Equipment and Materials",sectionC:"C) Records and Documentation",sectionD:"D) Children Information",sectionE:"E) Nutrition & Health Services",sectionF:"F) Observations & Recommendations",geolocationNotSupported:"Geolocation is not supported by this browser.",gettingLocation:"Getting Location...",unableToGetLocation:"Unable to get location. Please enter location manually.",detectedLocation:"Detected Location",photosUploaded:"photos uploaded",maxPhotosReached:"Maximum 5 photos reached",assignForRevisit:"Assign for Revisit",selectInspector:"Select Inspector",chooseInspector:"Choose Inspector",revisitNote:"This inspection will be reassigned to the selected inspector for revisit. The status will be changed to 'In Progress'.",officeInspectionForm:"  ",anganwadiCenterInspection:"Anganwadi Center Inspection",anganwadiInspectionDescription:"Infrastructure and facilities assessment",equipmentMaterialsVerification:"Equipment and materials verification",childrenInformationRecords:"Children information and records",nutritionHealthServicesCheck:"Nutrition and health services",officeInspectionDescription:"Employee information and work nature",letterCorrespondenceCheck:"Letter correspondence details inspection",registersOfficeStructure:"Registers and office structure",workQualityEvaluation:"Work quality evaluation",selectToStartInspection:"Select to start inspection",buildingType:"Building Type",selectBuildingType:"Select building type",ownBuilding:"Own Building",rentedBuilding:"Rented Building",freeBuilding:"Free Building",noBuilding:"No Building",gpsLocation:"GPS Location",confirmDeleteInspection:"Are you sure you want to delete this inspection?",inspectionDeletedSuccessfully:"Inspection deleted successfully",errorDeletingInspection:"Error deleting inspection",selectcategory:"select Category"},ob={signIn:"Sign In",signOut:"Sign Out",email:"Email Address",password:"Password",forgotPassword:"Forgot your password?",resetPassword:"Reset Password",enterEmail:"Enter your email",enterPassword:"Enter your password",signInError:"Sign in failed. Please check your credentials.",resetEmailSent:"Password reset email sent",checkEmail:"Check Your Email",resetEmailMessage:"We've sent a password reset link to",backToSignIn:"Back to Sign In",invalidEmail:"Please enter a valid email address",passwordTooShort:"Password must be at least 6 characters long",fillAllFields:"Please fill in all fields"},lb={dashboard:"Dashboard",profile:"Profile",settings:"Settings",help:"Help",language:"Language"},cb={title:"ZP Chandrapur",subtitle:"Integrated Applications System",welcome:"Welcome back",overview:"System Overview",quickActions:"Quick Actions",recentActivity:"Recent Activity",systemStatus:"System Status",notifications:"Notifications"},db={erms:{name:"ERMS",fullName:"Employee Retirement Management System",description:"Manage employee retirement processes and documentation",totalEmployees:"Total Employees",upcomingRetirements:"Upcoming Retirements",processedCases:"Processed Cases",pendingActions:"Pending Actions",viewEmployees:"View Employees",addEmployee:"Add Employee",generateReport:"Generate Report",webApplication:"Web Application",departments:{photoDocumentationRequired:"Photo Documentation Required",photoDocumentationRequiredDesc:"Both inspection types require photo documentation. You can upload up to 5 photos per inspection for proper record keeping.",gpsLocationCaptureRequired:"GPS Location Capture Required",gpsLocationCaptureDesc:"Location coordinates will be automatically captured during the inspection process for accurate record keeping."}},estimate:{name:"E-Estimate",fullName:"Electronic Estimation System",description:"Create, manage and track project estimates and completion reports",activeEstimates:"Active Estimates",pendingApprovals:"Pending Approvals",completedProjects:"Completed Projects",totalValue:"Total Value",createEstimate:"Create Estimate",viewEstimates:"View Estimates",templates:"Templates",mobileApplication:"Mobile Application"},fims:{name:"FIMS",fullName:"Field Inspection Management System",description:"Conduct and manage field inspections with photo documentation",monthlyTarget:"Monthly Target",inspectionsList:"Inspections List",completed:"Completed",pending:"Pending",inspectionRate:"Inspection Rate",newInspection:"New Inspection",viewInspections:"View Inspections",reports:"Reports",mobileApplication:"Mobile Application",title:"Field Inspection Management System",subtitle:"Conduct and manage field inspections with photo documentation",dashboard:"Dashboard",inspections:"Inspections",analytics:"Analytics",totalInspections:"Total Inspections",successRate:"Success Rate",quickActions:"Quick Actions",recentInspections:"Recent Inspections",inspectionNumber:"Inspection Number",location:"Location",category:"Category",status:"Status",date:"Date",locationAccuracy:"Location Accuracy",actions:"Actions",viewAndManageInspections:"View and manage inspections",createNewInspection:"Create new inspection",viewAnalyticsAndReports:"View analytics and reports",noInspectionsFound:"No inspections found",createFirstInspection:"Create your first inspection to get started",searchInspections:"Search inspections...",allCategories:"All Categories",allStatuses:"All Statuses",allStatus:"All Status",planned:"Planned",inProgress:"In Progress",draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected",reassigned:"Reassigned",underReview:"Under Review",photoDocumentationRequired:"Photo Documentation Required",photoDocumentationRequiredDesc:"Both inspection types require photo documentation. You can upload up to 5 photos per inspection for proper record keeping.",gpsLocationCaptureRequired:"GPS Location Capture Required",gpsLocationCaptureDesc:"Location coordinates will be automatically captured during the inspection process for accurate record keeping.",locationDetails:"Location Details",photosSubmit:"Photos & Submit",viewInspection:"View Inspection",editInspection:"Edit Inspection",formReadOnly:"This form is read-only",viewMode:"View Mode",updateInspection:"Update Inspection",inspectionSavedAsDraft:"Inspection saved as draft",inspectionUpdatedAsDraft:"Inspection updated as draft",inspectionSubmittedSuccessfully:"Inspection submitted successfully",inspectionUpdatedSuccessfully:"Inspection updated successfully",chooseFiles:"Choose Files",uploadedPhotos:"Uploaded Photos",uploadingPhotos:"Uploading photos...",noPhotosFound:"No photos found",maxPhotosAllowed:"Maximum 5 photos allowed"},pesa:{name:"PESA 5%",fullName:"PESA 5% Fund Management System",description:"Track and manage PESA fund utilization across components",totalFund:"Total Fund",utilized:"Utilized",remaining:"Remaining",villages:"Villages",addTransaction:"Add Transaction",viewFunds:"View Funds",compliance:"Compliance",webApplication:"Web Application"}},ub={userProfile:"User Profile",accountDetails:"Account Details",systemAccess:"System Access",username:"Username",email:"Email",role:"Role",userId:"User ID",memberSince:"Member Since",lastSignIn:"Last Sign In",permissions:"Permissions",read:"Read",write:"Write",delete:"Delete",admin:"Admin",webApp:"Web App",mobileApp:"Mobile App"},hb={developer:"Developer",super_admin:"Super Admin",admin:"Admin",officer:"Officer",clerk:"Clerk"},mb={accessRestricted:"Access Restricted",noAccess:"You don't have {{permission}} access to the {{system}} system.",contactAdmin:"Please contact your administrator if you believe this is an error.",permissionError:"Permission Error"},pb={somethingWentWrong:"Something went wrong",tryAgain:"Please try again later",networkError:"Network error occurred",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Page not found"},fb={planned:"Planned",in_progress:"In Progress",draft:"Draft",submitted:"Submitted",under_review:"Under Review",approved:"Approved",rejected:"Rejected",reassigned:"Reassigned"},gb={common:ab,fims:ib,auth:ob,navigation:lb,dashboard:cb,systems:db,profile:ub,roles:hb,permissions:mb,errors:pb,statuses:fb},xb={loading:"   ...",error:"",success:"",cancel:" ",save:" ",delete:"",edit:" ",view:"",search:"",filter:"",export:"",print:"",submit:" ",back:"",next:"",previous:"",close:" ",confirm:" ",yes:"",no:"",add:"",update:" ",saving:"  ...",deleteConfirm:"       ?"},_b={title:"   ",subtitle:"       ",dashboard:"",inspections:"",newInspection:" ",analytics:"",totalInspections:" ",completed:"",pending:"",successRate:" ",quickActions:" ",recentInspections:" ",inspectionNumber:" ",location:"",category:"",status:"",date:"",actions:"",photosAndDocuments:"  ",locationAccuracy:" ",viewAndManageInspections:"    ",createNewInspection:"   ",viewAnalyticsAndReports:"   ",noInspectionsFound:"   ",createFirstInspection:"      ",searchInspections:" ...",allCategories:" ",allStatuses:" ",photoDocumentationRequired:"  ",photoDocumentationRequiredDesc:"      .       5     .",gpsLocationCaptureRequired:"GPS   ",gpsLocationCaptureDesc:"          .",anganwadiName:" ",enterAnganwadiName:"   ",anganwadiNumber:" ",enterAnganwadiNumber:"   ",supervisorName:" ",enterSupervisorName:"   ",helperName:" ",enterHelperName:"   ",villageName:" ",enterVillageName:"   ",buildingType:" ",selectBuildingType:"  ",ownBuilding:" ",rentedBuilding:" ",freeBuilding:"  ",locationDetails:" ",photosSubmit:"  ",viewInspection:" ",editInspection:"  ",formReadOnly:"    ",viewMode:" ",updateInspection:"  ",inspectionSavedAsDraft:"    ",inspectionUpdatedAsDraft:"    ",inspectionSubmittedSuccessfully:"   ",inspectionUpdatedSuccessfully:"   ",chooseFiles:" ",uploadedPhotos:"  ",uploadingPhotos:"   ...",noPhotosFound:"   ",maxPhotosAllowed:"  5   ",photoDocumentation:" ",locationName:" ",enterLocationName:"   ",address:"",enterFullAddress:"   ",plannedDate:" ",getCurrentLocation:"  ",gettingLocation:"  ...",locationCaptured:"  ",latitude:"",longitude:"",accuracy:"",saveAsDraft:"   ",submitInspection:"  ",geolocationNotSupported:"     .",unableToGetLocation:"   .     ."},yb={signIn:" ",signOut:" ",email:" ",password:"",forgotPassword:"  ?",resetPassword:"  ",enterEmail:"  ",enterPassword:"  ",signInError:"  .    .",resetEmailSent:"   ",checkEmail:"  ",resetEmailMessage:"     ",backToSignIn:"    ",invalidEmail:"    ",passwordTooShort:"  6  ",fillAllFields:"   "},bb={dashboard:"",profile:"",settings:"",help:"",language:""},vb={title:".. ",subtitle:"  ",welcome:" ",overview:" ",quickActions:" ",recentActivity:" ",systemStatus:" ",notifications:""},wb={erms:{name:"ERMS",fullName:"   ",description:"      ",totalEmployees:" ",upcomingRetirements:" ",processedCases:"  ",pendingActions:" ",viewEmployees:" ",addEmployee:" ",generateReport:"  ",webApplication:" ",departments:{photoDocumentationRequired:"  ",photoDocumentationRequiredDesc:"      .       5     .",gpsLocationCaptureRequired:"GPS   ",gpsLocationCaptureDesc:"          ."}},estimate:{name:"-",fullName:"  ",description:"     ,    ",activeEstimates:" ",pendingApprovals:" ",completedProjects:"  ",totalValue:" ",createEstimate:"  ",viewEstimates:" ",templates:"",mobileApplication:" "},fims:{name:"FIMS",fullName:"   ",description:"       ",monthlyTarget:" ",inspectionsList:" ",completed:"",pending:"",inspectionRate:" ",newInspection:" ",viewInspections:" ",reports:"",mobileApplication:" ",title:"   ",subtitle:"       ",dashboard:"",inspections:"",analytics:"",totalInspections:" ",successRate:" ",quickActions:" ",recentInspections:" ",inspectionNumber:" ",location:"",category:"",status:"",date:"",locationAccuracy:" ",actions:"",viewAndManageInspections:"    ",createNewInspection:"   ",viewAnalyticsAndReports:"   ",noInspectionsFound:"   ",createFirstInspection:"      ",searchInspections:" ...",allCategories:" ",allStatuses:" ",allStatus:" ",planned:"",inProgress:"",draft:"",submitted:" ",approved:"",rejected:"",reassigned:" ",underReview:"",photoDocumentationRequired:"  ",photoDocumentationRequiredDesc:"      .       5     .",gpsLocationCaptureRequired:"GPS   ",gpsLocationCaptureDesc:"          .",locationDetails:" ",photosSubmit:"  ",viewInspection:" ",editInspection:"  ",formReadOnly:"    ",viewMode:"  -     ",updateInspection:"  ",inspectionSavedAsDraft:"    ",inspectionUpdatedAsDraft:"    ",inspectionSubmittedSuccessfully:"   ",inspectionUpdatedSuccessfully:"   ",chooseFiles:" ",uploadedPhotos:"  ",uploadingPhotos:"   ...",noPhotosFound:"     ",maxPhotosAllowed:"  5   .     .",anganwadi:"  ",office:" ",document:" ",rajya_shaishanik:"   ",form_4:" ",form_5:" ",form_6:" ",form_7:" ",form_8:" ",form_9:" ",form_10:" ",form_11:" ",form_12:" ",form_13:" ",form_14:" ",form_15:" ",inspectionCategory:" ",selectCategory:" ",locationName:" ",enterLocationName:"   ",address:"",enterFullAddress:"   ",plannedDate:" ",locationInformation:" ",getCurrentLocation:"  ",locationCaptured:"  ",latitude:"",longitude:"",accuracy:"",createInspection:"  ",creating:"  ...",refresh:"",export:"",anganwadiInspection:"  ",officeInspection:" ",comingSoon:"  ",basicDetails:" ",inspectionDetails:" ",inspectionForm:" ",basicInformation:" ",enterBasicDetails:"    ",anganwadiName:" ",enterAnganwadiName:"   ",anganwadiNumber:" ",enterAnganwadiNumber:"   ",supervisorName:" ",enterSupervisorName:"   ",helperName:" ",enterHelperName:"   ",villageName:" ",enterVillageName:"   ",buildingCondition:" ",selectCondition:" ",excellent:"",good:"",average:"",poor:"",provideLocationDetails:"     GPS   ",fullAddress:" ",enterCompleteAddress:"  ",gpsLocationCapture:"GPS  ",clickToGetLocation:"GPS    '  '   ",completeDetailedChecklist:"    ",facilitiesAvailable:" ",roomAvailability:" ",toiletFacility:" ",drinkingWater:" ",electricity:"",kitchenGarden:" ",weighingMachine:" ",heightMeasuringScale:"  ",firstAidKit:"  ",teachingMaterials:" ",toysAvailable:" ",attendanceRegister:" ",growthChartUpdated:"  ",vaccinationRecords:" ",nutritionRecords:" ",childrenInformation:" ",totalRegistered:" ",presentToday:" ",age0to3Years:" - ",age3to6Years:" - ",nutritionHealthServices:"   ",hotMealServed:"  ",mealQuality:" ",selectQuality:" ",takeHomeRation:"  ",healthCheckupConducted:"  ",immunizationUpdated:" ",vitaminAGiven:"  ",ironTabletsGiven:"  ",observationsRecommendations:"  ",generalObservations:" ",enterGeneralObservations:"    ",recommendations:"",enterRecommendations:"  ",actionRequired:" ",enterActionRequired:"   ",photoDocumentation:" ",uploadPhotosToDocument:"       ",uploadInspectionPhotos:"   ",uploadPhotos:"  ",clickToSelectPhotos:"        ",addPhotoDescription:"  ",pleaseWaitProcessing:"        ",readyToSubmit:"   ?",reviewInspectionDetails:"              .",saveAsDraft:"   ",submitInspection:"  ",sectionA:")   (Infrastructure and Basic Facilities)",sectionB:")    (Equipment and Materials)",sectionC:")    (Records and Documentation)",sectionD:")   (Children Information)",sectionE:")     (Nutrition & Health Services)",sectionF:")    (Observations & Recommendations)",geolocationNotSupported:"     .",gettingLocation:"  ...",unableToGetLocation:"   .     .",detectedLocation:" ",photosUploaded:"  ",maxPhotosReached:"  5  ",assignForRevisit:"  ",selectInspector:" ",chooseInspector:" ",revisitNote:"        .  ''   .",officeInspectionForm:"  ",anganwadiCenterInspection:"  ",anganwadiInspectionDescription:"    ",equipmentMaterialsVerification:"   ",childrenInformationRecords:"   ",nutritionHealthServicesCheck:"   ",officeInspectionDescription:"    ",letterCorrespondenceCheck:"   ",registersOfficeStructure:"   ",workQualityEvaluation:"  ",selectToStartInspection:"   ",buildingType:" ",selectBuildingType:" ",ownBuilding:"",rentedBuilding:"",freeBuilding:"",noBuilding:" ",gpsLocation:"GPS ",selectcategory:" "},pesa:{name:"PESA 5%",fullName:"PESA 5%   ",description:" PESA      ",totalFund:" ",utilized:"",remaining:"",villages:"",addTransaction:" ",viewFunds:" ",compliance:"",webApplication:" "}},jb={userProfile:" ",accountDetails:" ",systemAccess:" ",username:"",email:"",role:"",userId:" ",memberSince:" ",lastSignIn:"  ",permissions:"",read:"",write:"",delete:"",admin:"",webApp:" ",mobileApp:" "},Nb={developer:"",super_admin:" ",admin:"",officer:"",clerk:""},kb={accessRestricted:" ",noAccess:" {{system}}  {{permission}}  .",contactAdmin:"             .",permissionError:" "},Sb={somethingWentWrong:"  ",tryAgain:"   ",networkError:"  ",unauthorized:" ",forbidden:" ",notFound:"  "},Cb={common:xb,fims:_b,auth:yb,navigation:bb,dashboard:vb,systems:wb,profile:jb,roles:Nb,permissions:kb,errors:Sb},Eb={en:{translation:gb},mr:{translation:Cb}};Ie.use(kp).use(y0).init({resources:Eb,fallbackLng:"en",lng:"mr",debug:!1,detection:{order:["localStorage","htmlTag","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1}});if(typeof document<"u"){const t=document.getElementById("root");t&&Lm(t).render(r.jsx(A.StrictMode,{children:r.jsx(Ny,{})}))}
